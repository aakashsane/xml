<?xml version="1.0"?>

<!-- GFDL Model Development Team (MDT) documentation: http://cobweb.gfdl.noaa.gov/~niz/mdt/ -->
<!-- GFDL MDT Atmosphere Working Group (AWG) documentation: http://cobweb.gfdl.noaa.gov/~cjg/awg/ -->

<!-- Model configurations in support of MDT Atmosphere Working Group (AWG), v20151106b revision -->

<!-- QUICK START GUIDE:

# To checkout this xml (you should have done this already)
# .. module load fre/bronx-10
# .. module load git
# .. mkdir -p $home/awg/ulm_201505
# .. cd $home/awg/ulm_201505
# .. git clone -b awg_v20151106b http://gitlab.gfdl.noaa.gov/mdt/xml.git xml_v20151106b
# .. cd xml_v20151106b

# Change YOURGROUPLETTER to your group, such as f, w, o...
      <project>gfdl_YOURGROUPLETTER</project>

# To check out source code and compile:
# .. module load fre/bronx-10
# .. fremake -x awg_v20151106b.xml -p ncrc2.intel -t openmp cm4p8_v20151106b

# To run regression test:
# .. frerun -s -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g7

# To run a complete experiment (with automated database entry if MDBIswitch in "on"):
# .. frerun -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g7

# To run fredb after an experiment is finished to manually add it to the database:
# .. fredb-pp -x awg_v20151106b.xml -p gfdl.ncrc2-intel -t openmp c96L32_am4g7

-->

<!-- LIST OF AUTOMATED TESTS TO BE PERFORMED WITH JENNY
     Notes: Only fremake and frerun are currently supported.
            FRE commands listed should NOT include -s option to
            automatically sumbit jobs.

jenny> frerun -r basic,restart,scaling -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g6_fullaero  
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp  c96L48_am4g6_fullaero
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp  c96L48_am4g6_fullchem

jenny> frerun -r basic,restart,scaling -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g7
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L48_am4g7_fullchem
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L48_am4g7_fullchem_nitrate
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g8
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L48_am4g8_fullchem
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L48_am4g8_fullchem_nitrate
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g7_2000climo
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g7_1860climo
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g7_2000aero
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4g7_2000climo_p2K

jenny> frerun -r basic,restart,scaling -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4h7
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4h7_2000climo
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4h7_1860climo
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4h7_2000aero
jenny> frerun -r basic -x awg_v20151106b.xml -p ncrc2.intel -t openmp c96L32_am4h7_2000climo_p2K



! Reference results for automated tests. Jenny will verify the sha1 checksum of of the
! diag-integral.out ascii file against the checksums listed below. The checksum
! can be computed with the 'taverage' AWG utility.

! v20150923 code
! ref> c96L32_am4g6_fullaero/ncrc2.intel-prod-openmp/0m8d        8d4be56456aa0a87cc1055cb7b7cebc94e2b7339
! ref> c96L48_am4g6_fullaero/ncrc2.intel-prod-openmp/0m8d        ae9a975b5bfe518a8b634a0edc64e5e9985d2380
! ref> c96L48_am4g6_fullchem/ncrc2.intel-prod-openmp/0m8d        51addcac25ea8b55f9a3d909b94e1b96bc10f21d
! v20151106 code
ref> c96L32_am4g6_fullaero/ncrc2.intel-prod-openmp/0m8d        0d9340ea1612ce1abd9e66f2ad1caca7ac66c132
ref> c96L48_am4g6_fullaero/ncrc2.intel-prod-openmp/0m8d        f847027cfb5b0953992049d2846088390ddff600
ref> c96L48_am4g6_fullchem/ncrc2.intel-prod-openmp/0m8d        a7b7b627b8d9dc8f8489b9143566be39d0a2a276


ref> c96L32_am4g7/ncrc2.intel-prod-openmp/0m8d                 d96e8240f5806bda342efaf5f4bf0d3db2ede029
ref> c96L48_am4g7_fullchem/ncrc2.intel-prod-openmp/0m8d        20659d12b0c9961b720cd9411eec7586cc563931
ref> c96L48_am4g7_fullchem_nitrate/ncrc2.intel-prod-openmp/0m8d  398d489b2513f552eb14fd4cd49bc8134e463134
! ref> c96L32_am4g7_2000climo/ncrc2.intel-prod-openmp/0m8d          
! ref> c96L32_am4g7_1860climo/ncrc2.intel-prod-openmp/0m8d         
! ref> c96L32_am4g7_2000aero/ncrc2.intel-prod-openmp/0m8d        
! ref> c96L32_am4g7_2000climo_p2K/ncrc2.intel-prod-openmp/0m8d   

ref> c96L32_am4g8/ncrc2.intel-prod-openmp/0m8d                 92aa1878abce6d957ebe0d18526915c156d483f0
ref> c96L48_am4g8_fullchem/ncrc2.intel-prod-openmp/0m8d        51f790cde424e1716bb6ae0031b96f9a57d46eb9
ref> c96L48_am4g8_fullchem_nitrate/ncrc2.intel-prod-openmp/0m8d  4abf62afe4fe78567d2c95933368a9a5408073a9

ref> c96L32_am4h7/ncrc2.intel-prod-openmp/0m8d                 ce9df65d44958891f6137712f6fe3ad41a3bd551
ref> c96L32_am4h7_2000climo/ncrc2.intel-prod-openmp/0m8d       415646e8ce17f122d1291ede6c26952459dd84ab
ref> c96L32_am4h7_1860climo/ncrc2.intel-prod-openmp/0m8d       916425f7033d39362421669c2013892623a7e52e
ref> c96L32_am4h7_2000aero/ncrc2.intel-prod-openmp/0m8d        d2026997764b2a8c72e081ed86607e3d5f8dc494
ref> c96L32_am4h7_2000climo_p2K/ncrc2.intel-prod-openmp/0m8d   55a5435231035045f6161d6dcd6d3504dc440b9a
-->

<experimentSuite rtsVersion="4" xmlns:xi="http://www.w3.org/2003/XInclude">

  <property name="RELEASE" value="ulm_201505"/>                    <!-- base code release -->
  <property name="MOM6_DATE" value="2015.09.21"/>                  <!-- git tag date for MOM6 source code -->
  <property name="MOM6_GIT_TAG" value="dev/master/$(MOM6_DATE)"/>  <!-- git tag for MOM6 source code -->
  <property name="AWG_GIT_TAG" value="awg_v20151106"/>             <!-- git tag for AWG source code -->
  <property name="AWG_VERSION" value="v20151106b"/>                 <!-- AWG source code version -->
  <property name="FRE_STEM" value="awg/$(RELEASE)"/>
  <property name="FRE_VERSION" value="fre/bronx-10"/>
  <property name="ANALYSIS_SWITCH" value="on"/>
  <property name="MDBIswitch" value="off"/>                        <!-- on/off switch for MDBI database -->
  <property name="ProjectID" value="AWG"/>                         <!-- database top level -->

  <property name="AWG_INPUT_HOME_GAEA" value="$HOME/$(FRE_STEM)/xml_v20151106/awg_include"/>
  <property name="AWG_INPUT_HOME_GFDL" value="/home/$USER/ncrc/$(FRE_STEM)/xml_v20151106/awg_include"/>
  <property name="MIZ_ARCHIVE_ROOT_GAEA" value="/lustre/f1/unswept/Ming.Zhao/archive/mdt"/>
  <property name="MIZ_ARCHIVE_ROOT_GFDL" value="/archive/miz/mdt/"/>

<!--
GFDL FAIR USE POLICY

GFDL recognizes the essential nature of collaboration in the scientific
enterprise, including the importance of novel application and analysis of our
models. In order to maximize mutual benefit from collaboration, the use of
experimental GFDL models** should be done in a manner that ensures that
individuals involved in model development receive proper credit for their
work; in order to minimize the potential for misapplication of experimental
models, collaborations should actively engage model developers. Publication of
results using experimental GFDL models should be done in consultation with
scientists that participated in the model development. Consultation with GFDL
model developers should occur before submission of publications based on
experimental GFDL models, and should include agreement on the appropriate level
of acknowledgment, co-authorship and participation by the model developers.
Since experimental models have not been thoroughly vetted, experimental GFDL
models and their output should be distributed only after consultation with the
developers of the model. After a GFDL model has been described in a
peer-reviewed publication it is no longer experimental, and results based on
the model should cite the publication(s) describing the model.

** "Experimental GFDL models" refers to models (e.g., a coupled climate model),
model components (e.g., parameterization schemes), model configurations (e.g.,
the specific arrangement and parameter settings of model components) arising
from model development efforts at GFDL, but whose formulation and configuration
have not yet been documented in the peer-reviewed literature, as well as outputs
from integrations with these models.
-->

<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->

<!--
AMIP simulations are configured to start in 1980 with the first year being a
spin-up year. Postprocessing and analysis are performed starting in 1981. The
length of the simulation and analysis period can be controlled by changing
properties below.
-->

  <!-- make sure to change current_date in coupler_nml accordingly -->
  <property name="EXP_AMIP_START" value="1980"/>
  <property name="EXP_AMIP_END"   value="2000"/>
  <property name="EXP_AMIP_LEN"   value="21"/>
  <property name="ANA_AMIP_START" value="1981"/>
  <property name="ANA_AMIP_END"   value="2000"/>
  <property name="ANA_AMIP_LEN"   value="20yr"/>

  <!-- Post-processing chunk length -->
  <!-- ANA_AMIP_LEN must be an integer multiple of PP_AMIP_CHUNK -->
  <property name="PP_AMIP_CHUNK" value="5yr"/>

<!--=====================================-->
<!--= RFP, CESS SENSITIVITY EXPERIMENTS =-->
<!--=====================================-->

<!--
Experiments to compute RFP (Radiative Flux Perturbation) and Cess sensitivity
were originally configured by Larry Horowitz. Experiments are configured to
start in year 0001, postprocessing and analysis are performed starting from
the second year (0002). The length of the simulation and analysis period can
be controlled by changing properties below.
-->

  <!-- make sure to change current_date in coupler_nml accordingly -->
  <property name="EXP_CLIMO_START" value="0001"/>
  <property name="EXP_CLIMO_END"   value="0011"/>
  <property name="EXP_CLIMO_LEN"   value="11"/>
  <property name="ANA_CLIMO_START" value="0002"/>
  <property name="ANA_CLIMO_END"   value="0011"/>
  <property name="ANA_CLIMO_LEN"   value="10yr"/>
  <property name="PP_CLIMO_CHUNK"  value="5yr"/>


  <property name="EXP_CCLIMO_START" value="0001"/>
  <property name="EXP_CCLIMO_END"   value="0140"/>
  <property name="EXP_CCLIMO_LEN"   value="140"/>
  <property name="ANA_CCLIMO_START" value="0001"/>
  <property name="ANA_CCLIMO_END"   value="0140"/>
  <property name="ANA_CCLIMO_LEN"   value="20yr"/>
  <property name="PP_CCLIMO_CHUNK"  value="5yr"/>
  <property name="PP_CCLIMO_CHUNK_B" value="20yr"/>
  <property name="PP_OCEAN_CHUNK"   value="5yr"/> 
  <property name="PP_OCEAN_CHUNK_B" value="20yr"/> 
  <property name="ANA_CCLIMO_BQX"   value="0020"/>


<!--=================-->
<!--= CHANGING NPES =-->
<!--=================-->

<!--
This xml includes a number of predefined options for the number of PEs.
Changing the number of PEs can be accomplished by simply
modifying 'npes' and segment 'runTime' in the xml <production> block:

      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>

Choosing a particular PE number is a balancing act. The higher npes,
the faster the model throughput, but also the lower the model efficiency
(i.e. the overall simulation will cost more in terms of core hours).

Available options for c96L32:
"""""""""""""""""""""""""""""

  +========+======================+======================+
  |        |  Suggested run time for 12 month segment    |
  |  npes  |    am4g7                                    |
  +========+=============================================+
  |   432  |    05:00:00                                 |
  |   864  |    03:00:00                                 |
  |  1152  |    02:30:00                                 |
  |**1728**|    01:20:00                                 |
  |  2304  |    01:15:00                                 |
  |  3456  |    01:00:00                                 |
  |  4608  |    01:00:00                                 |
  |  6912  |    01:00:00                                 |
  +========+======================+======================+

Available options for c192L32:
""""""""""""""""""""""""""""""

  +========+======================+======================+
  |        |  Suggested run time for 12 month segment    |
  |  npes  |    am4g7                                    |
  +========+=============================================+
  |   864  |    14:00:00                                 |
  |  1152  |    11:00:00                                 |
  |  2304  |    06:00:00                                 |
  |  3456  |    04:00:00                                 |
  |**4608**|    03:00:00                                 |
  |  6912  |    03:00:00                                 |
  +========+======================+======================+

**Note:** default settings are highlighted in **bold**. Suggested
run time values may need to be adjusted for your specific
configuration.

-->

  <setup>

<!-- MDBI -->
    <fmsRelease>fmsversion</fmsRelease>
<!-- /MDBI -->

    <platform name="ncrc2.intel">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_m</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/xml_$(AWG_VERSION)/scripts/$(platform)-$(target)</scripts>
         <stdout>/lustre/f1/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"    value="/lustre/f1/pdata/gfdl_M"/>
      <property name="FP_ARCHIVE_ROOT"     value="/lustre/f1/unswept/Fabien.Paulot/archive"/>
      <property name="MIZ_ARCHIVE_ROOT"    value="$(MIZ_ARCHIVE_ROOT_GAEA)"/>

      <csh><![CDATA[
        source $MODULESHOME/init/csh

        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-intel/4.0.46
        module swap intel intel/12.1.3.293
        module load $(FRE_VERSION)
        module load git

        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
      ]]></csh>
    </platform>

    <platform name="ncrc3.intel">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_m</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src> 
         <scripts>$HOME/$(stem)/xml_$(AWG_VERSION)/scripts/$(platform)-$(target)</scripts>
         <stdout>/lustre/f1/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"    value="/lustre/f1/pdata/gfdl_M"/>
      <property name="FP_ARCHIVE_ROOT"     value="/lustre/f1/unswept/Fabien.Paulot/archive"/>
      <property name="MIZ_ARCHIVE_ROOT"    value="$(MIZ_ARCHIVE_ROOT_GAEA)"/>

      <csh><![CDATA[
module use -a /sw/eslogin-c2/modulefiles
module use -a /lustre/f1/Seth.Underwood/usw/eslogin/modulefiles-c2

module load moab
module load torque

        source $MODULESHOME/init/csh

        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-intel/5.2.82
        module swap intel intel/15.0.2.164

        module load $(FRE_VERSION)
        module load git
        module load gcp/test

        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
      ]]></csh>

    </platform>


    <platform name="gfdl.ncrc2-intel">
      <directory stem="$(FRE_STEM)">
<!-- MDBI requires these to be listed in order to show the path under "Platform Environment" -->
        <archive>$ARCHIVE/$(stem)/$(name)/$(platform)-$(target)</archive>
        <analysis>/nbhome/$USER/$(stem)/$(name)</analysis>
<!-- /MDBI -->
      </directory>
      <property name="F2003_FLAGS"         value="-DINTERNAL_FILE_NML"/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/archive/cjg/mdt"/>
      <property name="FP_ARCHIVE_ROOT"     value="/archive"/>
      <property name="LWH_ARCHIVE_ROOT"    value="/archive"/>
      <property name="MIZ_ARCHIVE_ROOT"    value="$(MIZ_ARCHIVE_ROOT_GFDL)"/>

      <csh><![CDATA[
        source $MODULESHOME/init/csh
        module use -a /home/fms/local/modulefiles
        module purge
        module load $(FRE_VERSION)
        module load fre-analysis
        module load git
        ]]>
      </csh>
    </platform>

    <platform name="gfdl.ncrc3-intel">
      <directory stem="$(FRE_STEM)">
<!-- MDBI requires these to be listed in order to show the path under "Platform Environment" -->
        <archive>$ARCHIVE/$(stem)/$(name)/$(platform)-$(target)</archive>
        <analysis>/nbhome/$USER/$(stem)/$(name)</analysis>
<!-- /MDBI -->
      </directory>
      <property name="F2003_FLAGS"         value="-DINTERNAL_FILE_NML"/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/archive/cjg/mdt"/>
      <property name="FP_ARCHIVE_ROOT"     value="/archive"/>
      <property name="LWH_ARCHIVE_ROOT"    value="/archive"/>
      <property name="MIZ_ARCHIVE_ROOT"    value="$(MIZ_ARCHIVE_ROOT_GFDL)"/>

      <csh><![CDATA[
        source $MODULESHOME/init/csh
        module use -a /home/fms/local/modulefiles
        module purge
        module load $(FRE_VERSION)
        module load fre-analysis
        module load git
        module load gcp/test
        ]]>
      </csh>
    </platform>


  </setup>

<!--===========-->
<!--= COMPILE =-->
<!--===========-->

  <!--The property MOM6_EXAMPLES should point to the mom6 directory that is checked out. It is needed by MOM6 to access its inpu data files-->
  <property name="MOM6_EXAMPLES"  value="$root/cm4_compile/src/mom6"/>

  <experiment name="cm4p8_$(AWG_VERSION)">
    <description>

Experiment to build executable. See git log for source code provenance.

    </description>

    <component name="fms" paths="shared">
     <description domainName="infrastructure" communityName="FMS" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="dev/awg"> shared.git </codeBase>
        <csh><![CDATA[
          ( cd shared && git checkout $(AWG_GIT_TAG) && git cherry-pick e468aee5a30cf708bae78fdda50dbb2714194ffe )
          ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_libMPI -Duse_netCDF </cppDefs>
      </compile>
    </component>

    <component name="atmos_phys" requires="fms" paths="atmos_param atmos_shared">
      <description domainName="" communityName="" communityVersion="$(RELEASE)" communityGrid=""/>
        <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
          <codeBase version="dev/awg">atmos_shared.git atmos_param.git</codeBase>
          <csh><![CDATA[
            ( cd atmos_shared && git checkout $(AWG_GIT_TAG) )
            ( cd atmos_shared && git checkout chem_v20151106_lwh )
            ( cd atmos_param  && git checkout $(AWG_GIT_TAG) )
           ]]>
          </csh>
        </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DCLUBB -DAM3_CHEM</cppDefs>
      </compile>
    </component>

    <component name="atmos_dyn" paths="atmos_drivers/coupled
                                       atmos_cubed_sphere/driver/coupled
                                       atmos_cubed_sphere/model
                                       atmos_cubed_sphere/model_nh_null
                                       atmos_cubed_sphere/tools"
                                requires="fms atmos_phys">
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="dev/awg">atmos_drivers.git atmos_cubed_sphere.git</codeBase>
        <csh><![CDATA[
          ( cd atmos_drivers && git checkout $(AWG_GIT_TAG) )
          ( cd atmos_cubed_sphere && git checkout $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DSPMD</cppDefs>
      </compile>
    </component>

    <component name="ice_sis" requires="fms" paths="ice_sis ice_param">
      <description domainName="Sea Ice SIS" communityName="GFDL-SIS" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="dev/awg"> ice_sis.git ice_param.git </codeBase>
        <csh><![CDATA[
          ( cd ice_sis    && git checkout $(AWG_GIT_TAG) )
          ( cd ice_param  && git checkout $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_netCDF</cppDefs>
      </compile>
    </component>

    <component name="land_lad2" requires="fms" paths="land_lad2">
      <description domainName="LM3" communityName="land_lad2" communityVersion="ulm_lad2_20151116_slm" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="ulm_lad2_20151116_slm">land_lad2.git</codeBase>
      </source>
      <compile>
       <cppDefs>$(F2003_FLAGS)</cppDefs>
<!--The following csh block is needed for compiler pre-processors that are not ANSI-compliant, such as pathscale-->
        <csh><![CDATA[
sed -e 's/<TAB>/\t/' >land/Makefile-cpp <<EOF
CPPDEFS = -DUSE_LOG_DIAG_FIELD_INFO $(F2003_FLAGS)
FRETARGET = $(target)

ifneq (\$(findstring hdf5,\${FRETARGET}),)
else
  CPPDEFS += -Duse_LARGEFILE
endif

vpath %.F90 \$(shell find ${src_dir}/land_lad2 -type d)

land/%.f90: %.F90
<TAB>cpp \${CPPDEFS} -C -v -I ${src_dir}/shared/include -o \$@ \$<

EOF

foreach foo ( `find ${src_dir}/land_lad2 -type f -name \*.F90` )
  make -f land/Makefile-cpp land/$foo:t:r.f90
end
find ${bld_dir}/land -type f -name \*.f90 > land/pathnames_land
          ]]>
        </csh>
      </compile>
    </component>

    <component name="mom6" requires="fms" paths="mom6/src/MOM6/config_src/dynamic mom6/src/MOM6/config_src/coupled_driver mom6/src/MOM6/src/*/ mom6/src/MOM6/src/*/*/">
      <description domainName="Ocean" communityName="GFDL-MOM6" communityVersion="$(MOM6_GIT_TAG)" communityGrid="Tripolar"/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/github_mirror">
        <codeBase version="$(MOM6_GIT_TAG)"> NULL </codeBase>
        <csh>
          git clone -b $(MOM6_GIT_TAG) http://gitlab.gfdl.noaa.gov/github_mirror/noaa-gfdl-mom6-examples.git mom6
          pushd mom6
          git checkout $(MOM6_GIT_TAG)  #needed for older git on zeus
          git submodule init src/MOM6  tools/python/MIDAS
          git clone --recursive http://gitlab.gfdl.noaa.gov/github_mirror/noaa-gfdl-mom6.git src/MOM6
          git submodule update #This gets the right version of submodules
          popd

          pushd mom6
          set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
          if ("${platform_domain}" == "zeus.fairmont.rdhpcs.noaa.gov") then
            ln -s /scratch2/portfolios/GFDL/gfdlscr/John.Krasting/pdata/gfdl_O/datasets/ .datasets
          else
            ln -s /lustre/f1/pdata/gfdl_O/datasets/ .datasets
          endif
          popd

          test -e mom6/.datasets
          if ($status != 0) then
            echo ""; echo "" ; echo "   WARNING:  .datasets link in MOM6 examples directory is invalid"; echo ""; echo ""
          endif
        </csh>
      </source>
      <compile>
        <cppDefs><![CDATA[ $(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'" ]]></cppDefs>
        <makeOverrides>OPENMP=""</makeOverrides> <!-- openmp switch for MOM6 may cause crash -->
      </compile>
    </component>

    <component name="coupler" paths="coupler" requires="fms atmos_dyn atmos_phys land_lad2 ice_sis mom6 ">
      <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="dev/awg"> coupler.git </codeBase>
        <csh><![CDATA[
        ( cd coupler && git checkout $(AWG_GIT_TAG) )
        ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS)</cppDefs>
      </compile>
    </component>

  </experiment>

<!--============================-->
<!--= TEMPLATES FOR INPUT DATA =-->
<!--============================-->

  <experiment name="L48_data">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/gas_conc_3D48L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="L32_data">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/gas_conc_3D32L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
<!--
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C96L48_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150120.tar</dataSource>
        <dataSource platform="$(platform)">/lustre/f1/unswept/Larry.Horowitz/awg/IC/awg_C96L48_LM3_OM4_025_grid_lm3p2_19810101.remapped.v20150604.tar</dataSource>
-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Larry.Horowitz/awg/IC/awg_C96L48_LM3_OM4_025_grid_lm3p2_topo_v20151101.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_aero_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c96L32/topo_v20150507/awg_C96L32_LM3_OM4_025_grid_lm3p2_19810101.remapped.topodrag.v20150507.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L63_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awgmiz/ic/awg_C96L63_LM3_OM4_025_grid_lm3p2_v20151026.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <!--dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awgmiz/ic/awg_C96L32_LM3_OM4_025_grid_lm4p1_topo_v20160111.tar</dataSource-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awgmiz/ic/awg_C96L32_LM3_OM4_025_grid_lm3p2_topo_v20151101.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c192L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C192L48_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150302.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c192L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c192L32_newLand20150522/Combine_LM3p2sosn_C192_OM4_025_19810101.remapped.v20150521_With_southshifted.v20150302.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p6">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p6</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p7_faero">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p7_faero</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p7_faero_tke">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p7_faero_tke</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p6_fullchem">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p6_fullchem</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p6_fullchem_2000climo">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p6_fullchem_2000climo</dataSource>
      </dataFile>
    </input>
  </experiment>


  <experiment name="field_table_am4p7_fullchem_nitrate">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p7_fullchem_no3</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="common_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/soil_type.nc" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">${CPERM}/Krista.A.Dunne/mod_input_files/any_grid/soil_type_hwsd_5minute.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--dataSource platform="$(platform)">/lustre/f1/unswept/David.Paynter/sea_esf_CM4_V6_AUG2015.cpio</dataSource-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/David.Paynter/sea_esf_CM4_V5_AUG2015.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/awg/input/lm3/lm3_data_20150322.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/aerosol_inputs.dec2009.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/RCP/cmip5_rcp45.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/tropchem_dec2015.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.1x1.1859_2020.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/1860/emissions.1x1.1860.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/2000/emissions.1x1.2000.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emissions.isoprene.1x1.1859_2020.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.isoprene_no_biogenic.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emissions.isoprene.1x1.1860.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/1860/emissions.isoprene_no_biogenic.1x1.1860.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emissions.isoprene.1x1.2000.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/2000/emissions.isoprene_no_biogenic.1x1.2000.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/anthro_so2.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.simple.so2.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emis_fuel_aircraft.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.aircraft.aero.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/so2_0.25_volcanoes.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/AM4_201503" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/am4_optical_table_20150325.dat</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_faero">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_faero</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_simpleSO4</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_fullaero">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_simpleSO4</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_fullchem">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_fullchemOnly_v20140325</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>


  <experiment name="diag_table_cosp_inp">
    <input>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">   
       <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_cosp_3hrs</dataSource>
     </dataFile>
     </input>
  </experiment>


  <experiment name="diag_table_cosp_all_cosp_diags">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_8day</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_MP</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">   
       <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_cosp_all_diags_3hrs</dataSource>
     </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_modis_all_diags</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_misr_3hrs_all_diags</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_cosp1.4.0_3hrs</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_cosponly_inp">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_cosp</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_modis</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_misr</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_cosponlydiag_inp">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_cosp_2hrs_dt1800</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_modis_2hrs_dt1800</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_misr_2hrs_dt1800</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_orbit_2hrs_dt1800</dataSource>
      </dataFile>
    </input>
  </experiment>



  <experiment name="amip_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--dataSource platform="$(platform)">/lustre/f1/unswept/Chris.Golaz/awg/input/sst/hadisst.186912-201502.tar</dataSource-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Huan.Guo/Hadley_sst/20151007/hadisst.186912-201507.tar</dataSource>
      </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_co2</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="climo_data">
    <input>
      <dataFile label="input" target="INPUT/hadisst_sst.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/sst.climo.1981-2000.data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/hadisst_ice.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/ice.climo.1981-2000.data.nc</dataSource>
      </dataFile>
      <!-- Repeat data_table_amip but not data_table_co2 -->
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awg/newland/19810101.static_veg.southshifted.remapped_to_c96_OM4_025.v20150120.tar</dataSource>-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/fre/tikal/LM3/LM3p2_C96_CM2G_historical_HC1_quick/ncrc2.default-prod/static_veg/19810101.static_veg.lm3p2.remapped_to_c96_OM4_025.v20150322.tar</dataSource>
        <!--dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/fre/tikal/LM3/LM3p2sosn_HWSD5min_C96_OM4_025_historical_HC1_static_veg_out/ncrc2.default-prod/static_veg/19810101.static_veg_LM3p2sosn_HWSD5min_C96_OM4_025.v20150930.tar</dataSource-->
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c96_OM4_025_hydrography_v20140620.tar</dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c96_OM4_025_grid_v20140620.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MIZ_ARCHIVE_ROOT)/awgmiz/mg_drag.nc.tar</dataSource>
      </dataFile>

      <csh><![CDATA[
set domains_stack_size = "2097152"
if ( "$npes" == "216" ) then
  set atmos_npes = "216"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1" 
  set fv_layout    =   "3,12";  set fv_io_layout    =  "1,4"
  set land_layout  =   "3,12";  set land_io_layout  =  "1,4"
  set ocean_layout =   "72,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "72,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "432" ) then
  set atmos_npes = "432"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "3,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "3,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "864" ) then
  set atmos_npes = "432"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "3,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "3,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "1152" ) then
  set atmos_npes = "576"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "4,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "4,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,4";  set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,4";  set ice_io_layout   =  "1,4"
else if ( "$npes" == "1728" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "6,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "2304" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "12,16";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8";  set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8";  set ice_io_layout   =  "1,4"
else if ( "$npes" == "3456" ) then
  set atmos_npes = "1728"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "12,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,12"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,12"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "4608" ) then
# set atmos_npes = "2304"
# set atmos_nthreads = "2"
# set nxblocks = "1" ; set nyblocks = "2"
# set fv_layout    =   "16,24";  set fv_io_layout    =  "1,4"
# set land_layout  =   "16,24";  set land_io_layout  =  "1,4"
# set ocean_layout =   "192,12"; set ocean_io_layout =  "1,4"
# set ice_layout   =   "192,12"; set ice_io_layout   =  "1,4"
  set atmos_npes = "1152"
  set atmos_nthreads = "4"
  set nxblocks = "1" ; set nyblocks = "4"
  set fv_layout    =   "8,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "8,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "96,12"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "96,12"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "6912" ) then
  set atmos_npes = "3456"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "24,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "24,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,24"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,24"; set ice_io_layout   =  "1,4"
else
  if ( $echoOn ) unset echo
  echo "*ERROR*: npes == '$npes' is not supported in xml."
  if ( $echoOn ) set echo
  exit 1
endif

# runCommand:
alias runCommand "aprun -d $atmos_nthreads -n $atmos_npes ./$executable:t"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>

      <csh type="always"><![CDATA[
cd INPUT

# adjustment of dry mass first time only
set adjust_dry_mass = `/ncrc/home1/Larry.Horowitz/bin/adjust_dry_mass.csh`

# create dummy MOM6 parameter file
touch MOM_input
      ]]></csh>
    </input>
  </experiment>

  <experiment name="c192_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/19810101.static_veg.remapped_to_C192_OM4_025_southshifted.v20150302.tar</dataSource-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/DATA/static_veg/static_veg_LM3p2sosn_C192_OM4_025_historical_HC1_1981.remapped.v20150521.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c192_OM4_025_hydrography_v20140708.tar </dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c192_OM4_025_grid_v20140708.tar</dataSource>
      </dataFile>
      <csh><![CDATA[
set domains_stack_size = "3097152"
set do_ocean = "false"
if ( "$npes" == "864" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "6,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"
else if ( "$npes" == "1152" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "8,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "8,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "2304" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "4"
  set fv_layout    =   "8,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "8,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "3456" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "4"
  set nxblocks = "1" ; set nyblocks = "8"
  set fv_layout    =   "6,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"
else if ( "$npes" == "4608" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "4"
  set nxblocks = "1" ; set nyblocks = "4"
  set fv_layout    =   "12,16"; set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16"; set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "6912" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "8"
  set nxblocks = "2" ; set nyblocks = "4"
  set fv_layout    =   "12,12"; set fv_io_layout    =  "1,4"
  set land_layout  =   "12,12"; set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"

else
  if ( $echoOn ) unset echo
  echo "*ERROR*: npes == '$npes' is not supported in xml."
  if ( $echoOn ) set echo
  exit 1
endif

# runCommand:
alias runCommand "aprun -d $atmos_nthreads -n $atmos_npes ./$executable:t"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>

      <csh type="always"><![CDATA[
cd INPUT

# adjustment of dry mass first time only
set adjust_dry_mass = `/ncrc/home1/Larry.Horowitz/bin/adjust_dry_mass.csh`

# create dummy MOM6 parameter file
touch MOM_input
      ]]></csh>
    </input>
  </experiment>

<!--================================-->
<!--= TEMPLATES FOR POSTPROCESSING =-->
<!--================================-->

  <experiment name="c96_amip_postprocess">
    <postProcess>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_data_stager_globalAve.csh"/>
      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
	  <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthTS/*)"/>
	</timeSeries>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c96_climo_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CLIMO_CHUNK)" calcInterval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_CLIMO_START)" source="atmos_month_aer" cubicToLatLon="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_CLIMO_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_CLIMO_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_CLIMO_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
	  <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthTS/*)"/>
	</timeSeries>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_CLIMO_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_CLIMO_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c192_amip_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" cubicToLatLon="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
	  <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthTS/*)"/>
	</timeSeries>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c192_climo_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CLIMO_CHUNK)" calcInterval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_CLIMO_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_CLIMO_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_CLIMO_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_CLIMO_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
	  <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthTS/*)"/>
	</timeSeries>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_CLIMO_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_CLIMO_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->

<!--=+=====================-->
<!--= am4g6 experiments =-->
<!--=+=====================-->
  <experiment name="c96L32_am4g6" inherit="cm4p8_$(AWG_VERSION)">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p6"
communityModelID="am4p6"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->
AM4 prototype configuration "am4g6" from MDT Atmosphere Working Group.
Derived from "am4g5r5".  with the fix of sea salt and dust for aerosol activation 
(in large-scale and UW convection), and update from Ming Zhao.

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g5r5:
- the fix of sea salt and dust for aerosol activation (in large-scale and UW convection) 
- pick the max of 2 plumes in uw_conv.F90 from Ming Zhao
- donner deep updates from Will

For more information about the AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>
<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:30:00"/>
      </production>
      <regression name="debug">
        <run days="2"   npes="432"  runTimePerJob="02:00:00"/>
      </regression>
      <regression name="basic">
        <run days="8"   npes="216"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

<!--=+=====================-->
<!--= am4g7 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g7" inherit="cm4p8_$(AWG_VERSION)">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p7"
communityModelID="am4p7"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->
AM4 prototype configuration "am4g7" from MDT Atmosphere Working Group.
Derived from "am4g6",  with radiation updates from David Paynter, 
coare3.5 ocean roughness from Isaac Held, salinity effect on sea water saturation
specific humidity, mountain gravitiy wave drag, convection, cloud retuning by Ming Zhao.   

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g6:
- radiation updates
- include a new coare3.5 ocean roughness
- include salinity effect on sea water saturation specific humidity
- changes in gravitiy wave drag parameter gmax (gmax=1.0)
- changes in convection and stratform clouds
- changes in convective boundary layer (beta_rad=0.2, convect_shutoff=true)
- fix tiny (10^-20) negative precipitation from UW
- do_liq_num = .true. when using new strat cloud

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>
<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:30:00"/>
      </production>
      <regression name="debug">
        <run days="2"   npes="432"  runTimePerJob="02:00:00"/>
      </regression>
      <regression name="basic">
        <run days="8"   npes="216"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

<!--=+=====================-->
<!--= am4g8 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g8" inherit="c96L32_am4g7">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p8"
communityModelID="am4p8"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->
AM4 prototype configuration "am4g8" from MDT Atmosphere Working Group.
Derived from "am4g7",  with a new topographic drag formulation Steve Garner.

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g7:
- using a new topographic drag formulation

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>
<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->
    <input>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = .false.
        do_cg_drag = .true.
        do_topo_drag = .true.,
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = .true.
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/mg_drag.nc',
      </namelist>
      <namelist name="topo_drag_nml">
        frcrit  = 0.7
        alin    = 0.6
        anonlin = 3.0
        use_mg_scaling = .true.
        do_pbl_average = .true.
        use_mask_for_pbl = .true.
        beta = 0.5
        gamma = 0.4
        epsi = 0.0
        h_frac = 0.1
        zref_fac = 1.0
        no_drag_frac = 0.1
        tboost = 1.5
        pcut = 0.
        samp = 2.
        do_conserve_energy = .true.
      </namelist>
    </input>
  </experiment>

<!--=+=====================-->
<!--= am4h7 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4h7" inherit="cm4p8_$(AWG_VERSION)">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p7"
communityModelID="am4p7"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->
AM4 prototype configuration "am4h7" from MDT Atmosphere Working Group.
Derived from "am4h6". 

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4h6:
- radiation updates
- fix negative precipitation from UW

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>
<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4h7_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4h7_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_faero_tke']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:30:00"/>
      </production>
      <regression name="debug">
        <run days="2"   npes="432"  runTimePerJob="02:00:00"/>
      </regression>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

<!--====================-->
<!--= AMIP-CLIMO EXPERIMENTS =-->
<!--====================-->

<!--=+=====================-->
<!--= am4g6 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g6_2000climo" inherit="cm4p8_$(AWG_VERSION)">
    <description>
Same model as c96L32_am4g6, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="216"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>
  </experiment>

<!--=+=====================-->
<!--= am4g7 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g7_2000climo" inherit="cm4p8_$(AWG_VERSION)">
    <description>
Same model as c96L32_am4g7, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:50:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="216"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>
  </experiment>




<!--=+=====================-->
<!--= am4g8 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g8_2000climo" inherit="c96L32_am4g7_2000climo">
    <description>
Same model as c96L32_am4g8, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>
    <input>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = .false.
        do_cg_drag = .true.
        do_topo_drag = .true.,
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = .true.
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/mg_drag.nc',
      </namelist>
      <namelist name="topo_drag_nml">
        frcrit  = 0.7
        alin    = 0.6
        anonlin = 3.0
        use_mg_scaling = .true.
        do_pbl_average = .true.
        use_mask_for_pbl = .true.
        beta = 0.5
        gamma = 0.4
        epsi = 0.0
        h_frac = 0.1
        zref_fac = 1.0
        no_drag_frac = 0.1
        tboost = 1.5
        pcut = 0.
        samp = 2.
        do_conserve_energy = .true.
      </namelist>
    </input>
  </experiment>

<!--=+=====================-->
<!--= am4h7 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4h7_2000climo" inherit="cm4p8_$(AWG_VERSION)">
    <description>
Same model as c96L32_am4h7, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4h7_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4h7_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_faero_tke']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:30:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>
  </experiment>


<!--=+=====================-->
<!--= fullaero experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g6_fullaero" inherit="cm4p8_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p6"
communityModelID="am4p6"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g6" from MDT Atmosphere Working Group,
but with "full aerosols" as in "am4f4".

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g5r5:
- the fix of sea salt and dust for aerosol activation (in large-scale and UW convection) 
- pick the max of 2 plumes in uw_conv.F90 from Ming Zhao
- donner deep updates from Will

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_amip_fullaero.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p6']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_aero_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="2:30:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L48_am4g6_fullaero" inherit="cm4p8_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p6"
communityModelID="am4p6"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g6" from MDT Atmosphere Working Group,
but with "full aerosols" as in "am4f4" and 48 levels.

- c96 horizontal grid with approximately 100km resolution and 48 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g5r5:
- the fix of sea salt and dust for aerosol activation (in large-scale and UW convection) 
- pick the max of 2 plumes in uw_conv.F90 from Ming Zhao
- donner deep updates from Will

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_amip_fullaero.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p6']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

<!--=+=====================-->
<!--= fullchem experiments =-->
<!--=+=====================-->

  <experiment name="c96L48_am4g6_fullchem" inherit="cm4p8_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p6"
communityModelID="am4p6"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g5r1" from MDT Atmosphere Working Group,
but with "full chemistry" (as in AM3) and 48 levels.

- c96 horizontal grid with approximately 100km resolution and 48 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g5r5:
- the fix of sea salt and dust for aerosol activation (in large-scale and UW convection) 
- pick the max of 2 plumes in uw_conv.F90 from Ming Zhao
- donner deep updates from Will

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g6_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p6_amip_chem.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p6_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:40:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="04:00:00"/>
        <run months="1" npes="864"  runTimePerJob="03:00:00"/>
        <run months="1" npes="1152" runTimePerJob="02:00:00"/>
        <run months="1" npes="1728" runTimePerJob="01:30:00"/>
        <run months="1" npes="2304" runTimePerJob="01:30:00"/>
        <run months="1" npes="3456" runTimePerJob="01:30:00"/>
        <run months="1" npes="4608" runTimePerJob="01:30:00"/>
        <run months="1" npes="6912" runTimePerJob="01:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L48_am4g7_fullchem" inherit="cm4p8_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p7"
communityModelID="am4p7"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g7" from MDT Atmosphere Working Group.
Includes updates from David Paynter for radiaiton and 
from Ming Zhao to improve wind stress and fix negative precipitation from UW convection.   
Adds "full chemistry" (as in AM3) and 48 levels.

- c96 horizontal grid with approximately 100km resolution and 48 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g6:
- radiation updates
- improve wind stress 
- fix negative precipitation from UW
- do_liq_num = .true. when using new strat cloud

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_amip_chem.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p6_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:40:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="04:00:00"/>
        <run months="1" npes="864"  runTimePerJob="03:00:00"/>
        <run months="1" npes="1152" runTimePerJob="02:00:00"/>
        <run months="1" npes="1728" runTimePerJob="01:30:00"/>
        <run months="1" npes="2304" runTimePerJob="01:30:00"/>
        <run months="1" npes="3456" runTimePerJob="01:30:00"/>
        <run months="1" npes="4608" runTimePerJob="01:30:00"/>
        <run months="1" npes="6912" runTimePerJob="01:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L48_am4g7_fullchem_nitrate" inherit="cm4p8_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p7"
communityModelID="am4p7"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g7" from MDT Atmosphere Working Group.
Includes updates from David Paynter for radiaiton and 
from Ming Zhao to improve wind stress and fix negative precipitation from UW convection.   
Adds "full chemistry" (as in AM3, plus nitrate) and 48 levels.

- c96 horizontal grid with approximately 100km resolution and 48 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g6:
- radiation updates
- improve wind stress 
- fix negative precipitation from UW
- do_liq_num = .true. when using new strat cloud

Chemistry changes from am4g7:
- updated dry deposition: new depvel file, exponential loss
- updated NH3 emissions (seasonality)
- step updates for tracer operator splitting
- dynamic BC and OC aging
- active nitrate thermodynamics (ISORROPIA)
- fix interpolator bug

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_physics_test.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_amip_chem_no3.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <dataFile label="input" target="INPUT/emissions.nh3.1x1.1859_2020.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.nh3.1x1.1859_2020_seasonality.nc</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_fullchem_nitrate']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:40:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="04:00:00"/>
        <run months="1" npes="864"  runTimePerJob="03:00:00"/>
        <run months="1" npes="1152" runTimePerJob="02:00:00"/>
        <run months="1" npes="1728" runTimePerJob="01:30:00"/>
        <run months="1" npes="2304" runTimePerJob="01:30:00"/>
        <run months="1" npes="3456" runTimePerJob="01:30:00"/>
        <run months="1" npes="4608" runTimePerJob="01:30:00"/>
        <run months="1" npes="6912" runTimePerJob="01:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L48_am4g8_fullchem" inherit="c96L48_am4g7_fullchem">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p8"
communityModelID="am4p8"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->
AM4 prototype configuration "am4g8" from MDT Atmosphere Working Group.
Derived from "am4g7",  with a new topographic drag formulation Steve Garner.
Adds "full chemistry" (as in AM3) and 48 levels.

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g7:
- using a new topographic drag formulation

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>
<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->
    <input>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = .false.
        do_cg_drag = .true.
        do_topo_drag = .true.,
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = .true.
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/mg_drag.nc',
      </namelist>
      <namelist name="topo_drag_nml">
        frcrit  = 0.7
        alin    = 0.6
        anonlin = 3.0
        use_mg_scaling = .true.
        do_pbl_average = .true.
        use_mask_for_pbl = .true.
        beta = 0.5
        gamma = 0.4
        epsi = 0.0
        h_frac = 0.1
        zref_fac = 1.0
        no_drag_frac = 0.1
        tboost = 1.5
        pcut = 10.e2
        samp = 2.
        do_conserve_energy = .true.
      </namelist>
    </input>
  </experiment>

  <experiment name="c96L48_am4g8_fullchem_nitrate" inherit="c96L48_am4g7_fullchem_nitrate">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p8"
communityModelID="am4p8"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->
AM4 prototype configuration "am4g8" from MDT Atmosphere Working Group.
Derived from "am4g7",  with a new topographic drag formulation Steve Garner.
Adds "full chemistry" (as in AM3, plus nitrate) and 48 levels.

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g7:
- using a new topographic drag formulation

Chemistry changes from am4g7:
- updated dry deposition: new depvel file, exponential loss
- updated NH3 emissions (seasonality)
- step updates for tracer operator splitting
- dynamic BC and OC aging
- active nitrate thermodynamics (ISORROPIA)
- fix interpolator bug

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>
<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->
    <input>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = .false.
        do_cg_drag = .true.
        do_topo_drag = .true.,
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = .true.
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/mg_drag.nc',
      </namelist>
      <namelist name="topo_drag_nml">
        frcrit  = 0.7
        alin    = 0.6
        anonlin = 3.0
        use_mg_scaling = .true.
        do_pbl_average = .true.
        use_mask_for_pbl = .true.
        beta = 0.5
        gamma = 0.4
        epsi = 0.0
        h_frac = 0.1
        zref_fac = 1.0
        no_drag_frac = 0.1
        tboost = 1.5
        pcut = 10.e2
        samp = 2.
        do_conserve_energy = .true.
      </namelist>
    </input>
  </experiment>


<!--=+=====================-->
<!--= climate change experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g7_1860climo" inherit="c96L32_am4g7_2000climo">
    <description>
Same model as c96L32_am4g7_2000climo, but
configuration with present-day climatological SSTs, but pre-industrial GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_1860climo.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g7_2000aero" inherit="c96L32_am4g7_2000climo">
    <description>
Same model as c96L32_am4g7_2000climo, but
configuration with present-day climatological SSTs, pre-industrial GHGs and present-day aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_2000aero.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g7r3_2000climo_p2K" inherit="c96L32_am4g7_2000climo_p2K"/>
  <experiment name="c96L32_am4g7_2000climo_p2K" inherit="c96L32_am4g7_2000climo">
    <input>
     <namelist name="ice_spec_nml">
      mcm_ice = .false.
      do_leads = .false.
      minimum_ice_concentration = 0.5
      minimum_ice_thickness = 0.1
      sst_degk = .true.
      sst_pert = 2.0
     </namelist>
    </input>
  </experiment>

  <experiment name="c96L32_am4h7_1860climo" inherit="c96L32_am4h7_2000climo">
    <description>
Same model as c96L32_am4h7_2000climo, but
configuration with present-day climatological SSTs, but pre-industrial GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_1860climo.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4h7_2000aero" inherit="c96L32_am4h7_2000climo">
    <description>
Same model as c96L32_am4h7_2000climo, but
configuration with present-day climatological SSTs, pre-industrial GHGs and present-day aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_2000aero.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4h7_2000climo_p2K" inherit="c96L32_am4h7_2000climo">
    <description>
Same model as c96L32_am4h7_2000climo, but
configuration with present-day climatological SSTs + 2K, present-day GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_2000climo_p2K.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g7r3" inherit="c96L32_am4g7"/>
  <experiment name="c96L32_am4g7r3_2000climo" inherit="c96L32_am4g7_2000climo"/>
  <experiment name="c96L32_am4g8r3_2000climo" inherit="c96L32_am4g8_2000climo"/>
  <experiment name="c96L32_am4g8r3" inherit="c96L32_am4g8"/>

<!--=+=====================-->
<!--= Other experiments varying radiation time-step and vertical levels =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g7_2000climo_rad1h_1" inherit="c96L32_am4g7_2000climo">
    <input>
      <namelist name="radiation_driver_nml">
        rad_time_step= 3600,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
      </namelist>
    </input>
  </experiment>

  <experiment name="c96L32_am4g7_2000climo_rad1h_2" inherit="c96L32_am4g7_2000climo">
    <input>
      <namelist name="radiation_driver_nml">
        rad_time_step= 3600,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
      </namelist>
    </input>
  </experiment>

 <experiment name="c96L63_am4g7_2000climo" inherit="c96L32_am4g7_2000climo">
  <input>
    <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awgmiz/ic/awg_C96L63_LM3_OM4_025_grid_lm3p2_v20151026.tar</dataSource>
    </dataFile>
    <namelist name="fv_core_nml">
        layout   = $fv_layout
        io_layout = $fv_io_layout
        npx      = 97,
        npy      = 97,
        ntiles   = 6,
	npz      = 63,
        k_split  = 1,
        n_split  = 14,
        a2b_ord  = 4,
        hord_dp = -8,
        hord_tr = -8,
        adjust_dry_mass = $adjust_dry_mass,
        consv_te = 0.7,
        fill = .true.
        print_freq = 0,
        grid_type = 0,
        nord = 2,
        dddmp = 0.0,
        d2_bg = 0.0,
        d4_bg = 0.15,
        tau = 0.      
        z_tracer=.false.
    </namelist>
    <namelist name="damping_driver_nml">
      trayfric = 0.,
      nlev_rayfric = 1,
      do_mg_drag = .true.,
      do_cg_drag = .true.,
      do_topo_drag = .false.,
      do_conserve_energy = .true.,
      kstart= 0
    </namelist>
    <namelist name="mg_drag_nml">
        gmax  = 1.0,
        acoef = 1.,
        do_conserve_energy = .true.,
        flux_cut_level = 30.e2,
        source_of_sgsmtn = 'input/computed'
    </namelist>
    <namelist name="cg_drag_nml">
      cg_drag_freq = 1800,
      cg_drag_offset = 0,
      Bt_0 =  0.004 ,
      Bt_aug= 0.000,
      Bt_nh=  0.001,
      Bt_sh= -0.001,
      Bt_eq=  0.000,
      Bt_eq_width= 4.0,
      phi0n =  30.,
      phi0s = -30.,
      dphin =  5.0,
      dphis = -5.0
    </namelist>
      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 8.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 1.e-6,
        eros_choice = .true.,
        eros_scale_c = 5.e-5,
        eros_scale_t = 3.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 0.8
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>
      <namelist name="uw_plume_nml">
        auto_th0 = 0.5e-3,
        tcrit    = -25.15,
        peff_l   = 8.0e-5
        peff_i   = 18.e-5
        rmaxfrac = 0.15
        frac_drs = 0.0
        rpen     = 5.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3 
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 2
        mp_choice = 2
        do_pevap = .true.
        cfrac    = 0.15
        hcevap   = 0.9
        pblfac   = 0.25
      </namelist>
      <namelist name="deep_conv_nml">
        auto_th0_d = 0.5e-3
        tcrit_d    = -25.15,
        peff_l_d   = 8.0e-5
        peff_i_d   = 18.e-5
        rkm_dp1 = 2.
        rkm_dp2 = 0.1
        cwfn_th = 10.
        tau_dp = 28800.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 5.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.9
        pblfac_d   = 0.25
        frac_limit_d = 0.25
        dcwfndm_th = 100
        lofactor_d = 0.5
        do_cgust_dp  = .true.
        cgust_choice = 3
      </namelist>
  </input>
    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="2:30:00"/>
      </production>
    </runtime>
 </experiment>

  <experiment name="c96L32_am4g7_2000climo_newland_retune1" inherit="cm4p8_$(AWG_VERSION)">
    <description>
Same model as c96L32_am4g7, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common_newland.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <namelist name="esfsw_parameters_nml">
        sw_code_version = 'esf2015'
        sw_int_points = 66
        sw_diff_streams = 1
        sw_NIRVISgas_bands = 11
      </namelist>
      <namelist name="cloud_generator_nml">
        do_inhomogeneous_clouds = .true.
        defaultOverlap = 4
        overlapLengthScale = 2.
      </namelist>
      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 8.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 1.e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 3.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 0.9
        U_evap_snow = 0.8
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="00:40:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="216"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>
  </experiment>



  <experiment name="c96L32_am4g7_newland_retune1" inherit="cm4p8_$(AWG_VERSION)">
    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common_newland.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <namelist name="esfsw_parameters_nml">
        sw_code_version = 'esf2015'
        sw_int_points = 66
        sw_diff_streams = 1
        sw_NIRVISgas_bands = 11
      </namelist>
      <namelist name="cloud_generator_nml">
        do_inhomogeneous_clouds = .true.
        defaultOverlap = 4
        overlapLengthScale = 2.
      </namelist>
      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 8.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 1.e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 3.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 0.9
        U_evap_snow = 0.8
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="00:40:00"/>
      </production>
      <regression name="debug">
        <run days="2"   npes="432"  runTimePerJob="02:00:00"/>
      </regression>
      <regression name="basic">
        <run days="8"   npes="216"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>


  <experiment name="c96L32_am4g7_newland_retune1_cosp" inherit="c96L32_am4g7_newland_retune1">
    <input>

      <namelist name="cloudrad_diagnostics_nml">
      do_isccp = .false.
      isccp_scale_factor = 1.00
      water_ice_ratio = 10.
      </namelist>
      <namelist name="physics_driver_nml">
         donner_meso_is_largescale = .true.
         do_cosp = .true.
         allow_cosp_precip_wo_clouds = .true.
         do_modis_yim = .true.
      </namelist>
      <namelist name="cosp_diagnostics_nml">
   generate_orbital_output = .false.
   orbital_filename = 'INPUT/cloudsat_orbit_08921_14250.nc'
   sat_begin_time = 2008, 1, 1, 0, 0, 0
   sat_period = 10800
   num_sat_periods = 2929
      </namelist>

      <namelist name="COSP_INPUT">
   use_rh_wrt_liq = .true.
   use_input_file = .false.
   produce_cmor_output_fields = .false.
   CMOR_NL='INPUT/cosp_cmor_nl.txt', ! CMOR namelist
   NPOINTS_IT = 20000
   OVERLAP=3,   !  overlap type: 1=max, 2=rand, 3=max/rand
   ISCCP_TOPHEIGHT=1,  !  1 = adjust top height using both a computed
                       !  infrared brightness temperature and the visible
                       !  optical depth to adjust cloud top pressure. Note
                       !  that this calculation is most appropriate to compare
                     !  to ISCCP data during sunlit hours.
                     !  2 = do not adjust top height, that is cloud top
                     !  pressure is the actual cloud top pressure
                     !  in the model
                    !  3 = adjust top height using only the computed
                       !  infrared brightness temperature. Note that this
                       !  calculation is most appropriate to compare to ISCCP
                       !  IR only algortihm (i.e. you can compare to nighttime
                       !  ISCCP data with this option)
  ISCCP_TOPHEIGHT_DIRECTION=2,   ! direction for finding atmosphere pressure level
                                 ! with interpolated temperature equal to the radiance
                                 ! determined cloud-top temperature
                                 ! 1 = find the *lowest* altitude (highest pressure) level
                                 ! with interpolated temperature equal to the radiance
                                 ! determined cloud-top temperature
                                 ! 2 = find the *highest* altitude (lowest pressure) level
                                 ! with interpolated temperature equal to the radiance
                                 ! determined cloud-top temperature
                                 ! ONLY APPLICABLE IF top_height EQUALS 1 or 3
                                 ! 1 = default setting, and matches all versions of
                                 ! ISCCP simulator with versions numbers 3.5.1 and lower
                                 ! 2 = experimental setting
! USE_VGRID=.false., ! Use fixed vertical grid for outputs? (if .true. then you need to define number of levels with Nlr)
  USE_VGRID=.true., ! Use fixed vertical grid for outputs? (if .true. then you need to define number of levels with Nlr)
  NLR=40,       ! Number of levels in statistical outputs (only used if USE_VGRID=.true.)
   CSAT_VGRID=.true., ! CloudSat vertical? (if .true. then the CloudSat standard grid is used for the outputs.
! CSAT_VGRID=.false., ! CloudSat vertical? (if .true. then the CloudSat standard grid is used for the outputs.
                     !  USE_VGRID needs also be .true.)
!  NHYDRO=8,   ! Number of hydrometeors
! FINPUT='cosp_input_um.nc', ! NetCDF file with 1D inputs
  FINPUT='cosp_input_um_2d.nc', ! NetCDF file with 2D inputs
  ! Some inputs related to radar simulations
  RADAR_FREQ=94.0, ! CloudSat radar frequency (GHz)
  SURFACE_RADAR=0, ! surface=1, spaceborne=0
! SURFACE_RADAR=1, ! surface=1, spaceborne=0
  use_mie_tables=0,! use a precomputed lookup table? yes=1,no=0
  use_gas_abs=1,   ! include gaseous absorption? yes=1,no=0
  do_ray=0,        ! calculate/output Rayleigh refl=1, not=0
  melt_lay=0,      ! melting layer model off=0, on=1
  k2=-1,           ! |K|^2, -1=use frequency dependent default
  use_reff=.true., ! True if you want effective radius to be used by radar simulator (always used by lidar)
  use_precipitation_fluxes=.true.,  ! True if precipitation fluxes are input to the algorithm
  ! Some inputs related to lidar simulations
  Nprmts_max_hydro=12, ! Max number of parameters for hydrometeor size distributions
  Naero=1,             ! Number of aerosol species (Not used)
  Nprmts_max_aero=1,   ! Max number of parameters for aerosol size distributions (Not used)
  lidar_ice_type=0     ! Ice particle shape in lidar calculations (0=ice-spheres ; 1=ice-non-spherical)

 !--------------------------------------------------------------------- -------------
 !-------------- RTTOV inputs
 !--------------------------------------------------------------------- -------------
  Platform=1,    ! satellite platform
  Satellite=15,  ! satellite
  Instrument=0,  ! instrument
  Nchannels=8,   ! Number of channels to be computed
  Channels=1,3,5,6,8,10,11,13,        ! Channel numbers (please be sure that you supply Nchannels)
  Surfem=0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,  ! Surface emissivity (please be sure that you supply Nchannels)
  ZenAng=50.0, ! Satellite Zenith Angle
  CO2=5.241e-04, ! Mixing ratios of trace gases
  CH4=9.139e-07,
  N2O=4.665e-07,
  CO=2.098e-07
      </namelist>

      <namelist name="COSP_OUTPUT">
! Simulator flags
  Lradar_sim=.true.,
  Llidar_sim=.true.,
  Lisccp_sim=.true.,
  Lmodis_sim=.true.,
  Lmisr_sim=.true.
  Lrttov_sim=.false.
! Output variables
  Lalbisccp=.true.,
  Latb532=.true.,
  Lboxptopisccp=.true.,
  Lboxtauisccp=.true.,
  Lcfaddbze94=.true.,
  LcfadLidarsr532=.true.,
  Lclcalipso=.true.,
  Lclhcalipso=.true.,
  Lclisccp=.true.,
  Lcllcalipso=.true.,
  Lclmcalipso=.true.,
  Lcltcalipso=.true.,
  Lpctisccp=.true.,
  Ldbze94=.true.,
  Ltauisccp=.true.,
  Lcltisccp=.true.,
  Ltoffset  = .true.
  LparasolRefl=.true.,
  LclMISR=.true.
  Lmeantbisccp=.true.
  Lmeantbclrisccp=.true.
! Use lidar and radar
  Lclcalipso2=.true.,
  Lcltlidarradar=.true.,
! These aere provided for debugging or special purposes
  Lfracout=.true.
  LlidarBetaMol532=.true.
!MODIS
  Lcltmodis=.true.
  Lclwmodis=.true.
  Lclimodis=.true.
  Lclhmodis=.true.
  Lclmmodis=.true.
  Lcllmodis=.true.
  Ltautmodis=.true.
  Ltauwmodis=.true.
  Ltauimodis=.true.
  Ltautlogmodis=.true.
  Ltauwlogmodis=.true.
  Ltauilogmodis=.true.
  Lreffclwmodis=.true.
  Lreffclimodis=.true.
  Lpctmodis=.true.
  Llwpmodis=.true.
  Liwpmodis=.true.
  Lclmodis=.true.
!RTTOV
  Ltbrttov=.false.
      </namelist>

      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>

      <xi:include xpointer="xpointer(//experiment[@name='diag_table_cosp_inp']/input/node())"/>

    </input>
  </experiment>



  <experiment name="c96L48_am4g7_fullchem_2000climo_t1" inherit="c96L48_am4g7_fullchem_2000climo">
    <input>
     <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 8.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 2.e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 3.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 0.8
        U_evap_snow = 0.8
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
     </namelist>
    </input>
  </experiment>

  <experiment name="c96L48_am4g7_fullchem_2000climo_t2" inherit="c96L48_am4g7_fullchem_2000climo">
    <input>
     <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 8.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 5.e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 3.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 0.8
        U_evap_snow = 0.8
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
     </namelist>
    </input>
  </experiment>

  <experiment name="c96L48_am4g7_fullchem_2000climo_t3" inherit="c96L48_am4g7_fullchem_2000climo">
    <input>
     <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 8.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 6.e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 3.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 0.8
        U_evap_snow = 0.8
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
     </namelist>
    </input>
  </experiment>





  <experiment name="c96L48_am4g7_fullchem_2000climo" inherit="cm4p8_$(AWG_VERSION)">
    <description>
Same model as c96L48_am4g7_fullchem_nitrate, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_chem_2000climo.nml"/>

      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
     </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p6_fullchem_2000climo']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="01:20:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:40:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="04:00:00"/>
        <run months="1" npes="864"  runTimePerJob="03:00:00"/>
        <run months="1" npes="1152" runTimePerJob="02:00:00"/>
        <run months="1" npes="1728" runTimePerJob="01:30:00"/>
        <run months="1" npes="2304" runTimePerJob="01:30:00"/>
        <run months="1" npes="3456" runTimePerJob="01:30:00"/>
        <run months="1" npes="4608" runTimePerJob="01:30:00"/>
        <run months="1" npes="6912" runTimePerJob="01:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>
  </experiment>





  <experiment name="c96L48_am4g7_fullchem_nitrate_2000climo" inherit="cm4p8_$(AWG_VERSION)">
    <description>
Same model as c96L48_am4g7_fullchem_nitrate, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_physics_test.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g7_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p7_chem_no3_2000climo.nml"/>

      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
     </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <dataFile label="input" target="INPUT/emissions.nh3.1x1.1859_2020.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.nh3.1x1.1859_2020_seasonality.nc</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p7_fullchem_nitrate']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="01:20:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:40:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="04:00:00"/>
        <run months="1" npes="864"  runTimePerJob="03:00:00"/>
        <run months="1" npes="1152" runTimePerJob="02:00:00"/>
        <run months="1" npes="1728" runTimePerJob="01:30:00"/>
        <run months="1" npes="2304" runTimePerJob="01:30:00"/>
        <run months="1" npes="3456" runTimePerJob="01:30:00"/>
        <run months="1" npes="4608" runTimePerJob="01:30:00"/>
        <run months="1" npes="6912" runTimePerJob="01:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>
  </experiment>


</experimentSuite>

