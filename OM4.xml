<?xml version="1.0"?>
<!-- FRE Usage documentation: http://www.gfdl.noaa.gov/fms/fre -->
<!-- $Id: OM4.xml,v 1.1.2.12.2.6.2.3 2014/05/23 19:37:49 Niki.Zadeh Exp $ -->

<!--
Quick start guide

module load fre/bronx-12
fremake -x OM4.xml -p ncrc4.intel16 -t prod MOM6_SIS2_compile
frerun  -x OM4.xml -p ncrc4.intel16 -t prod OM4_SIS2_baseline -r basic 

-->

<experimentSuite rtsVersion="4" xmlns:xi="http://www.w3.org/2001/XInclude">
  <property name="RELEASE"        value="warsaw_201710"/>           <!-- git tag for general component source code-->
  <property name="SHARED_GIT_TAG" value="$(RELEASE)"/>              <!-- git tag for shared source code -->
  <property name="MOM6_DATE"      value="20171219"/>              <!-- git tag date for MOM6 source code -->
  <property name="MOM6_GIT_TAG"   value="om4/v1.0.4"/>              <!-- git tag for MOM6 source code -->
  <property name="OCEAN_SHARED_GIT_TAG" value="$(RELEASE)"/> <!--value="dev/esm4/20171106"/--> <!-- git tag for ocean_shared source code -->
  <property name="FRE_STEM"       value="dev_master_20180212_mom6_20180212"/> <!-- customize as needed -->
  <!--property name="FRE_STEM"       value="$(RELEASE)_mom6_$(MOM6_DATE)"/--> <!-- customize as needed -->
  <!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
  <property name="GFDL_GROUP"     value="gfdl_f"/><!-- Replace YOURGROUPLETTER with GFDL group letter -->

   <property name="OM4_ANALYSIS" value="ice_ocean_SIS2/OM4_025"/>  <!--example containing .frepp scripts for analysis-->

   <!--Production run properties. Users can modify these according to their need and/or performance analysis-->
   <property name="PROD_SIMTIME"   value="200"/>
   <!--Post-processing  chunk lengths -->
   <property name="CHUNK_LENGTH_A" value="5yr"/>
   <property name="CHUNK_LENGTH_B" value="20yr"/>
   <!--Start year of PP -->
   <property name="PP_START_YEAR"  value="1948"/>      <!--Use these values for CORE2 dynamic forcing runs -->
   <property name="FRE_VERSION"     value="bronx-12"/> <!-- fre version to be used -->
   <property name="ProjectID"       value="MDT"/>      <!-- database top level -->
   <property name="ANALYSIS_SWITCH" value="on"/>       <!-- on/off switch for ATM/LND analysis -->
   <property name="MDBIswitch"      value="on"/>       <!-- on/off switch for MDBI database -->
   <!--The following properties need to be set only if the user wants to monitor the run progress at MDBI
             and are not needed for the run or post-processing -->
   <property name="EXP_CPLD_START"   value="1948"/> <!--simulation start year-->
   <property name="EXP_CPLD_END"     value="2147"/> <!--simulation end   year-->


   <!--Users need not change the following properties -->
   <property name="reference_tag"  value="warsaw_201710_mom6_2017.10.19_answers"/> <!-- Reference release tag for existing files in the archives for answer comparison. Used in "REFERENCE" property. -->

   <!-- The following properties are for testing/debugging purposes and should normally be empty-->
   <property name="MODIFIER"     value=""/>  
   <property name="DEBUGLEVEL"   value="_chksums2_pr59"/>
   <property name="STATIC"       value=""/>  


  <property name="PLATINFO"   value=""/>  <!--This is necessary only if you want to run exact same experiment on multiple platforms-->
  <property name="AWG_INPUT_HOME_GAEA"  value="awg_include"/>
  <property name="AWG_INPUT_HOME_NESCC" value="awg_include"/>
  <property name="AWG_INPUT_HOME_GFDL"  value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)/mdt_xml/awg_include"/>
  <property name="MIZ_ARCHIVE_ROOT_GAEA" value="$CPERM/Ming.Zhao/archive/mdt"/>
  <property name="MIZ_ARCHIVE_ROOT_GFDL" value="/archive/miz/mdt/"/>
    
  <setup>
    <xi:include href="awg_include/xml_building_blocks/platforms.xml" xpointer="xpointer(//freInclude/platform[@name='ncrc4.intel16'])"/>
    <xi:include href="awg_include/xml_building_blocks/platforms.xml" xpointer="xpointer(//freInclude/platform[@name='gfdl.ncrc4-intel16'])"/>
  </setup>

      <property name="OM4_033_ARCHIVE"   value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_033_20151028"/>
   
<!--= COMPILE =-->
<!--===========-->
  <!--The property MOM6_EXAMPLES should point to the mom6 directory that is checked out. It is needed by MOM6 to access its input data files-->
   <property name="PROG_MAIN"   value="coupler/coupler_main.o"/>
   <property name="LIBS_ROOT"   value="MOM6_SIS2_compile"/>
   <property name="FMS_LIB_DIR" value="./$(LIBS_ROOT)/$(platform)-$(target)/exec"/>
   
   <property name="MOM6_EXAMPLES"  value="$root/$(LIBS_ROOT)/src/mom6"/>
   <property name="MY_LIBS"        value="$(EXEC_ROOT)/$(FMS_LIB_DIR)"/>

   <experiment name="MOM6_SIS2_compile">
      <description>
Make the executable for ocean-ice experiments.
      </description>
      <component name="fms" paths="shared" includeDir="$root/$(LIBS_ROOT)/src/shared/include">
         <description domainName="infrastructure" communityName="FMS" communityVersion="$(RELEASE)" communityGrid="NA"/>
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> shared.git </codeBase>
      	    <csh><![CDATA[
              ( cd shared && git checkout $(SHARED_GIT_TAG) )
              ]]>
            </csh>
         </source>
         <compile>
            <cppDefs>-Duse_libMPI -Duse_netCDF $(F2003_FLAGS) -DMAXFIELDMETHODS_=400</cppDefs>
         </compile>
      </component>

    <component name="mom6" requires="fms" paths="mom6/src/MOM6/config_src/dynamic mom6/src/MOM6/config_src/coupled_driver mom6/src/MOM6/src/*/ mom6/src/MOM6/src/*/*/ ocean_shared/generic_tracers ocean_shared/mocsy/src">
      <description domainName="Ocean" communityName="GFDL-MOM6" communityVersion="$(MOM6_GIT_TAG)" communityGrid="Tripolar"/>
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(OCEAN_SHARED_GIT_TAG)"> ocean_shared.git </codeBase>
        <csh><![CDATA[
          git clone -b $(MOM6_GIT_TAG) https://github.com/NOAA-GFDL/MOM6-examples.git mom6
          pushd mom6
          git checkout $(MOM6_GIT_TAG)  #needed for older git on zeus
          git submodule init src/MOM6 src/SIS2 src/icebergs tools/python/MIDAS
          git clone --recursive https://github.com/NOAA-GFDL/MOM6.git src/MOM6 
          git clone             https://github.com/NOAA-GFDL/SIS2.git src/SIS2
          git clone             https://github.com/NOAA-GFDL/icebergs.git src/icebergs
          git submodule update #This gets the right version of submodules
          popd

          pushd mom6
          set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
          if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
            ln -s /scratch4/GFDL/gfdlscr/pdata/gfdl_O/datasets/ .datasets
          else if ("${platform_domain}" =~ *"ccs.ornl.gov"* ) then
            ln -s /lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/ .datasets
          else
            ln -s /lustre/f1/pdata/gfdl_O/datasets/ .datasets
          endif
          popd	  

          test -e mom6/.datasets
          if ($status != 0) then
            echo ""; echo "" ; echo "   WARNING:  .datasets link in MOM6 examples directory is invalid"; echo ""; echo ""
          endif
 
        ]]></csh>
      </source>
      <compile>
        <cppDefs><![CDATA[ $(F2003_FLAGS) -DMAX_FIELDS_=100 -DNOT_SET_AFFINITY -D_USE_MOM6_DIAG -D_USE_GENERIC_TRACER  -DUSE_PRECISION=2 -D_FILE_VERSION="'"`git-version-string $<`"'" ]]></cppDefs>
        <makeOverrides>OPENMP=""</makeOverrides> <!-- openmp switch for MOM6 may cause crash -->
      </compile>
    </component>
      
      <component name="icebergs" paths="mom6/src/icebergs" requires="fms">
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master"> ocean_null.git </codeBase>
        <csh>\rm -rf ocean_null</csh>
       </source>
       <compile>
            <cppDefs><![CDATA[-D_FILE_VERSION="'"`git-version-string $<`"'"]]> </cppDefs>
       </compile>
       <description domainName="N/A" communityName="N/A" communityVersion="$(RELEASE)" communityGrid="N/A"/>
      </component>


      <component name="sis2" paths="mom6/src/SIS2 ice_param" requires="fms mom6 icebergs" includeDir="$root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/framework" > 
         <description domainName="Sea Ice SIS2" communityName="GFDL-SIS2" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
	   <codeBase version="$(RELEASE)"> ice_param.git </codeBase> 
         </source>
         <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
<!--            <makeOverrides>OPENMP=""</makeOverrides> openmp switch for MOM6 may cause crash -->
         </compile>
      </component>

      <component name="land_null" paths="land_null" requires="fms">
         <description domainName="NA" communityName="NA" communityVersion="NA" communityGrid="NA"/>
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> land_null.git </codeBase>
         </source>
      </component>

      <component name="atmos_null" paths="atmos_null atmos_param/monin_obukhov atmos_param/diag_integral" requires="fms">
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
           <codeBase version="$(RELEASE)"> atmos_null.git atmos_param.git </codeBase>
         </source>
         <compile>
            <cppDefs>$(F2003_FLAGS) </cppDefs>
        </compile>
      </component>
      <component name="coupler" paths="coupler" requires="fms land_null atmos_null sis2 mom6 icebergs">
         <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid="NA"/> 
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> coupler.git </codeBase>
         </source>
         <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -D_USE_LEGACY_LAND_ -Duse_AM3_physics -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>
   </experiment>

   <experiment name="MOM6_SIS2_compile_symmetric" inherit="MOM6_SIS2_compile">
      <component paths="shared" name="fms" includeDir="$root/$(LIBS_ROOT)/src/shared/include">
         <library path="$(MY_LIBS)/fms/libfms.a" headerDir="$(MY_LIBS)/fms"/>
      </component>
      <component name="land_null" paths="land_null" requires="fms">
         <library path="$(MY_LIBS)/land_null/libland_null.a" headerDir="$(MY_LIBS)/land_null"/>
      </component>
      <component name="atmos_null" paths="atmos_null atmos_param" requires="fms">
          <library path="$(MY_LIBS)/atmos_null/libatmos_null.a" headerDir="$(MY_LIBS)/atmos_null"/>
      </component>
      <component paths="icebergs" requires="fms" name="icebergs">
         <library path="$(MY_LIBS)/icebergs/libicebergs.a" headerDir="$(MY_LIBS)/icebergs"/>
      </component> 
      <component paths="sis2" requires="fms icebergs" name="sis2">
         <library path="$(MY_LIBS)/sis2/libsis2.a" headerDir="$(MY_LIBS)/sis2"/>
      </component>
      <component name="mom6_symmetric" requires="fms" paths="$root/$(LIBS_ROOT)/src/mom6/src/MOM6/config_src/dynamic_symmetric $root/$(LIBS_ROOT)/src/mom6/src/MOM6/config_src/coupled_driver $root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/*/ $root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/*/*/ $root/$(LIBS_ROOT)/src/ocean_shared/generic_tracers $root/$(LIBS_ROOT)/src/ocean_shared/mocsy/src">
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> ocean_null.git </codeBase>
        <csh><![CDATA[
          \rm -rf ocean_null
          echo "No need to checkout any new source code for this component!" 
        ]]></csh>
         </source>
         <compile>
            <cppDefs><![CDATA[ $(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>

      <component name="coupler" paths="coupler" requires="fms land_null atmos_null sis2 mom6_symmetric icebergs">
         <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid="NA"/> 
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> coupler.git </codeBase>
         </source>
         <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -D_USE_LEGACY_LAND_ -Duse_AM3_physics -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>
   </experiment>
   <experiment name="MOM6_SIS2_compile_static_90x45" inherit="MOM6_SIS2_compile">
      <component paths="shared" name="fms" includeDir="$root/$(LIBS_ROOT)/src/shared/include">
         <library path="$(MY_LIBS)/fms/libfms.a" headerDir="$(MY_LIBS)/fms"/>
      </component>
      <component name="land_null" paths="land_null" requires="fms">
         <library path="$(MY_LIBS)/land_null/libland_null.a" headerDir="$(MY_LIBS)/land_null"/>
      </component>
      <component name="atmos_null" paths="atmos_null atmos_param" requires="fms">
          <library path="$(MY_LIBS)/atmos_null/libatmos_null.a" headerDir="$(MY_LIBS)/atmos_null"/>
      </component>
      <component paths="ocean_shared" requires="fms" name="ocean_shared">
         <library path="$(MY_LIBS)/ocean_shared/libocean_shared.a" headerDir="$(MY_LIBS)/ocean_shared"/>
      </component> 
      <component paths="icebergs" requires="fms" name="icebergs">
         <library path="$(MY_LIBS)/icebergs/libicebergs.a" headerDir="$(MY_LIBS)/icebergs"/>
      </component> 
      <component paths="sis2" requires="fms icebergs" name="sis2">
         <library path="$(MY_LIBS)/sis2/libsis2.a" headerDir="$(MY_LIBS)/sis2"/>
      </component>
      <component name="mom6_static_90x45" requires="fms ocean_shared" paths="$root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory_90x45.h $root/$(LIBS_ROOT)/src/mom6/src/MOM6/config_src/coupled_driver $root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/*/ $root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/*/*/">
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> ocean_null.git </codeBase>
        <csh><![CDATA[
          \rm -rf ocean_null
          echo "No need to checkout any new source code for this component!" 
          /bin/cp  $root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory.h $root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory_90x45.h 
          /bin/sed "s/NIPROC_ 32/NIPROC_ 90/g" -i $root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory_90x45.h 
          /bin/sed "s/NJPROC_ 18/NJPROC_ 45/g" -i $root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory_90x45.h 
        ]]></csh>
         </source>
         <compile>
            <cppDefs><![CDATA[ $(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>

      
      <component name="coupler" paths="coupler" requires="fms land_null atmos_null sis2 mom6_static_90x45 ocean_shared icebergs">
         <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid="NA"/> 
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> coupler.git </codeBase>
         </source>
         <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -Duse_AM3_physics -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>
   </experiment>
    
   <freInclude name="OM4_common">
    <input>
     <csh type="always">
        <![CDATA[
#------------------------------------------
## Find out whether to restart.

if ( $currentSeg == 1 ) then
   set restart_flag = 'n'
else
   set restart_flag = 'r'
   #Because of a technical issue FRE does not delete old uncombined restarts before copying the new ones for the next segment
   #The INPUT/ ends up with inconsistent restart files which at best cause the model to crash right away.
   if(-e $work/INPUT/MOM.res.nc.0000 ) \rm -rf $work/INPUT/MOM.res*.nc
endif

ln -s $work/INPUT/ocean_topog.nc $work/INPUT/topog.nc 

touch $work/INPUT/MOM_override
touch $work/INPUT/SIS_override
touch $work/INPUT/MOM_layout
touch $work/INPUT/SIS_layout

# Record the job stdout location for later use timings database
cat >> $HOME/frejobs_stdout <<EOF_frejobs
$stdoutDir/$FRE_JOBID
EOF_frejobs

#Handle hyperthreaded cases
set ocean_nthreads = $ocn_threads
set use_hyper_thread = ".F."
set use_hyper_thread = `awk '/use_hyper_thread/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`

if ( $use_hyper_thread == ".T." || $use_hyper_thread == ".true." ) then
   @ ocean_nthreads *= 2
   alias runCommand /usr/bin/time -p `which aprun` -n $ocn_ranks -j2 -d $ocean_nthreads ./$executable:t
endif

set ocn_hyperthread = $use_hyper_thread


cat > $work/INPUT/MOM_layout << MOM_LAYOUT_EOF
#override IO_LAYOUT = $ocn_io_layout
#override LAYOUT    = $ocn_layout
#override MASKTABLE = $ocn_mask_table
#override OCEAN_OMP_THREADS = $ocean_nthreads
MOM_LAYOUT_EOF

cat > $work/INPUT/SIS_layout << SIS_LAYOUT_EOF
#override IO_LAYOUT = $ice_io_layout
#override LAYOUT    = $ice_layout
#override MASKTABLE = $ice_mask_table
SIS_LAYOUT_EOF

cat > $work/INPUT/SIS_diurnal << SIS_diurnal_EOF
ADD_DIURNAL_SW = True ! This must ONLY be used in the ice-ocean mode if forcing is not diurnal (e.g. CORE), NOT fully coupled mode.
SIS_diurnal_EOF

# Copy AWG and OWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?flagOutputXferOn && $?flagOutputPostProcessOn && $currentSeg == 1 ) then
  #gcp --batch does not understand some variations of home filesystem like /autofs/mnt/ncrc-svm1_home1 so we need to massage rtsxml to comply
  set xmldirlocal = `dirname $rtsxml | sed -r "s/^\/(autofs|ncrc)\/.+\/$USER\//\~$USER\//"`
  set xmldirRemote = `echo $xmldirlocal | sed -r "$patternSedHome"`
  set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
  if ("${platform_domain}" == "ncrc.gov") then
    set xmldirRemote = `echo $xmldirlocal | sed -r "$patternSedHome;$patternSedCTMP;$patternSedCPERM"`
    gcp --batch -cd -r --sync $xmldirlocal/awg_include gfdl:$(NB_ROOT)/mdt_xml/
    gcp --batch -cd -r --sync $xmldirlocal/awg_include gfdl:$xmldirRemote/
  endif
  #trick to copy MOM6 directory but avoid traversing the .datasets links
  tar cvf mom6.tar --exclude='.datasets' -C $(MOM6_EXAMPLES) . > /dev/null
  mkdir mom6
  tar xvf mom6.tar -C ./mom6 > /dev/null
  if ("${platform_domain}" == "ncrc.gov") then
    gcp --batch -cd -r --sync mom6 gfdl:$(NB_ROOT)/
  else if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
    gcp -cd -r --sync mom6 gfdl:$(NB_ROOT)/
  endif
endif


      ]]></csh>
    </input>
   </freInclude>


   <freInclude name="OM4_grid">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/grid_spec.nc</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/grid_spec.nc</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/grid_spec.nc</dataSource>
        <dataSource site="gfdl">/archive/gold/datasets/OM4_025/mosaic.v20170622.tar</dataSource> 
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/atmos_mosaic_tile1Xland_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/atmos_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/land_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/land_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ocean_hgrid.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ocean_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ocean_mosaic.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ocean_topog.nc</dataSource>
       <!--hsmget cannot get this  <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/topog.nc</dataSource> -->
      </dataFile>
    </input>
   </freInclude>

   <!--OM4 CORE forcing datasets-->
   <freInclude name="CORE_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ncar_precip.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ncar_rad.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/q_10_mod.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/runoff.daitren.clim.v2011.02.10a.1440x1080.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/slp.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/t_10_mod.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/u_10_mod.clim.nc</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/v_10_mod.clim.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2/INPUT/cfc.bc.nc</dataSource>
      </dataFile>

    </input>
   </freInclude>

   <!--OM4 CORE2 dynamic forcing datasets-->
   <freInclude name="CORE2_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/ncar_precip.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/ncar_rad.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/q_10_mod.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/slp.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/t_10_mod.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/u_10_mod.1948-2007.nomads.nc</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/v_10_mod.1948-2007.nomads.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2/INPUT/cfc.bc.nc</dataSource>
      </dataFile>

    </input>
   </freInclude>
   <freInclude name="CORE2_data_table">
    <input>
     <dataTable>
# 2016/07/18 JGJ CORE-II data table
# keep generic names here so data table does not have to change with experiments
# instead update dataset tag to point to generic name
# modified from  /lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/data_table_dyn
# to use runoff.nc as generic filename for runoff dataset
#
"ATM" , "p_surf"        , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "p_bot"         , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "t_bot"         , "T_10_MOD"    , "./INPUT/t_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "sphum_bot"     , "Q_10_MOD"    , "./INPUT/q_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "u_bot"         , "U_10_MOD"    , "./INPUT/u_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "v_bot"         , "V_10_MOD"    , "./INPUT/v_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "z_bot"         , ""            , ""                                         , "bilinear" , 10.0
"ATM" , "gust"          , ""            , ""                                         , "bilinear" ,  1.0e-4
"ICE" , "lw_flux_dn"    , "LWDN_MOD"    , "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ICE" , "sw_flux_vis_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_vis_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_nir_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "sw_flux_nir_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "lprec"         , "RAIN"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "fprec"         , "SNOW"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "runoff"        , "runoff"      , "./INPUT/runoff.daitren.clim.v2011.02.10a.720x576.nc" , "none"  ,  1.0
"ICE" , "calving"       , ""            , ""                             , "none"  ,  0.0
"ICE" , "dhdt"          , ""            , ""                             , "none"  , 80.0
"ICE" , "dedt"          , ""            , ""                             , "none"  ,  2.0e-6
"ICE" , "drdt"          , ""            , ""                             , "none"  ,  10.0
"LND" , "t_surf"        , ""            , ""                             , "none"  ,  273.0
"LND" , "t_ca"          , ""            , ""                             , "none"  ,  273.0
"LND" , "q_ca"          , ""            , ""                             , "none"  ,  0.0
"LND" , "rough_mom"     , ""            , ""                             , "none"  ,  0.01
"LND" , "rough_heat"    , ""            , ""                             , "none"  ,  0.1
"LND" , "albedo"        , ""            , ""                             , "none"  ,  0.1
#"LND" , "t_ca"         , ""            , ""                             , "none"  ,  273.0
#"LND" , "t_surf"       , ""            , ""                             , "none"  ,  273.0
"LND" , "sphum_surf"    , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_ca"      , ""            , ""                             , "none"  ,  0.0
"LND" , "t_flux"        , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_flux"    , ""            , ""                             , "none"  ,  0.0
"LND" , "lw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "sw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "lprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "fprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "dhdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "dedt"          , ""            , ""                             , "none"  ,  2e-6
"LND" , "dedq"          , ""            , ""                             , "none"  ,  0.0
"LND" , "drdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "drag_q"        , ""            , ""                             , "none"  ,  0.0
"LND" , "p_surf"        , ""            , ""                             , "none"  ,  1.e5
      </dataTable>
    </input>
   </freInclude>

   <freInclude name="OM4_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_input</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/layer_coord.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/salt_restore.v20140616.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_saltrestore</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/seawifs_1998-2006_smoothed_2X.v20140616.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/tidal_amplitude.v20140616.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/MOM_channels_global_025</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m_575m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_GS_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/All_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/WOA05_pottemp_salt.nc </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.33.16x18     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.96.32x18     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.242.32x36     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.274.36x36     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.315.32x45    
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.548.32x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.622.36x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.808.45x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1053.90x45
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1809.90x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1309.90x54     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1402.72x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.3785.90x144
      </dataFile>
      <dataFile label="input" target="INPUT/ocean_static_no_mask_table.nc" chksum="" size="" timestamp="">
          <dataSource site="ncrc">/lustre/f1/pdata/gfdl_O/datasets/OM4_025/mosaic.v20140610.unpacked/ocean_static.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/pdata/gfdl_O/datasets/OM4_025/INPUT/geothermal_davies2013_v1.nc</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
      </dataFile>
<!-- "heat_content_vprec" are repeated in diag_table.MOM6
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
      </dataFile>
-->
      <diagTable order="append">
# MOM6 ocean diagnostics only used in a CORE/OMIP (no interactive atmos). 
# These terms provide diagnostics for the surface salinity / fresh water restoring. 
 "ocean_model", "vprec",              "vprec",              "ocean_annual", "all", "mean", "none",2
 "ocean_model", "salt_flux_restore",  "salt_flux_restore",  "ocean_annual", "all", "mean", "none",2

 "ocean_model", "vprec",              "vprec",              "ocean_month", "all", "mean", "none",2
 "ocean_model", "salt_flux_restore",  "salt_flux_restore",  "ocean_month", "all", "mean", "none",2
      </diagTable>

      <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_saltrestore','INPUT/MOM_override'
     </namelist>

     </input>

   </freInclude>

   <freInclude name="SIS2_data">
    <input>

     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
     </dataFile>

     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/SIS_input</dataSource>
     </dataFile>

     <namelist name="SIS_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_diurnal','INPUT/SIS_override'
     </namelist>

     </input>
   </freInclude>

   
   <!-- OCEAN  and ICE post-processing-->
   <freInclude name="OM4_postprocess">
      <postProcess> 
         <csh><![CDATA[
	 #Take care of iceberg restarts and trajectories
         cd $work/RESTART
         #Treat icebergs restarts and trajectories
         #Find non-empty iceberg restarts and combine them AND then remove uncombined restarts
         #This should be handled properly by FRE
         #ncrcat icebergs.res.nc.* icebergs.res.nc
      ls icebergs.res.nc.*
      if( ! $status ) then
         which ncdump
         if( $status ) then
           echo ncdump not available! We need to stop the run or the model restarts incorrectly!
           exit 1
         endif

         set non_empty_restarts = ""
         foreach file ( `ls icebergs.res.nc.????` )
            if ( `ncdump -h $file | grep UNLIMITED | awk '{gsub(/\(/," ");print $6}'` ) set non_empty_restarts = "$non_empty_restarts $file"
         end
         if( "$non_empty_restarts" != "" ) then
          ncrcat $non_empty_restarts icebergs.res.nc
          if( ! -e icebergs.res.nc ) then
            echo ERROR: ncrcat did not produce icebergs restart file! We need to stop the run or the model restarts incorrectly!
            exit 1
          endif
         endif

         mkdir hide_from_fre
         mv icebergs.res.nc.* hide_from_fre/
         cd $work
         mkdir hide_from_fre
         ncrcat iceberg_trajectories.nc.* iceberg_trajectories.nc
         mv iceberg_trajectories.nc.* hide_from_fre/
      endif

         cd $work
         #Make a directory to trick FRE to pick up and archive in ascii
         mkdir extra.results
         mv *velocity_truncations MOM_parameter_doc* SIS_parameter_doc* seaice.stats* ocean.stats* extra.results/

         #When the ocean uses a mask_table the ocean_static.nc file produced by the model run has holes in coordinates (geolon,geolat)
         #This causes problems for ferret and python tools for analysis.
         #Copy a non-masked version of ocean_static.nc to be saved as a history file to be used by the analysis scipts . 
         cp $work/INPUT/ocean_static_no_mask_table.nc $work/

         ]]></csh>

      <!--REFINE DIAG SCRIP -->
      <!--By default a refineDiag script causes the annual data to be unpacked and saved in /ptmp/$USER-->
      <refineDiag script="$(NB_ROOT)/mom6/tools/analysis/MOM6_refineDiag.csh  $(NB_ROOT)/mdt_xml/awg_include/refineDiag/refineDiag_data_stager_globalAve.csh"/>

      <!--PostProcessing component models-->
      <component type="ocean_daily"   start="$(PP_START_YEAR)" source="ocean_daily" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_A)" source="ocean_daily"/>
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)" source="ocean_daily"/>
      </component>
      <component type="ocean_monthly"   start="$(PP_START_YEAR)" source="ocean_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" source="ocean_month">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_monthly.frepp"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)" source="ocean_month">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_monthly.frepp"/>
        </timeSeries> 
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)"/>
      </component>
      <component type="ocean_monthly_z" start="$(PP_START_YEAR)"  source="ocean_month_z" sourceGrid="ocean-tripolar">
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_annual_z" start="$(PP_START_YEAR)" source="ocean_annual_z"  sourceGrid="ocean-tripolar">
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual_z.frepp"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual_z.frepp"/>
        </timeAverage>
        <timeSeries freq="annual"  chunkLength="$(CHUNK_LENGTH_B)" source="ocean_annual_z"/>	
      </component>

      <component type="ocean_annual" start="$(PP_START_YEAR)"  source="ocean_annual"  sourceGrid="ocean-tripolar"> 
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual.frepp"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual.frepp"/>
        </timeAverage>
      </component>

      <!--Ocean scalars-->
      <component type="ocean_scalar_monthly" start="$(PP_START_YEAR)" source="ocean_scalar_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)" source="ocean_scalar_month"/>
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_B)"/>
      </component>
      
      <component type="ocean_scalar_annual"  start="$(PP_START_YEAR)" source="ocean_scalar_annual" sourceGrid="ocean-tripolar">
        <timeSeries freq="annual"   chunkLength="$(CHUNK_LENGTH_B)" source="ocean_scalar_annual"/>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)"/>
      </component>

      <!--Ocean regions-->
      <component type="ocean_Barents_opening" source="ocean_Barents_opening" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Bering_Strait" source="ocean_Bering_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Davis_Strait" source="ocean_Davis_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Windward_Passage" source="ocean_Windward_Passage" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Denmark_Strait" source="ocean_Denmark_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Drake_Passage" source="ocean_Drake_Passage" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_English_Channel" source="ocean_English_Channel" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Faroe_Scotland" source="ocean_Faroe_Scotland" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Florida_Bahamas" source="ocean_Florida_Bahamas" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Fram_Strait" source="ocean_Fram_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Iceland_Faroe_V" source="ocean_Iceland_Faroe_V" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Iceland_Faroe_U" source="ocean_Iceland_Faroe_U" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Indonesian_Throughflow" source="ocean_Indonesian_Throughflow" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Mozambique_Channel" source="ocean_Mozambique_Channel" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Pacific_undercurrent" source="ocean_Pacific_undercurrent" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Taiwan_Luzon" source="ocean_Taiwan_Luzon" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Agulhas_section" source="ocean_Agulhas_section" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Gibraltar_Strait" source="ocean_Gibraltar_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_Iceland_Norway" source="ocean_Iceland_Norway" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
        <timeSeries freq="monthly" averageOf="daily" chunkLength="$(CHUNK_LENGTH_B)"/>
      </component>

      <!--ICE-->      
      <component type="ice"  start="$(PP_START_YEAR)"  source="ice_month"  sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)"  source="ice_month">
	   <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
	</timeSeries>   
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)"  source="ice_month">
           <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
        </timeSeries>
        <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
	  
        <timeAverage source="annual"  interval="$(CHUNK_LENGTH_B)"/>
      </component>
     </postProcess>
   </freInclude>

   <freInclude name="OM4i_postprocess">

      <postProcess> 
         <csh><![CDATA[
	 #Do not recombine restarts between the runs. fre/bronx-11 takes care of restart combine for regression tests.

         cd $work
         #Make a directory to trick FRE to pick up and archive in ascii
         mkdir extra.results
         mv *velocity_truncations MOM_parameter_doc* SIS_parameter_doc* seaice.stats* ocean.stats* extra.results/
         ]]></csh>

      <!--REFINE DIAG SCRIP -->
      <!--By default a refineDiag script causes the annual data to be unpacked and saved in /ptmp/$USER-->
      <refineDiag script="$(NB_ROOT)/mom6/tools/analysis/MOM6_refineDiag.csh  $(NB_ROOT)/mdt_xml/awg_include/refineDiag/refineDiag_data_stager_globalAve.csh"/>

      <component type="ocean_monthly"   start="$(PP_START_YEAR)" source="ocean_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" source="ocean_month">
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)" source="ocean_month">
        </timeSeries>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ocean_monthly_z"   source="ocean_month_z" sourceGrid="ocean-tripolar">
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_annual" start="$(PP_START_YEAR)"  source="ocean_annual"  sourceGrid="ocean-tripolar"> 
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ice"  start="$(PP_START_YEAR)"  source="ice_month"  sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)"  source="ice_month">
	   <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
	</timeSeries>   
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)"  source="ice_month">
           <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
        </timeSeries>
        <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="annual"  interval="$(CHUNK_LENGTH_B)"/>
      </component>

     </postProcess>

   </freInclude>

   <!--****************************************************************************************-->
   <!--***************************** 1/4 degree experiments        ****************************-->
   <!--****************************************************************************************-->
											      
   <experiment name="OM4_SIS2_baseline_config" inherit="MOM6_SIS2_compile$(STATIC)">
    <publicMetadata DBswitch="on">
      <project>"$(ProjectID)"</project>
      <model>"OM4_SIS2 $(FRE_STEM)"</model>
      <modelID>"OM4_SIS2 $(FRE_STEM)"</modelID>
      <experimentName>"$(name)"</experimentName>
      <experimentID>"$(name)" </experimentID>
      <comment>
       Experiment name = $(name)
    For more information please refer to the
    &lt;a href="http://wiki.gfdl.noaa.gov/index.php/MOM6"&gt; MOM6 Wiki.  &lt;/a&gt;
      </comment>
    </publicMetadata>
    <description>
    </description>

    <runtime>   
      <production simTime="$(PROD_SIMTIME)" units="years">
          <segment simTime="12" units="months"/>
          <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1756_production']/node())"/>
      </production>
      <regression name="basic">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1756']/node())"/> </run>
      </regression>
      <regression name="rts">
        <run days="15 16" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1756']/node())"/> </run>
         <!--the following should reproduce eachother but not the basic because basic uses mask_table-->
         <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O2304']/node())"/> </run>
         <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1152']/node())"/> </run>
         <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O864x2']/node())"/> </run>
      </regression>
      <regression name="debugomp">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256x2']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256']/node())"/> </run>
      </regression>
 
      <regression name="ice_layouts">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O288']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O288_1']/node())"/> </run>
      </regression>

      <regression name="debug">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512']/node())"/> </run>
      </regression>

      <regression name="debug2">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O864']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O864']/node())"/> </run>
      </regression>

      <regression name="timing">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O3551']/node())"/> </run>
      </regression>
      <regression name="timings">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O480']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O910']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1125']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O2432']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O2997']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O3782']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O4671']/node())"/> </run>
      </regression>
      <regression name="timingsOMP">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O2304']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1152']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1756']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512x2']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O864x2']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1152x2']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1756x2']/node())"/> </run>
      </regression>
      <regression name="timingsNOMASK">
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512x2']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1024']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1024x2']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O2048']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O2048x2']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O4096']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O4096x2']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O3240']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O3240x2']/node())"/> </run>
      </regression>
      <regression name="timingsNOMASK2">
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O6480']/node())"/> </run>
        <run days="10" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O8100']/node())"/> </run>

      </regression>



      <reference restart="$(REFERENCE)/archive/1x1m0d_1756x1o/restart/19000201.tar"/>
      <reference restart="$(archiveDir)/../../$(platform)-prod/archive/1x1m0d_1756x1o/restart/19000201.tar"/>

    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>

   </experiment>

  <experiment name="OM4_initCond" inherit="OM4_SIS2_baseline">
    <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 1800,
       dt_atmos = 1800,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false. 
     </namelist>
     <!--There is  MOM6/SIS2 restart provided in initCond.-->
     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = 'r'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override','INPUT/MOM_saltrestore'
     </namelist>
     <namelist name="SIS_input_nml" >
         output_directory = './',
         input_filename = 'r'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_override','INPUT/SIS_diurnal'
     </namelist>
     <namelist name="fms_io_nml" >
         fms_netcdf_restart=.true.
         threading_read='multi'
         max_files_r = 200
         max_files_w = 200
         checksum_required = .false. ! This is needed to be able to restart the Ice 
     </namelist>
     <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
      <!--This initCond is the 225 years restart of Bill's #723 and has so many  bergs that caused the model to crash and uncovered a bug in icebergs-->
      <!--/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/CM4_c96L33_am4p0_1850_30d15_tlt_dyn_veg_SAI_combined_02250101.tar-->
      <!-- 
      <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/CM4_c96L33_am4p0_1850_30d15_tlt_dyn_veg_SAI_combined_02250101.tar</dataSource> FAIL
      <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/answers/warsaw_mom6_2017.06.12_answers/CM4_c96L33_am4p0_2010_30d15_tlt.2017.06.12/ncrc3.intel16-prod-openmp/archive/1x1m0d_216x2a_1756x1o/restart/00010201.tar</dataSource> PASS
      <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/CM4_c96L33_am4p0_1850_30d15_tlt_dyn_veg_SAI_combined_01410101.tar</dataSource> FAIL
      <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/CM4_c96L33_am4p0_2010_30d15_tlt_725_01210101.tar</dataSource> FAIL
      <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/CM4_c96L33_am4p0_2010_30d15_tlt_725_01210101.tar</dataSource>
      <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/CM4B_1850_Control_am4p0c96L33_OM4p25_30d15_tlt_bling8_F_806_from450_combined_06310101.tar</dataSource> Crash
      -->
      <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/answers/testing_20180202_om4v1.0.4_plus/CM4_c96L33_am4p0_2010_base/ncrc4.intel16-prod-openmp/archive/1x1m0d_216x2a_1756x1o/restart/00010201.tar</dataSource>
     </dataFile>

      <namelist name="frecheck_nml"><!--this nml is needed only for frecheck to work. It is not needed and does not affect the model run in any way-->
          start_date =  0001,02,01,0,0,0, !This is Current Model Time from coupler.res in the initCond, frecheck needs it, but it does not open coupler.res
      </namelist>
    </input>
  </experiment>

   <experiment name="OM4_SIS2_baseline.$(MOM6_DATE)" inherit="OM4_SIS2_baseline"/>
   <experiment name="OM4_SIS2_baseline.nodiag.$(MOM6_DATE)" inherit="OM4_SIS2_baseline">
     <input>
      <diagTable>
$name
$baseDate
      </diagTable>
    </input>
  </experiment>

   <experiment name="OM4p25_NYF_baseline" inherit="OM4_SIS2_baseline"/>
   <experiment name="OM4p25_baseline" inherit="OM4_SIS2_baseline"/>
   <experiment name="OM4_SIS2_baseline$(STATIC)" inherit="OM4_SIS2_baseline_config">
     <input>

      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--OM4 gridSpec mosaic datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_grid']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE_data']/input/node())"/>

      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/data_table</dataSource>
      </dataFile>
     
     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
     </dataFile>
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/field_table</dataSource>
     </dataFile>
      
      <diagTable>
$name
$baseDate
      </diagTable>

      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1900,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 1800,
       dt_atmos = 1800,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false. 
     </namelist>


    <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 8000000
            stack_size =0
      </namelist>
     <namelist name="fms_io_nml" >
         fms_netcdf_restart=.true.
         threading_read='multi'
         max_files_r = 200
         max_files_w = 200
!         checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>
     <namelist name="diag_manager_nml">
       max_axes = 150,
       max_files = 100,
       max_num_axis_sets = 100,
       max_input_fields = 1200
       max_output_fields = 1800
       mix_snapshot_average_fields=.false.
     </namelist>
     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

      <csh><![CDATA[
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
!No overrides here 
MOM_OVERRIDE_EOF
     ]]></csh>
   </input>
   </experiment>

   <experiment name="OM4p25_IAF_baseline" inherit="OM4_SIS2_baseline_config">
    <description>
global 1/4 degree z ocean_ice experiment 
regridded runoff and salinity
CORE2 dynamic inter_annual forcing data
    </description>  
    <publicMetadata DBswitch="$(MDBIswitch)">
      <!-- Realization tag -->
      <realization r="1" i="1" p="1" f="1"/>
      <!-- project info -->
      <project>"$(ProjectID)"</project>
      <activity_id>OMIP</activity_id>
      <mip_era>CMIP6</mip_era>
      <!-- model info -->
      <source>GFDL OM4p25 (2017)</source>
      <source_id>GFDL-OM4p25_2</source_id>
      <source_type>OGCM</source_type>
      <!--experiment info-->
      <experiment_name>"$(name)"</experiment_name>
      <experiment_id>"$(name)"</experiment_id>
      <sub_experiment>none</sub_experiment>
      <sub_experiment_id>none</sub_experiment_id>
      <start_time>$(EXP_CPLD_START)</start_time>
      <end_time>$(EXP_CPLD_END)</end_time>
      <!-- branch info -->
      <branch_method>standard</branch_method>
      <branch_time_in_child>0.0D0</branch_time_in_child>
      <branch_time_in_parent></branch_time_in_parent>
      <!-- variant info-->
      <variant_info></variant_info>
      <!--parent info-->
      <parent_time_units>days since 1948-1-1</parent_time_units>
      <parent_activity_id>CMIP</parent_activity_id>
      <parent_experiment_id></parent_experiment_id>
      <parent_mip_era>CMIP6</parent_mip_era>
      <parent_source_id>GFDL-OM4</parent_source_id>
      <parent_variant_label>r1i1p1f1</parent_variant_label>
      <comment>
       Experiment name = $(name)
    For more information please refer to the
    &lt;a href="https://github.com/NOAA-GFDL/MOM6-examples/wiki"&gt; MOM6 Wiki.  &lt;/a&gt;
      </comment>

    </publicMetadata>

     <input>
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--OM4 gridSpec mosaic datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_grid']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE2_data']/input/node())"/>

      <!--Resolution dependent datasets moved here from CORE2_data to make it reusable for both 1/2 and 1/4 degree runs-->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/runoff.daitren.iaf.1948-2007.regridded.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/PHC2_salx.2015_06_15.nc</dataSource>
      </dataFile>
<!--
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/MOM_saltrestore</dataSource>
      </dataFile>
-->
      <dataTable>
"ATM" , "p_surf"        , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "p_bot"         , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "t_bot"         , "T_10_MOD"    , "./INPUT/t_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "sphum_bot"     , "Q_10_MOD"    , "./INPUT/q_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "u_bot"         , "U_10_MOD"    , "./INPUT/u_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "v_bot"         , "V_10_MOD"    , "./INPUT/v_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "z_bot"         , ""            , ""                                         , "bilinear" , 10.0
"ATM" , "gust"          , ""            , ""                                         , "bilinear" ,  1.0e-4
"ICE" , "lw_flux_dn"    , "LWDN_MOD"    , "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ICE" , "sw_flux_vis_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_vis_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_nir_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "sw_flux_nir_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "lprec"         , "RAIN"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "fprec"         , "SNOW"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "runoff"        , "runoff"      , "./INPUT/runoff.daitren.iaf.1948-2007.regridded.nc", "none" ,  1.0
"ICE" , "calving"       , ""            , ""                             , "none"  ,  0.0
"ICE" , "dhdt"          , ""            , ""                             , "none"  , 80.0
"ICE" , "dedt"          , ""            , ""                             , "none"  ,  2.0e-6
"ICE" , "drdt"          , ""            , ""                             , "none"  ,  10.0
"LND" , "t_surf"        , ""            , ""                             , "none"  ,  273.0
"LND" , "t_ca"          , ""            , ""                             , "none"  ,  273.0
"LND" , "q_ca"          , ""            , ""                             , "none"  ,  0.0
"LND" , "rough_mom"     , ""            , ""                             , "none"  ,  0.01
"LND" , "rough_heat"    , ""            , ""                             , "none"  ,  0.1
"LND" , "albedo"        , ""            , ""                             , "none"  ,  0.1
#"LND" , "t_ca"         , ""            , ""                             , "none"  ,  273.0
#"LND" , "t_surf"       , ""            , ""                             , "none"  ,  273.0
"LND" , "sphum_surf"    , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_ca"      , ""            , ""                             , "none"  ,  0.0
"LND" , "t_flux"        , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_flux"    , ""            , ""                             , "none"  ,  0.0
"LND" , "lw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "sw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "lprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "fprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "dhdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "dedt"          , ""            , ""                             , "none"  ,  2e-6
"LND" , "dedq"          , ""            , ""                             , "none"  ,  0.0
"LND" , "drdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "drag_q"        , ""            , ""                             , "none"  ,  0.0
"LND" , "p_surf"        , ""            , ""                             , "none"  ,  1.e5
      </dataTable>
<!--This initCond is not compatible with SIS2 and causes a crash with
FATAL from PE    46: NETCDF ERROR: NetCDF: Index exceeds dimension bound File=INPUT//ice_model.res.nc.0000 Field=flux_u

     <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/20080101.ice_model.res.tar</dataSource>
        <dataSource site="gfdl">/archive/arl/CORE/IAF_v2.0/20080101.ice_model.res.tar</dataSource>
     </dataFile>
-->
     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
     </dataFile>
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/field_table</dataSource>
     </dataFile>

      <diagTable>
$name
$baseDate
      </diagTable>

      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1948,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 3600,
       dt_atmos = 3600,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false. 
     </namelist>
     <namelist name="fms_nml">
       clock_grain='ROUTINE'
       clock_flags='NONE'
       domains_stack_size = 8000000
       stack_size =0
     </namelist>
     <namelist name="fms_io_nml" >
       fms_netcdf_restart=.true.
       threading_read='multi'
       max_files_r = 200
       max_files_w = 200
!       checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>
     <namelist name="diag_manager_nml">
       max_axes = 150,
       max_files = 100,
       max_num_axis_sets = 100,
       max_input_fields = 1200
       max_output_fields = 1800
       mix_snapshot_average_fields=.false.
     </namelist>
     <namelist name="xgrid_nml">
       make_exchange_reproduce = .false.
       interp_method = 'second_order'
     </namelist>
     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

      <csh><![CDATA[
cat > $work/INPUT/MOM_override << OVERRIDE_EOF
#override SALT_RESTORE_FILE = "PHC2_salx.2015_06_15.nc"
OVERRIDE_EOF
     ]]></csh>

   </input>
    <runtime>
      <reference restart="$(REFERENCE)/archive/1x1m0d_1756x1o/restart/19480201.tar"/>
      <reference restart="$(archiveDir)/../../$(platform)-prod-openmp/archive/1x1m0d_1756x1o/restart/19480201.tar"/>
    </runtime>
   </experiment>

   <experiment name="OM4p25_BLING" inherit="OM4p25_baseline">
    <input>
     <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_BLING=.true.
       do_generic_CFC=.false.
       do_generic_SF6=.false.
       do_generic_age=.false.
       do_generic_argon=.false.
       do_generic_COBALT=.false.
       force_update_fluxes=.true.
      </namelist>
      <namelist name="generic_bling_nml">
       do_14c=.false.
       do_carbon=.true.
       do_carbon_pre=.false.
       do_po4_pre=.false.
       bury_caco3=.true.
       bury_pop=.true.
       co2_calc='mocsy'
      </namelist>
     <namelist name="diag_manager_nml">
       max_files = 400
       flush_nc_files=.false.
       max_axes = 400,
       max_num_axis_sets = 400,
       max_input_fields = 1200
       max_output_fields = 1800
       mix_snapshot_average_fields=.false.
     </namelist>
     <namelist name="xgrid_nml">
       make_exchange_reproduce = .true.
       interp_method = 'second_order'
     </namelist>
     <namelist name="fms_nml">
       clock_grain='ROUTINE'
       clock_flags='NONE'
       domains_stack_size = 8000000
       stack_size =0
     </namelist>
     <namelist name="fms_io_nml" >
       fms_netcdf_restart=.true.
       threading_read='multi'
       max_files_r = 800
       max_files_w = 800
!       checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>


     <diagTable>
$name
$baseDate
     </diagTable>

      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--OM4 gridSpec mosaic datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_grid']/input/node())"/>
      <!--CORE2 forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE_data']/input/node())"/>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/data_table</dataSource>
      </dataFile>

      <!--BLING specific datasets and tables-->
      <!--COBALT IC datasets used in BLING field_table-->
      <xi:include xpointer="xpointer(//freInclude[@name='OBGC_data_set']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='BLING_field_table']/input/node())"/>

      <dataTable order="append">
"ATM", "c14o2_flux_pcair_atm",         "",      "",                                "none",  284.262e-06
"ATM", "co2_flux_pcair_atm",           "",      "",                                "none",  284.262e-06
"ATM", "o2_flux_pcair_atm",            "",      "",                                "none",    0.21
"OCN", "runoff_alk_flux_ice_ocn",      "",      "",                                "none",    0.5932e-3
"OCN", "runoff_dic_flux_ice_ocn",      "",      "",                                "none",    0.96e-3
"OCN", "runoff_po4_flux_ice_ocn",      "",      "",                                "none",    0.006792e-3
"OCN", "dry_dep_fed_flux_ice_ocn",     "FLUX",  "./INPUT/Soluble_Fe_Flux_PI.nc",   "bilinear",   -1.0
      </dataTable>  
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/BC/TOPAZ/deposition_fan/Soluble_Fe_Flux_PI.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_BLING</dataSource>
      </dataFile>

     <csh>
        <![CDATA[
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override DT = 1800
#override DT_THERM = 7200  
USE_generic_tracer = True
MOM_OVERRIDE_EOF

     ]]></csh>

   </input>

   </experiment>
   <freInclude  name="OBGC_COBALT_data">
    <input>
       <!-- IC files -->
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_n_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_p_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_i_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_o_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Alk.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/TCO2.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
         <dataSource
platform="$(platform)">$(CMIP6_ESM4_ARCHIVE_ROOT)/OBGC/IC/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds_fedet_btf.ocean_cobalt.res.nc</dataSource>
      </dataFile>
<!-- Preind DIC -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Preind_DIC.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_fan/Soluble_Fe_Flux_PI.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_horowitz/depflux_total.mean.1990.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Soluble_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Mineral_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_COBALT</dataSource>
      </dataFile>
<!--
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_20141212</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/diag_table.COBALT_20141212</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_20141212</dataSource>
      </dataFile>
-->
<!--
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
      </dataFile>
-->
<fieldTable order="append">
####.................................................
### COBALT field table for initializing tracers
## jgj 2016/07/18 updated for COBALT and 14C

"namelists","ocean_mod","generic_cobalt/*global*"
/

"namelists","ocean_mod","generic_cobalt"

init = f

# JGJ 2015/07/28
# field table entries for initialization of cobalt tracers
# all unit conversions will be specified in the code based on
# valid src_var_unit and internal model unit.
# If field table src_var_unit does not match valid src_var_unit
# in code, model will give fatal error.
# valid src_var_units:
#    NO3, PO4, SiO4    : micromoles_per_liter
#    O2                : milliliters_per_liter
#    DIC, ALK          : micromoles_per_kg
#    all other fields  : none
# valid src_var_record : 0-12, where 0 is Annual, 1-12 for Jan-Dec
# 2015/10/05: Use annual data for WOA13 N, P, Si, O2 since monthly data does not extend to depth
# airsea and ice_ocean fluxes are handled by coupler, so are initialized in COBALT.
# 
# 2015/09/28 jgj updated to provide valid_min, valid_max for tracers to ensure
# tracers remain positive after interpolation
# note that values of valid_min and valid_max are in model units not src_units
# currently only alk, dic and htotal have both a valid_min and valid_max
# specified in field_table, but valid_max is ignored for now by code.
# as of 2015/10/06 src_var_record and src_var_gridspec are not yet implemented
#
# 2015/10/14 change valid_min for alk and dic to 0 since land values get filled with valid_min
#            also remove valid_max for alk and dic
#
#------------------------------------------------------------------------------------------------
#
# NO3 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_n_annual_01.nc)
# min = 0, max = 65.08 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
no3_src_file = INPUT/woa13_all_n_annual_01.nc
no3_src_var_name = n_an
no3_src_var_unit = micromoles_per_liter
no3_dest_var_name =  no3
no3_dest_var_unit = mol kg-1
no3_src_var_record = 1
no3_src_var_gridspec = NONE
no3_valid_min = 0.0
#
# O2 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_o_annual_01.nc)
# min = 0, max = 15.44 from input dataset
# multiply by (1000/22391.6)/1035 to convert from ml/l to mol/kg
o2_src_file = INPUT/woa13_all_o_annual_01.nc
o2_src_var_name = o_an
o2_src_var_unit = milliliters_per_liter
o2_dest_var_name =  o2
o2_dest_var_unit = mol kg-1
o2_src_var_record = 1
o2_src_var_gridspec = NONE
o2_valid_min = 0.0
#
# PO4 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_p_annual_01.nc)
# min = 0, max = 9.757 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
po4_src_file = INPUT/woa13_all_p_annual_01.nc
po4_src_var_name = p_an
po4_src_var_unit = micromoles_per_liter
po4_dest_var_name =  po4
po4_dest_var_unit = mol kg-1
po4_src_var_record = 1
po4_src_var_gridspec = NONE
po4_valid_min = 0.0
#
# SIO4 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_i_annual_01.nc)
# min = 0, max = 267.3 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
sio4_src_file = INPUT/woa13_all_i_annual_01.nc
sio4_src_var_name = i_an
sio4_src_var_unit = micromoles_per_liter
sio4_dest_var_name =  sio4
sio4_dest_var_unit = mol kg-1
sio4_src_var_record = 1
sio4_src_var_gridspec = NONE
sio4_valid_min = 0.0
#
# Alkalinity from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Alk.nc)
# min = 2171, max = 2462 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
alk_src_file = INPUT/Alk.nc
alk_src_var_name = Alk
alk_src_var_unit = micromoles_per_kg
alk_dest_var_name =  alk
alk_dest_var_unit = mol kg-1
alk_src_var_record = 1
alk_src_var_gridspec = NONE
alk_valid_min = 0.0
#
# Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
dic_src_file = INPUT/Preind_DIC.nc
dic_src_var_name = Preind_DIC
dic_src_var_unit = micromoles_per_kg
dic_dest_var_name =  dic
dic_dest_var_unit = mol kg-1
dic_src_var_record = 1
dic_src_var_gridspec = NONE
dic_valid_min = 0.0
#
# additional tracers from ESM2M-COBALT Preindustrial Control restart (/archive/jgj/datasets/retrospective/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc)
# min =  -2.203E-14, max =  1.347E-08 from input dataset
# no unit conversion necessary
cadet_arag_src_file = INPUT/init_ocean_cobalt.res.nc
cadet_arag_src_var_name = cadet_arag
cadet_arag_src_var_unit = none
cadet_arag_dest_var_name =  cadet_arag
cadet_arag_dest_var_unit = mol kg-1
cadet_arag_src_var_record = 1
cadet_arag_src_var_gridspec = NONE
cadet_arag_valid_min = 0.0
#
# min = -1.774E-15, max =  1.711E-08 from input dataset
cadet_calc_src_file = INPUT/init_ocean_cobalt.res.nc
cadet_calc_src_var_name = cadet_calc
cadet_calc_src_var_unit = none
cadet_calc_dest_var_name =  cadet_calc
cadet_calc_dest_var_unit = mol kg-1
cadet_calc_src_var_record = 1
cadet_calc_src_var_gridspec = NONE
cadet_calc_valid_min = 0.0
#
# NOTE: CASED = 0 at all K except K=1 from input dataset
# min = 0,  max = 5273. from input dataset
cased_src_file = INPUT/init_ocean_cobalt.res.nc
cased_src_var_name = cased
cased_src_var_unit = none
cased_dest_var_name =  cased
cased_dest_var_unit = mol kg-1
cased_src_var_record = 1
cased_src_var_gridspec = NONE
cased_valid_min = 0.0
#
# min = 0,  max = 4.446 from input dataset
chl_src_file = INPUT/init_ocean_cobalt.res.nc
chl_src_var_name = chl
chl_src_var_unit = none
chl_dest_var_name =  chl
chl_dest_var_unit = mol kg-1
chl_src_var_record = 1
chl_src_var_gridspec = NONE
chl_valid_min = 0.0
#
# min = 0,  max = 3.576E-04 from input dataset
co3_ion_src_file = INPUT/init_ocean_cobalt.res.nc
co3_ion_src_var_name = co3_ion
co3_ion_src_var_unit = none
co3_ion_dest_var_name =  co3_ion
co3_ion_dest_var_unit = mol kg-1
co3_ion_src_var_record = 1
co3_ion_src_var_gridspec = NONE
co3_ion_valid_min = 0.0
#
# min = -1.758E-11,  max = 1.758E-08 from input dataset
fed_src_file = INPUT/init_ocean_cobalt.res.nc
fed_src_var_name = fed
fed_src_var_unit = none
fed_dest_var_name =  fed
fed_dest_var_unit = mol kg-1
fed_src_var_record = 1
fed_src_var_gridspec = NONE
fed_valid_min = 0.0
#
# min = 0,  max = 1.715E-11 from input dataset
fedi_src_file = INPUT/init_ocean_cobalt.res.nc
fedi_src_var_name = fedi
fedi_src_var_unit = none
fedi_dest_var_name =  fedi
fedi_dest_var_unit = mol kg-1
fedi_src_var_record = 1
fedi_src_var_gridspec = NONE
fedi_valid_min = 0.0
#
# min = 0,  max = 4.724E-11 from input dataset
felg_src_file = INPUT/init_ocean_cobalt.res.nc
felg_src_var_name = felg
felg_src_var_unit = none
felg_dest_var_name =  felg
felg_dest_var_unit = mol kg-1
felg_src_var_record = 1
felg_src_var_gridspec = NONE
felg_valid_min = 0.0
#
# min = 0,  max = 7.912E-11 from input dataset
fesm_src_file = INPUT/init_ocean_cobalt.res.nc
fesm_src_var_name = fesm
fesm_src_var_unit = none
fesm_dest_var_name =  fesm
fesm_dest_var_unit = mol kg-1
fesm_src_var_record = 1
fesm_src_var_gridspec = NONE
fesm_valid_min = 0.0
#
# min = 10^-8.4=3.981E-09,  max = 10^-7.9 = 1.259E-08 from input dataset
htotal_src_file = INPUT/init_ocean_cobalt.res.nc
htotal_src_var_name = htotal
htotal_src_var_unit = none
htotal_dest_var_name =  htotal
htotal_dest_var_unit = mol kg-1
htotal_src_var_record = 1
htotal_src_var_gridspec = NONE
htotal_valid_min = 3.981E-09
htotal_valid_max = 1.259E-08
#
# min = 0,  max = 137.7 from input dataset
irr_mem_src_file = INPUT/init_ocean_cobalt.res.nc
irr_mem_src_var_name = irr_mem
irr_mem_src_var_unit = none
irr_mem_dest_var_name =  irr_mem
irr_mem_dest_var_unit = mol kg-1
irr_mem_src_var_record = 1
irr_mem_src_var_gridspec = NONE
irr_mem_valid_min = 0.0
#
# min = 0,  max = 5.812E-07 from input dataset
ldon_src_file = INPUT/init_ocean_cobalt.res.nc
ldon_src_var_name = ldon
ldon_src_var_unit = none
ldon_dest_var_name =  ldon
ldon_dest_var_unit = mol kg-1
ldon_src_var_record = 1
ldon_src_var_gridspec = NONE
ldon_valid_min = 0.0
#
# min = 0,  max = 3.576E-08 from input dataset
ldop_src_file = INPUT/init_ocean_cobalt.res.nc
ldop_src_var_name = ldop
ldop_src_var_unit = none
ldop_dest_var_name =  ldop
ldop_dest_var_unit = mol kg-1
ldop_src_var_record = 1
ldop_src_var_gridspec = NONE
ldop_valid_min = 0.0
#
# min = 0,  max = 0.006529 from input dataset
lith_src_file = INPUT/init_ocean_cobalt.res.nc
lith_src_var_name = lith
lith_src_var_unit = none
lith_dest_var_name =  lith
lith_dest_var_unit = mol kg-1
lith_src_var_record = 1
lith_src_var_gridspec = NONE
lith_valid_min = 0.0
#
# min = -1.385E-11,  max = 8.246E-06 from input dataset
nh4_src_file = INPUT/init_ocean_cobalt.res.nc
nh4_src_var_name = nh4
nh4_src_var_unit = none
nh4_dest_var_name =  nh4
nh4_dest_var_unit = mol kg-1
nh4_src_var_record = 1
nh4_src_var_gridspec = NONE
nh4_valid_min = 0.0
#
# min = -2.922E-11,  max = 9.184E-07 from input dataset
nbact_src_file = INPUT/init_ocean_cobalt.res.nc
nbact_src_var_name = nbact
nbact_src_var_unit = none
nbact_dest_var_name =  nbact
nbact_dest_var_unit = mol kg-1
nbact_src_var_record = 1
nbact_src_var_gridspec = NONE
nbact_valid_min = 0.0
#
# min = -6.356E-11,  max = 1.154E-07 from input dataset
ndi_src_file = INPUT/init_ocean_cobalt.res.nc
ndi_src_var_name = ndi
ndi_src_var_unit = none
ndi_dest_var_name =  ndi
ndi_dest_var_unit = mol kg-1
ndi_src_var_record = 1
ndi_src_var_gridspec = NONE
ndi_valid_min = 0.0
#
# min = -3.206E-10,  max = 9.267E-07 from input dataset
nlg_src_file = INPUT/init_ocean_cobalt.res.nc
nlg_src_var_name = nlg
nlg_src_var_unit = none
nlg_dest_var_name =  nlg
nlg_dest_var_unit = mol kg-1
nlg_src_var_record = 1
nlg_src_var_gridspec = NONE
nlg_valid_min = 0.0
#
# min = -3.142E-10,  max = 2.285E-06 from input dataset
nsm_src_file = INPUT/init_ocean_cobalt.res.nc
nsm_src_var_name = nsm
nsm_src_var_unit = none
nsm_dest_var_name =  nsm
nsm_dest_var_unit = mol kg-1
nsm_src_var_record = 1
nsm_src_var_gridspec = NONE
nsm_valid_min = 0.0
#
# min = -1.241E-10,  max = 5.693E-07 from input dataset
nlgz_src_file = INPUT/init_ocean_cobalt.res.nc
nlgz_src_var_name = nlgz
nlgz_src_var_unit = none
nlgz_dest_var_name =  nlgz
nlgz_dest_var_unit = mol kg-1
nlgz_src_var_record = 1
nlgz_src_var_gridspec = NONE
nlgz_valid_min = 0.0
#
# min = -1.766E-10,  max = 7.131E-07 from input dataset
nmdz_src_file = INPUT/init_ocean_cobalt.res.nc
nmdz_src_var_name = nmdz
nmdz_src_var_unit = none
nmdz_dest_var_name =  nmdz
nmdz_dest_var_unit = mol kg-1
nmdz_src_var_record = 1
nmdz_src_var_gridspec = NONE
nmdz_valid_min = 0.0
#
# min = -1.385E-11,  max = 8.246E-06 from input dataset
nsmz_src_file = INPUT/init_ocean_cobalt.res.nc
nsmz_src_var_name = nsmz
nsmz_src_var_unit = none
nsmz_dest_var_name =  nsmz
nsmz_dest_var_unit = mol kg-1
nsmz_src_var_record = 1
nsmz_src_var_gridspec = NONE
nsmz_valid_min = 0.0
#
# min = 0,  max = 4.083E-10 from input dataset
fedet_src_file = INPUT/init_ocean_cobalt.res.nc
fedet_src_var_name = fedet
fedet_src_var_unit = none
fedet_dest_var_name =  fedet
fedet_dest_var_unit = mol kg-1
fedet_src_var_record = 1
fedet_src_var_gridspec = NONE
fedet_valid_min = 0.0
#
# min = 0,  max = 1.137E-06 from input dataset
lithdet_src_file = INPUT/init_ocean_cobalt.res.nc
lithdet_src_var_name = lithdet
lithdet_src_var_unit = none
lithdet_dest_var_name =  lithdet
lithdet_dest_var_unit = mol kg-1
lithdet_src_var_record = 1
lithdet_src_var_gridspec = NONE
lithdet_valid_min = 0.0
#
# min = 0,  max = 8.271E-08 from input dataset
ndet_src_file = INPUT/init_ocean_cobalt.res.nc
ndet_src_var_name = ndet
ndet_src_var_unit = none
ndet_dest_var_name =  ndet
ndet_dest_var_unit = mol kg-1
ndet_src_var_record = 1
ndet_src_var_gridspec = NONE
ndet_valid_min = 0.0
#
# min = 0,  max = 5.169E-09 from input dataset
pdet_src_file = INPUT/init_ocean_cobalt.res.nc
pdet_src_var_name = pdet
pdet_src_var_unit = none
pdet_dest_var_name =  pdet
pdet_dest_var_unit = mol kg-1
pdet_src_var_record = 1
pdet_src_var_gridspec = NONE
pdet_valid_min = 0.0
#
# min = 0,  max = 4.827E-07 from input dataset
sidet_src_file = INPUT/init_ocean_cobalt.res.nc
sidet_src_var_name = sidet
sidet_src_var_unit = none
sidet_dest_var_name =  sidet
sidet_dest_var_unit = mol kg-1
sidet_src_var_record = 1
sidet_src_var_gridspec = NONE
sidet_valid_min = 0.0
#
# min = 0,  max = 4.897E-06 from input dataset
silg_src_file = INPUT/init_ocean_cobalt.res.nc
silg_src_var_name = silg
silg_src_var_unit = none
silg_dest_var_name =  silg
silg_dest_var_unit = mol kg-1
silg_src_var_record = 1
silg_src_var_gridspec = NONE
silg_valid_min = 0.0
#
# min = -6.824E-10,  max = 2.989E-06 from input dataset
sldon_src_file = INPUT/init_ocean_cobalt.res.nc
sldon_src_var_name = sldon
sldon_src_var_unit = none
sldon_dest_var_name =  sldon
sldon_dest_var_unit = mol kg-1
sldon_src_var_record = 1
sldon_src_var_gridspec = NONE
sldon_valid_min = 0.0
#
# min = -4.722E-11,  max = 1.819E-07 from input dataset
sldop_src_file = INPUT/init_ocean_cobalt.res.nc
sldop_src_var_name = sldop
sldop_src_var_unit = none
sldop_dest_var_name =  sldop
sldop_dest_var_unit = mol kg-1
sldop_src_var_record = 1
sldop_src_var_gridspec = NONE
sldop_valid_min = 0.0
#
# min = -3.007E-12,  max = 6.038E-06 from input dataset
srdon_src_file = INPUT/init_ocean_cobalt.res.nc
srdon_src_var_name = srdon
srdon_src_var_unit = none
srdon_dest_var_name =  srdon
srdon_dest_var_unit = mol kg-1
srdon_src_var_record = 1
srdon_src_var_gridspec = NONE
srdon_valid_min = 0.0
#
# min = -1.257E-11,  max = 3.831E-07 from input dataset
srdop_src_file = INPUT/init_ocean_cobalt.res.nc
srdop_src_var_name = srdop
srdop_src_var_unit = none
srdop_dest_var_name =  srdop
srdop_dest_var_unit = mol kg-1
srdop_src_var_record = 1
srdop_src_var_gridspec = NONE
srdop_valid_min = 0.0
#
# min = 0,  max = 1.465E-08 from input dataset
cadet_arag_btf_src_file = INPUT/init_ocean_cobalt.res.nc
cadet_arag_btf_src_var_name = cadet_arag_btf
cadet_arag_btf_src_var_unit = none
cadet_arag_btf_dest_var_name =  cadet_arag_btf
cadet_arag_btf_dest_var_unit = mol kg-1
cadet_arag_btf_src_var_record = 1
cadet_arag_btf_src_var_gridspec = NONE
cadet_arag_btf_valid_min = 0.0
#
# min = 0,  max = 2.011E-08 from input dataset
cadet_calc_btf_src_file = INPUT/init_ocean_cobalt.res.nc
cadet_calc_btf_src_var_name = cadet_calc_btf
cadet_calc_btf_src_var_unit = none
cadet_calc_btf_dest_var_name =  cadet_calc_btf
cadet_calc_btf_dest_var_unit = mol kg-1
cadet_calc_btf_src_var_record = 1
cadet_calc_btf_src_var_gridspec = NONE
cadet_calc_btf_valid_min = 0.0
#
# min = 0,  max = 1.364E-06 from input dataset
lithdet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
lithdet_btf_src_var_name = lithdet_btf
lithdet_btf_src_var_unit = none
lithdet_btf_dest_var_name =  lithdet_btf
lithdet_btf_dest_var_unit = mol kg-1
lithdet_btf_src_var_record = 1
lithdet_btf_src_var_gridspec = NONE
lithdet_btf_valid_min = 0.0
#
# min = 0,  max = 8.360E-08 from input dataset
ndet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
ndet_btf_src_var_name = ndet_btf
ndet_btf_src_var_unit = none
ndet_btf_dest_var_name =  ndet_btf
ndet_btf_dest_var_unit = mol kg-1
ndet_btf_src_var_record = 1
ndet_btf_src_var_gridspec = NONE
ndet_btf_valid_min = 0.0
#
# min = 0,  max = 5.225E-09 from input dataset
pdet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
pdet_btf_src_var_name = pdet_btf
pdet_btf_src_var_unit = none
pdet_btf_dest_var_name =  pdet_btf
pdet_btf_dest_var_unit = mol kg-1
pdet_btf_src_var_record = 1
pdet_btf_src_var_gridspec = NONE
pdet_btf_valid_min = 0.0
#
# min = 0,  max = 5.767E-07 from input dataset
sidet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
sidet_btf_src_var_name = sidet_btf
sidet_btf_src_var_unit = none
sidet_btf_dest_var_name =  sidet_btf
sidet_btf_dest_var_unit = mol kg-1
sidet_btf_src_var_record = 1
sidet_btf_src_var_gridspec = NONE
sidet_btf_valid_min = 0.0
#
# min = 0,  max = 0 from input dataset
mu_mem_ndi_src_file = INPUT/init_ocean_cobalt.res.nc
mu_mem_ndi_src_var_name = mu_mem_ndi
mu_mem_ndi_src_var_unit = none
mu_mem_ndi_dest_var_name =  mu_mem_ndi
mu_mem_ndi_dest_var_unit = mol kg-1
mu_mem_ndi_src_var_record = 1
mu_mem_ndi_src_var_gridspec = NONE
mu_mem_ndi_valid_min = 0.0
#
# min = 0,  max = 0 from input dataset
mu_mem_nlg_src_file = INPUT/init_ocean_cobalt.res.nc
mu_mem_nlg_src_var_name = mu_mem_nlg
mu_mem_nlg_src_var_unit = none
mu_mem_nlg_dest_var_name =  mu_mem_nlg
mu_mem_nlg_dest_var_unit = mol kg-1
mu_mem_nlg_src_var_record = 1
mu_mem_nlg_src_var_gridspec = NONE
mu_mem_nlg_valid_min = 0.0
#
# min = 0,  max = 0 from input dataset
mu_mem_nsm_src_file = INPUT/init_ocean_cobalt.res.nc
mu_mem_nsm_src_var_name = mu_mem_nsm
mu_mem_nsm_src_var_unit = none
mu_mem_nsm_dest_var_name =  mu_mem_nsm
mu_mem_nsm_dest_var_unit = mol kg-1
mu_mem_nsm_src_var_record = 1
mu_mem_nsm_src_var_gridspec = NONE
mu_mem_nsm_valid_min = 0.0
#
# min = 0,  max = 0 from input dataset
fedet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
fedet_btf_src_var_name = fedet_btf
fedet_btf_src_var_unit = none
fedet_btf_dest_var_name =  fedet_btf
fedet_btf_dest_var_unit = mol kg-1
fedet_btf_src_var_record = 1
fedet_btf_src_var_gridspec = NONE
fedet_btf_valid_min = 0.0
#
/
###.................................................
</fieldTable>
      <!-- grid specific -->
      <dataFile label="input" target="INPUT/news_nutrients_quarterdeg.nc" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/news_nutrients_quarterdeg_20150918_v2.nc</dataSource>
      </dataFile>

      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.COBALT_20150915</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/data_table.COBALT_20150915</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.COBALT_20150915</dataSource>
      </dataFile>
     </input>
   </freInclude>

   <experiment name="OM4_SIS2_COBALT_initFromSrc" inherit="OM4_SIS2_baseline">
    <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1948,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 3600,
       dt_atmos = 3600,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.true.
     </namelist>
       <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_CFC=.false.
       do_generic_COBALT=.true.
       do_generic_TOPAZ=.false.
       force_update_fluxes=.true.
       </namelist>
       <namelist name="diag_manager_nml">
       max_axes = 150,
       max_files = 100,
       max_num_axis_sets = 100,
       max_input_fields = 1200
       max_output_fields = 1800
       mix_snapshot_average_fields=.false.
       </namelist>
         <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 7000000
            stack_size =0
         </namelist>

     <diagTable>
$name
$baseDate
     </diagTable>
      
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--OM4 gridSpec mosaic datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_grid']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE_data']/input/node())"/>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/data_table</dataSource>
      </dataFile>
      <!--COBALT source datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OBGC_COBALT_data']/input/node())"/>
     
     <csh><![CDATA[
cat > $work/INPUT/MOM_override << OVERRIDE_EOF
USE_generic_tracer = True
#override CHL_FROM_FILE = True
OVERRIDE_EOF
     ]]></csh>

   </input>

   <runtime>
      <reference restart="$(REFERENCE)/archive/1x1m0d_1756x1o/restart/19480201.tar"/>
      <reference restart="$(archiveDir)/../../$(platform)-prod/archive/1x1m0d_1756x1o/restart/19480201.tar"/>
   </runtime>
     
   </experiment>
   
   <!--****************************************************************************************-->
   <!--***************************** 1 degree experiments        ****************************-->
   <!--****************************************************************************************-->


   <experiment name="MOM6_GOLD_SIS2_bergs" inherit="MOM6_SIS2_compile">
     <input>                                                 
     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
    </dataFile>                                                                                   
     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">                   
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
     </dataFile>                                                                                    
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">                   
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/field_table</dataSource>
     </dataFile>                                                                                     
     <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">                     
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/data_table</dataSource> 
     </dataFile>                                                                                     
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">                         
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/MOM_input</dataSource> 
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/SIS_input</dataSource> 
     </dataFile>      
                                                                             
      <!--gridSpec mosaic datasets-->
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="gfdl">/archive/gold/datasets/GOLD_SIS/riga/mosaic.unpacked/grid_spec.nc</dataSource> 
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/mosaic.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_hgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic_tile1Xland_mosaic_tile1.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_hgrid.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mask.nc</dataSource>                            
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mosaic.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource> 
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_hgrid.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_mask.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_mosaic.nc</dataSource>                         
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_vgrid.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/README</dataSource>                                  
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/topog.nc</dataSource>                                
      </dataFile>                                                                                                                        

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/cfc.bc.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/geothermal_heating_cm2g.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/gustiness_qscat.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/OM3_zgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/seawifs_1998-2006_GOLD_smoothed_2X.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/sgs_h2.nc</dataSource>                            
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/tideamp.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/tke_tidal_cm2p2.nc</dataSource>                   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>                                                                                                                     

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ncar_precip_clim.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ncar_rad_clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/q_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/runoff.nc</dataSource>          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/salt_restore.nc</dataSource>    
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/slp.clim.nc</dataSource>        
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/sst_ice_clim.nc</dataSource>    
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/t_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/u_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/v_10_mod.clim.nc</dataSource>   
      </dataFile>                                                                                                   

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/GOLD_IC.2010.11.15.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocmip2_cfc.res.nc</dataSource>
      </dataFile>                                                                                              

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/31Layer_zgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/example_calving.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/temp_restore.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/GOLD_SIS_IC.nc</dataSource>
      </dataFile>

      <namelist name="coupler_nml">
       months = $months,           
       days   = $days,             
       current_date = 1,1,1,0,0,0,
       hours = 0                     
       minutes = 0                   
       seconds = 0                   
       calendar = 'NOLEAP',          
       dt_cpld  = 7200,              
       dt_atmos = 7200,              
       do_atmos = .false.,           
       do_land = .false.,            
       do_ice = .true.,              
       do_ocean = .true.,            
       atmos_npes = 0,            
       ocean_npes = 0,               
       concurrent = .false.          
       use_lag_fluxes=.true.         
       atmos_nthreads = $atm_threads
       ocean_nthreads = $ocean_nthreads
debug_affinity =.true.
ncores_per_node = 36
use_hyper_thread = .false.
     </namelist>                     

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override'  
     </namelist>

     <namelist name="SIS_input_nml" >
        output_directory = './',
        input_filename = '$restart_flag'
        restart_input_dir = 'INPUT/',
        restart_output_dir = 'RESTART/',
        parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_diurnal','INPUT/SIS_override' 
     </namelist>

     <namelist name="fms_io_nml" >
         fms_netcdf_restart=.true.
         threading_read='multi'
!         checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>
 
     <namelist name="icebergs_nml">
    verbose=.false.,
!    verbose_hrs=24,
    traj_sample_hrs=24,
    debug=.false.,
    really_debug=.false.,
    use_slow_find=.true.,
    add_weight_to_ocean=.true.,
    passive_mode=.false.,
    generate_test_icebergs=.false.,
    speed_limit=0.,
    use_roundoff_fix=.true.,
    make_calving_reproduce=.true.,
force_all_pes_traj = .true.
     </namelist>

     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>

     <csh><![CDATA[
cat > $work/INPUT/MOM_override << OVERRIDE_EOF
#override DO_GEOTHERMAL = False
OVERRIDE_EOF
     ]]></csh>

   </input>
   <runtime>

     <production simTime="$(PROD_SIMTIME)" units="years">
        <segment simTime="12" units="months"/>
        <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128p']/node())"/>
      </production>
      <regression name="basic">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
      </regression>
      <regression name="rts">
        <run days="15 16" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O64']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O32']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O32x2']/node())"/> </run>
        <run days="15 10 6" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
      </regression>

      <regression name="debugomp">
        <run days="2" >   <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O32']/node())"/> </run>
        <run days="2" >   <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O32x2']/node())"/> </run>
      </regression>

      <regression name="debug">
        <run days="2" >   <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O64']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O32']/node())"/> </run>
      </regression>

      <regression name="debug2">
        <run days="2" >   <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O32']/node())"/> </run>
        <run days="2" >   <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O64']/node())"/> </run>
      </regression>

      <reference restart="$(REFERENCE)/archive/1x1m0d_128x1o/restart/00010201.tar"/>
      <reference restart="$(archiveDir)/../../$(platform)-prod/archive/1x1m0d_128x1o/restart/00010201.tar"/>
   </runtime>
    <postProcess>
      <xi:include xpointer="xpointer(//freInclude[@name='OM4i_postprocess']/postProcess/node())"/>
    </postProcess>
   </experiment>

   <experiment name="MOM6_GOLD_SIS2_initCond" inherit="MOM6_GOLD_SIS2_bergs">
    <input>
     <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/MOM6_GOLD_SIS2_bergs_combined_00020101.tar</dataSource>
     </dataFile>
     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = 'r'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override'  
     </namelist>

     <namelist name="SIS_input_nml" >
        output_directory = './',
        input_filename = 'r'
        restart_input_dir = 'INPUT/',
        restart_output_dir = 'RESTART/',
        parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_diurnal','INPUT/SIS_override' 
     </namelist>
    </input>
   </experiment>
   <experiment name="MOM6_GOLD_SIS2_nobergs" inherit="MOM6_GOLD_SIS2_bergs">
    <input>
     <csh><![CDATA[
cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override DO_ICEBERGS = False
SIS_OVERRIDE_EOF
     ]]></csh>
    </input>
   </experiment>

   <experiment name="MOM6_GOLD_SIS2_bergs_ens2" inherit="MOM6_GOLD_SIS2_bergs">
    <input>
      <namelist name="ensemble_nml">
        ensemble_size=2
     </namelist>
      <namelist name="coupler_nml">
       restart_interval = 0,0,5,0,0,0 !make restarts every 5 days
       months = $months,           
       days   = $days,             
       current_date = 1,1,1,0,0,0,
       hours = 0                     
       minutes = 0                   
       seconds = 0                   
       calendar = 'NOLEAP',          
       dt_cpld  = 7200,              
       dt_atmos = 7200,              
       do_atmos = .false.,           
       do_land = .false.,            
       do_ice = .true.,              
       do_ocean = .true.,            
       atmos_npes = 0,            
       ocean_npes = 0,               
       concurrent = .false.          
       use_lag_fluxes=.true.         
       atmos_nthreads = $atm_threads
       ocean_nthreads = $ocean_nthreads
debug_affinity =.true.
ncores_per_node = 36
use_hyper_thread = .false.
     </namelist>                     
    </input>
    <postProcess>
         <csh><![CDATA[
	 #Take care of iceberg restarts and trajectories
         cd $work/RESTART
         #Treat icebergs restarts and trajectories
         #Find non-empty iceberg restarts and combine them AND then remove uncombined restarts
         #This should be handled properly by FRE
         #ncrcat icebergs.res.nc.* icebergs.res.nc
      ls icebergs.res.*
      if( ! $status ) then
       which ncdump
       if( $status ) then
         echo ncdump not available! We need to stop the run or the model restarts incorrectly!
         exit 1
       endif

       foreach ext ('.ens_01' '.ens_02')
         set non_empty_restarts = ""
         foreach file ( `ls icebergs.res$ext.nc.????` )
            if ( `ncdump -h $file | grep UNLIMITED | awk '{gsub(/\(/," ");print $6}'` ) set non_empty_restarts = "$non_empty_restarts $file"
         end
         if( "$non_empty_restarts" != "" ) then
          ncrcat $non_empty_restarts icebergs.res$ext.nc
          if( ! -e icebergs.res$ext.nc ) then
            echo ERROR: ncrcat did not produce icebergs restart file! We need to stop the run or the model restarts incorrectly!
            exit 1
          endif
         endif
       end
       mkdir hide_from_fre
       mv *.icebergs.res*.nc.* hide_from_fre/
       cd $work
       mkdir hide_from_fre
       ncrcat iceberg_trajectories.nc.* iceberg_trajectories.nc
       mv iceberg_trajectories.nc.* hide_from_fre/
      endif

         cd $work
         #Make a directory to trick FRE to pick up and archive in ascii
         mkdir extra.results
         mv *velocity_truncations MOM_parameter_doc* SIS_parameter_doc* seaice.stats* ocean.stats* extra.results/

         #When the ocean uses a mask_table the ocean_static.nc file produced by the model run has holes in coordinates (geolon,geolat)
         #This causes problems for ferret and python tools for analysis.
         #Copy a non-masked version of ocean_static.nc to be saved as a history file to be used by the analysis scipts . 
         cp $work/INPUT/ocean_static_no_mask_table.nc $work/

         ]]></csh>
    </postProcess>
   </experiment>
   <experiment name="MOM6_GOLD_SIS2_bergs_ens12" inherit="MOM6_GOLD_SIS2_bergs_ens2">
    <input>
      <namelist name="ensemble_nml">
        ensemble_size=12
     </namelist>
    </input>
   </experiment>
   <experiment name="MOM6_GOLD_SIS2_nobergs_ens2" inherit="MOM6_GOLD_SIS2_bergs">
    <input>
      <namelist name="ensemble_nml">
        ensemble_size=2
     </namelist>
     <csh><![CDATA[
cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override DO_ICEBERGS = False
SIS_OVERRIDE_EOF
     ]]></csh>
    </input>
   </experiment>
   <experiment name="MOM6_GOLD_SIS2_generics_ens2" inherit="MOM6_GOLD_SIS2_generics">
    <input>
      <namelist name="ensemble_nml">
        ensemble_size=2
     </namelist>
    </input>
   </experiment>

   <experiment name="MOM6_GOLD_SIS2_generics" inherit="MOM6_GOLD_SIS2_bergs">
    <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1970,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 7200,
       dt_atmos = 7200,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.true.
     </namelist>
         <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_CFC=.true.
       do_generic_SF6=.true.
       do_generic_age=.true.
       do_generic_argon=.true.
       do_generic_COBALT=.false.
       do_generic_TOPAZ=.false.
         </namelist>

<!--Once we have the surface forcing file we can use it this way	 
      <dataTable order="append">
"ATM", "sf6_flux_pcair_atm","SF6","INPUT/sf6.bc.nc",.false., 1.0
	</dataTable>
-->

      <fieldTable order="append">
"namelists","ocean_mod","generic_age/*global*"
/

      </fieldTable>

     <csh>
        <![CDATA[
cat > $work/INPUT/MOM_override << OVERRIDE_EOF
#override USE_OCMIP2_CFC = False
#override USE_IDEAL_AGE_TRACER = False
USE_generic_tracer = True
GENERIC_TRACER_IC_FILE = "_NULL_"
#override DO_GEOTHERMAL = False
OVERRIDE_EOF

#Add null CFC's to a restart file
cd $work/INPUT
#ncap -O --script 'cfc11 = ptemp * 0.0 ; cfc12 = ptemp * 0.0 ; sf6 = ptemp * 0.0 ; age  = ptemp * 0.0 ; argon = ptemp * 0.0 ' GOLD_IC.2010.11.15.nc MOM_GENERICS.res.nc
#CFC is constant_init_tracer so the ice fluxes are not needed.
\rm ice_ocmip2_cfc.res.nc

     ]]></csh>

   </input>

   </experiment>

   <experiment name="MOM6_GOLD_SIS2_bling" inherit="MOM6_GOLD_SIS2_bergs">
    <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1970,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 7200,
       dt_atmos = 7200,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.true.
     </namelist>
         <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_CFC=.true.
       do_generic_SF6=.true.
       do_generic_age=.true.
       do_generic_argon=.true.
       do_generic_COBALT=.false.
       do_generic_BLING=.true.
         </namelist>
      <namelist name="generic_bling_nml">
      do_14c=.false.
      do_carbon=.true.
      do_carbon_pre=.false.
      do_po4_pre=.false.
      bury_caco3=.true.
      bury_pop=.true.
      co2_calc='mocsy'
      </namelist>


<!--Once we have the surface forcing file we can use it this way	 
      <dataTable order="append">
"ATM", "sf6_flux_pcair_atm","SF6","INPUT/sf6.bc.nc",.false., 1.0
	</dataTable>
-->

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override'  
     </namelist>

     <namelist name="SIS_input_nml" >
        output_directory = './',
        input_filename = '$restart_flag'
        restart_input_dir = 'INPUT/',
        restart_output_dir = 'RESTART/',
        parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_diurnal','INPUT/SIS_override' 
     </namelist>
     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
    </dataFile>                                                                                   
     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">                   
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
     </dataFile>                                                                                    
     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_BLING</dataSource>
     </dataFile>
     <diagTable order="append">
         "ocean_model_z", "volcello",     "volcello",         "ocean_day_z",      "all", "mean", "none",2 # Cell measure for 3d data
         "ocean_model",   "volcello",     "volcello",         "ocean_day",        "all", "mean", "none",2 # Cell measure for 3d data
     </diagTable>
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">                   
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/field_table</dataSource>
     </dataFile>                                                                                     
<!--
     <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">                     
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/data_table</dataSource> 
     </dataFile>                                                                                     
-->
      <dataTable>
"ATM", "cfc11_flux_pcair_atm","CFC11","INPUT/cfc.bc.nc", .false. , 1.0e-12
"ATM", "cfc12_flux_pcair_atm","CFC12","INPUT/cfc.bc.nc", .false. , 1.0e-12
"ATM", "sf6_flux_pcair_atm",   "SF6",  "INPUT/cfc.bc.nc", .false. , 1.0e-12
"ATM" , "p_surf"        , "SLP" , "./INPUT/slp.clim.nc"                     , .false. ,  1.0
"ATM" , "p_bot"         , "SLP" , "./INPUT/slp.clim.nc"                     , .false. ,  1.0
"ATM" , "t_bot"         , "T_10_MOD"    , "./INPUT/t_10_mod.clim.nc"     , .false. ,  1.0
"ATM" , "sphum_bot"     , "Q_10_MOD"    , "./INPUT/q_10_mod.clim.nc"     , .false. ,  1.0
"ATM" , "u_bot"         , "U_10_MOD"    , "./INPUT/u_10_mod.clim.nc"     , .false. ,  1.0
"ATM" , "v_bot"         , "V_10_MOD"    , "./INPUT/v_10_mod.clim.nc"     , .false. ,  1.0
"ATM" , "z_bot"         , ""            , ""                             , .false. , 10.0
"ATM" , "gust"          , ""            , ""                             , .false. ,  0.0
"ICE" , "lw_flux_dn"    , "LWDN_MOD"    , "./INPUT/ncar_rad_clim.nc"     , .false. ,  1.0
"ICE" , "sw_flux_vis_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad_clim.nc", .false. , 0.285
"ICE" , "sw_flux_vis_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad_clim.nc", .false. , 0.285
"ICE" , "sw_flux_nir_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad_clim.nc", .false. , 0.215
"ICE" , "sw_flux_nir_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad_clim.nc", .false. , 0.215
"ICE" , "lprec"         , "RAIN"        , "./INPUT/ncar_precip_clim.nc"  , .false. ,  0.9933
"ICE" , "fprec"         , "SNOW"        , "./INPUT/ncar_precip_clim.nc"  , .false. ,  0.9933
"ICE" , "runoff"        , "runoff"      , "./INPUT/runoff.nc"            , .true.  ,  1.0
"ICE" , "calving"       , "CALVING"     , "./INPUT/example_calving.nc"   , .true.  ,  1.0
"ICE" , "dhdt"          , ""            , ""                             , .true.  ,  80.0
"ICE" , "dedt"          , ""            , ""                             , .true.  ,  2.0e-6
"ICE" , "drdt"          , ""            , ""                             , .true.  , 10.0
"ICE", "sic_obs"        , "SIC"         ,"./INPUT/sst_ice_clim.nc"       , .false. ,  0.00
"ICE", "sit_obs"        , "SIT"         ,"./INPUT/sst_ice_clim.nc"       , .false. ,  0.00
"ICE", "sst_obs"        , "SST"         ,"./INPUT/sst_ice_clim.nc"       , .false. ,  1.0
"LND" , "t_surf"        , ""            , ""                             , .true.  ,  273.0
"LND" , "t_ca"          , ""            , ""                             , .true.  ,  273.0
"LND" , "q_ca"          , ""            , ""                             , .true.  ,  0.0
"LND" , "rough_mom"     , ""            , ""                             , .true.  ,  0.01
"LND" , "rough_heat"    , ""            , ""                             , .true.  ,  0.1
"LND" , "albedo"        , ""            , ""                             , .true.  ,  0.1
"LND" , "t_ca"          , ""            , ""                             , .true.  ,  273.0
"LND" , "t_surf"        , ""            , ""                             , .true.  ,  273.0
"LND" , "sphum_surf"    , ""            , ""                             , .true.  ,  0.0
"LND" , "sphum_ca"      , ""            , ""                             , .true.  ,  0.0
"LND" , "t_flux"        , ""            , ""                             , .true.  ,  0.0
"LND" , "sphum_flux"    , ""            , ""                             , .true.  ,  0.0
"LND" , "lw_flux"       , ""            , ""                             , .true.  ,  0.0
"LND" , "sw_flux"       , ""            , ""                             , .true.  ,  0.0
"LND" , "lprec"         , ""            , ""                             , .true.  ,  0.0
"LND" , "fprec"         , ""            , ""                             , .true.  ,  0.0
"LND" , "dhdt"          , ""            , ""                             , .true.  ,  5.0
"LND" , "dedt"          , ""            , ""                             , .true.  ,  2e-6
"LND" , "dedq"          , ""            , ""                             , .true.  ,  0.0
"LND" , "drdt"          , ""            , ""                             , .true.  ,  5.0
"LND" , "drag_q"        , ""            , ""                             , .true.  ,  0.0
"LND" , "p_surf"        , ""            , ""                             , .true.  ,  1.e5
      </dataTable>  
      <dataTable order="append">
"ATM", "co2_flux_pcair_atm",           "",  "",                                    .false.,  284.262e-06
"ATM", "o2_flux_pcair_atm",            "",     "",                                 .false.,    0.21
"OCN", "runoff_alk_flux_ice_ocn",      "",      "",                                .false.,    0.5932e-3
"OCN", "runoff_dic_flux_ice_ocn",      "",      "",                                .false.,    0.96e-3
"OCN", "runoff_po4_flux_ice_ocn",      "",      "",                                .false.,    0.006792e-3
"OCN", "dry_dep_fed_flux_ice_ocn",     "FLUX",  "./INPUT/Soluble_Fe_Flux_PI.nc",   .false.,   -1.0
      </dataTable>  


     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">                         
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/MOM_input</dataSource> 
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/SIS_input</dataSource> 
     </dataFile>      
                                                                             
      <!--gridSpec mosaic datasets-->
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="gfdl">/archive/gold/datasets/GOLD_SIS/riga/mosaic.unpacked/grid_spec.nc</dataSource> 
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/mosaic.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_hgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic_tile1Xland_mosaic_tile1.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_hgrid.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mask.nc</dataSource>                            
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mosaic.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource> 
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_hgrid.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_mask.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_mosaic.nc</dataSource>                         
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_vgrid.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/README</dataSource>                                  
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/topog.nc</dataSource>                                
      </dataFile>                                                                                                                        

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/cfc.bc.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/geothermal_heating_cm2g.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/gustiness_qscat.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/OM3_zgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/seawifs_1998-2006_GOLD_smoothed_2X.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/sgs_h2.nc</dataSource>                            
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/tideamp.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/tke_tidal_cm2p2.nc</dataSource>                   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>                                                                                                                     

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ncar_precip_clim.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ncar_rad_clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/q_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/runoff.nc</dataSource>          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/salt_restore.nc</dataSource>    
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/slp.clim.nc</dataSource>        
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/sst_ice_clim.nc</dataSource>    
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/t_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/u_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/v_10_mod.clim.nc</dataSource>   
      </dataFile>                                                                                                   

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/GOLD_IC.2010.11.15.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocmip2_cfc.res.nc</dataSource>
      </dataFile>                                                                                              

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/31Layer_zgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/example_calving.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/temp_restore.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/GOLD_SIS_IC.nc</dataSource>
      </dataFile>
<!-- COBALT IC files -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_n_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_p_annual_01.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_i_annual_01.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_o_annual_01.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Alk.nc</dataSource>
      </dataFile>
<!-- Preind DIC -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Preind_DIC.nc</dataSource>
      </dataFile>
<!--CFCs/SF6 Boundary Conditions -->
      <dataFile label="input" target="INPUT/cfc.bc.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/John.Krasting/cwg/input/cfc/CFC_histories_revised_2015_20x20deg.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/MOM_GENERICS.res.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/John.Krasting/cwg/input/cfc/MOM_GENERICS_OM4p5.res.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
        <dataSource
platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc</dataSource>
      </dataFile>

<!-- COBALT BC files: Preind  -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_fan/Soluble_Fe_Flux_PI.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_fan/Mineral_Fe_Flux_PI.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_horowitz/depflux_total.mean.1860.nc</dataSource>
      </dataFile>

      <fieldTable order="append">
"namelists","ocean_mod","generic_age/*global*"
/

###.................................................
### BLING field table 
## jgj 2013/01/23 updated for BLING

"namelists","ocean_mod","generic_bling/*global*"
/

"namelists","ocean_mod","generic_bling"

init = f

#--------------------------------------------------------------------
# JGJ 2017/01/31
# field table entries for initialization of cobalt/bling tracers
# all unit conversions will be specified in the code based on
# valid src_var_unit and internal model unit.
# If field table src_var_unit does not match valid src_var_unit
# in code, model will give fatal error.
# valid src_var_units:
#    NO3, PO4, SiO4    : micromoles_per_liter
#    O2                : milliliters_per_liter
#    DIC, ALK          : micromoles_per_kg
#    all other fields  : none
# valid src_var_record : 0-12, where 0 is Annual, 1-12 for Jan-Dec
# 2015/10/05: Use annual data for WOA13 N, P, Si, O2 since monthly data does not extend to depth
# airsea and ice_ocean fluxes are handled by coupler, so are initialized in COBALT/BLING.
# 
# 2015/09/28 jgj updated to provide valid_min, valid_max for tracers to ensure
# tracers remain positive after interpolation
# note that values of valid_min and valid_max are in model units not src_units
# currently only alk, dic and htotal have both a valid_min and valid_max
# specified in field_table, but valid_max is ignored for now by code.
# as of 2015/10/06 src_var_record and src_var_gridspec are not yet implemented
#
# 2015/10/14 change valid_min for alk and dic to 0 since land values get filled with valid_min
#            also remove valid_max for alk and dic
#
# BLING needs: dic, alk, po4, o2, dop, fed, htotal, co3_ion, irr_mem, biomass_p, chl
# optional needs: po4_pre, alk_pre, dic_pre, dic_sat, htotal_sat, di14c, do14c
# dop = srdop in cobalt
# biomass = phytoplankton biomass = (nlg+nsm+ndi in COBALT) 
#------------------------------------------------------------------------------------------------
#
# O2 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_o_annual_01.nc)
# min = 0, max = 15.44 from input dataset
# multiply by (1000/22391.6)/1035 to convert from ml/l to mol/kg
o2_src_file = INPUT/woa13_all_o_annual_01.nc
o2_src_var_name = o_an
o2_src_var_unit = milliliters_per_liter
o2_dest_var_name =  o2
o2_dest_var_unit = mol kg-1
o2_src_var_record = 1
o2_src_var_gridspec = NONE
o2_valid_min = 0.0
#
# PO4 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_p_annual_01.nc)
# min = 0, max = 9.757 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
po4_src_file = INPUT/woa13_all_p_annual_01.nc
po4_src_var_name = p_an
po4_src_var_unit = micromoles_per_liter
po4_dest_var_name =  po4
po4_dest_var_unit = mol kg-1
po4_src_var_record = 1
po4_src_var_gridspec = NONE
po4_valid_min = 0.0
#
# PO4_pre from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_p_annual_01.nc)
# min = 0, max = 9.757 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
po4_pre_src_file = INPUT/woa13_all_p_annual_01.nc
po4_pre_src_var_name = p_an
po4_pre_src_var_unit = micromoles_per_liter
po4_pre_dest_var_name =  po4_pre
po4_pre_dest_var_unit = mol kg-1
po4_pre_src_var_record = 1
po4_pre_src_var_gridspec = NONE
po4_pre_valid_min = 0.0
#
# Alkalinity from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Alk.nc)
# min = 2171, max = 2462 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
alk_src_file = INPUT/Alk.nc
alk_src_var_name = Alk
alk_src_var_unit = micromoles_per_kg
alk_dest_var_name =  alk
alk_dest_var_unit = mol kg-1
alk_src_var_record = 1
alk_src_var_gridspec = NONE
alk_valid_min = 0.0
#
# alk_pre Alkalinity from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Alk.nc)
# min = 2171, max = 2462 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
alk_pre_src_file = INPUT/Alk.nc
alk_pre_src_var_name = Alk
alk_pre_src_var_unit = micromoles_per_kg
alk_pre_dest_var_name =  alk_pre
alk_pre_dest_var_unit = mol kg-1
alk_pre_src_var_record = 1
alk_pre_src_var_gridspec = NONE
alk_pre_valid_min = 0.0
#
# Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
dic_src_file = INPUT/Preind_DIC.nc
dic_src_var_name = Preind_DIC
dic_src_var_unit = micromoles_per_kg
dic_dest_var_name =  dic 
dic_dest_var_unit = mol kg-1
dic_src_var_record = 1
dic_src_var_gridspec = NONE
dic_valid_min = 0.0
#
# dic_pre from Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
dic_pre_src_file = INPUT/Preind_DIC.nc
dic_pre_src_var_name = Preind_DIC
dic_pre_src_var_unit = micromoles_per_kg
dic_pre_dest_var_name =  dic_pre 
dic_pre_dest_var_unit = mol kg-1
dic_pre_src_var_record = 1
dic_pre_src_var_gridspec = NONE
dic_pre_valid_min = 0.0
#
# dic_sat from Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
dic_sat_src_file = INPUT/Preind_DIC.nc
dic_sat_src_var_name = Preind_DIC
dic_sat_src_var_unit = micromoles_per_kg
dic_sat_dest_var_name =  dic_sat 
dic_sat_dest_var_unit = mol kg-1
dic_sat_src_var_record = 1
dic_sat_src_var_gridspec = NONE
dic_sat_valid_min = 0.0
#
# di14c from Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
di14c_src_file = INPUT/Preind_DIC.nc
di14c_src_var_name = Preind_DIC
di14c_src_var_unit = micromoles_per_kg
di14c_dest_var_name =  di14c
di14c_dest_var_unit = mol kg-1
di14c_src_var_record = 1
di14c_src_var_gridspec = NONE
di14c_valid_min = 0.0
#
# do14c from Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
do14c_src_file = INPUT/Preind_DIC.nc
do14c_src_var_name = Preind_DIC
do14c_src_var_unit = micromoles_per_kg
do14c_dest_var_name =  do14c
do14c_dest_var_unit = mol kg-1
do14c_src_var_record = 1
do14c_src_var_gridspec = NONE
do14c_valid_min = 0.0
#
# additional tracers from ESM2M-COBALT Preindustrial Control restart (/archive/jgj/datasets/retrospective/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc)
#
# min = 0 from input dataset
cased_src_file = INPUT/init_ocean_cobalt.res.nc
cased_src_var_name = cased
cased_src_var_unit = none
cased_dest_var_name =  cased
cased_dest_var_unit = mol kg-1
cased_src_var_record = 1
cased_src_var_gridspec = NONE
cased_valid_min = 0.0
#
# min = 0,  max = 4.446 from input dataset
chl_src_file = INPUT/init_ocean_cobalt.res.nc
chl_src_var_name = chl
chl_src_var_unit = none
chl_dest_var_name =  chl
chl_dest_var_unit = mol kg-1
chl_src_var_record = 1
chl_src_var_gridspec = NONE
chl_valid_min = 0.0
#
# min = 0,  max = 3.576E-04 from input dataset
co3_ion_src_file = INPUT/init_ocean_cobalt.res.nc
co3_ion_src_var_name = co3_ion
co3_ion_src_var_unit = none
co3_ion_dest_var_name =  co3_ion
co3_ion_dest_var_unit = mol kg-1
co3_ion_src_var_record = 1
co3_ion_src_var_gridspec = NONE
co3_ion_valid_min = 0.0
#
# min = -1.758E-11,  max = 1.758E-08 from input dataset
fed_src_file = INPUT/init_ocean_cobalt.res.nc
fed_src_var_name = fed
fed_src_var_unit = none
fed_dest_var_name =  fed
fed_dest_var_unit = mol kg-1
fed_src_var_record = 1
fed_src_var_gridspec = NONE
fed_valid_min = 0.0
#
# min = 10^-8.4=3.981E-09,  max = 10^-7.9 = 1.259E-08 from input dataset
htotal_src_file = INPUT/init_ocean_cobalt.res.nc
htotal_src_var_name = htotal
htotal_src_var_unit = none
htotal_dest_var_name =  htotal
htotal_dest_var_unit = mol kg-1
htotal_src_var_record = 1
htotal_src_var_gridspec = NONE
htotal_valid_min = 3.981E-09
htotal_valid_max = 1.259E-08
#
# htotal_sat identical to htotal
htotal_sat_src_file = INPUT/init_ocean_cobalt.res.nc
htotal_sat_src_var_name = htotal
htotal_sat_src_var_unit = none
htotal_sat_dest_var_name =  htotal_sat
htotal_sat_dest_var_unit = mol kg-1
htotal_sat_src_var_record = 1
htotal_sat_src_var_gridspec = NONE
htotal_sat_valid_min = 3.981E-09
htotal_sat_valid_max = 1.259E-08
#
# min = 0,  max = 137.7 from input dataset
irr_mem_src_file = INPUT/init_ocean_cobalt.res.nc
irr_mem_src_var_name = irr_mem
irr_mem_src_var_unit = none
irr_mem_dest_var_name =  irr_mem
irr_mem_dest_var_unit = mol kg-1
irr_mem_src_var_record = 1
irr_mem_src_var_gridspec = NONE
irr_mem_valid_min = 0.0
#
# min = -1.257E-11,  max = 3.831E-07 from input dataset
dop_src_file = INPUT/init_ocean_cobalt.res.nc
dop_src_var_name = srdop
dop_src_var_unit = none
dop_dest_var_name =  dop
dop_dest_var_unit = mol kg-1
dop_src_var_record = 1
dop_src_var_gridspec = NONE
dop_valid_min = 0.0
#
# phyto biomass
biomass_p_src_file = INPUT/init_ocean_cobalt_phyto_biomass.res.nc
biomass_p_src_var_name = phyto_biomass
biomass_p_src_var_unit = none
biomass_p_dest_var_name =  biomass_p
biomass_p_dest_var_unit = mol kg-1
biomass_p_src_var_record = 1
biomass_p_src_var_gridspec = NONE
biomass_p_valid_min = 0.0
#
/
###........................................
      </fieldTable>

      <diagTable order="append">
#================
# Additional DIAGNOSTICS
#================
#
#==================
# GENERIC TRACERS
#==================
#
## tracer quantities
"generic_tracers",          1,  "days", 1, "days", "time",
"generic_cfc","cfc11",     "cfc11",     "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc12",     "cfc12",     "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc11_stf", "cfc11_stf", "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc12_stf", "cfc12_stf", "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc11_stf_gas", "cfc11_stf_gas", "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc12_stf_gas", "cfc12_stf_gas", "generic_tracers","all",.true.,"none",2
"generic_sf6","sf6",        "sf6",        "generic_tracers","all",.true.,"none",2
"generic_sf6","sf6_stf",    "sf6_stf",    "generic_tracers","all",.true.,"none",2
"generic_age","age",        "age",        "generic_tracers","all",.true.,"none",2
"generic_age","age_stf",    "age_stf",    "generic_tracers","all",.true.,"none",2
"generic_argon","argon",    "argon",        "generic_tracers","all",.true.,"none",2
"generic_argon","argon_stf","argon_stf",    "generic_tracers","all",.true.,"none",2

#
"generic_tracers_z",          1,  "days", 1, "days", "time",
"generic_cfc_z","cfc11",     "cfc11",     "generic_tracers_z","all",.true.,"none",2
"generic_cfc_z","cfc12",     "cfc12",     "generic_tracers_z","all",.true.,"none",2
"generic_cfc_z","cfc11_stf", "cfc11_stf", "generic_tracers_z","all",.true.,"none",2
"generic_cfc_z","cfc12_stf", "cfc12_stf", "generic_tracers_z","all",.true.,"none",2
"generic_sf6_z","sf6",        "sf6",        "generic_tracers_z","all",.true.,"none",2
"generic_sf6_z","sf6_stf",    "sf6_stf",    "generic_tracers_z","all",.true.,"none",2
"generic_age_z","age",        "age",        "generic_tracers_z","all",.true.,"none",2
"generic_age_z","age_stf",    "age_stf",    "generic_tracers_z","all",.true.,"none",2
"generic_argon_z","argon",    "argon",      "generic_tracers_z","all",.true.,"none",2
"generic_argon_z","argon_stf","argon_stf",  "generic_tracers_z","all",.true.,"none",2
#
# Required cell measures
"ocean_model",  "volcello", "volcello",  "generic_tracers","all","mean","none",2 # Cell measure for 3d data
"ocean_model_z","volcello", "volcello",  "generic_tracers_z","all","mean","none",2 # Cell measure for 3d data
      </diagTable> 


     <csh>
        <![CDATA[
cat > $work/INPUT/MOM_override << OVERRIDE_EOF
#override DO_GEOTHERMAL = False
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override USE_OCMIP2_CFC = False
#override USE_IDEAL_AGE_TRACER = False
USE_generic_tracer = True
GENERIC_TRACER_IC_FILE = "_NULL_"
OVERRIDE_EOF

#Add null CFC's to a restart file
cd $work/INPUT
#ncap -O --script 'cfc11 = ptemp * 0.0 ; cfc12 = ptemp * 0.0 ; sf6 = ptemp * 0.0 ; age  = ptemp * 0.0 ; argon = ptemp * 0.0 ' GOLD_IC.2010.11.15.nc MOM_GENERICS.res.nc
#CFC is constant_init_tracer so the ice fluxes are not needed.
\rm ice_ocmip2_cfc.res.nc

     ]]></csh>

   </input>

   <runtime>
      <reference restart="$(REFERENCE)/archive/1x1m0d_128x1o/restart/19700201.tar"/>
      <reference restart="$(archiveDir)/../../$(platform)-prod/archive/1x1m0d_128x1o/restart/00010201.tar"/>
   </runtime>
   </experiment>

   <!--****************************************************************************************-->
   <!--***************************** 1/3 degree experiments        ****************************-->
   <!--****************************************************************************************-->
											      
   <freInclude name="OM4_033grid_data">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/grid_spec.nc</dataSource>
        <dataSource site="theia">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/grid_spec.nc</dataSource>
        <dataSource site="olcf">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/grid_spec.nc</dataSource>
        <dataSource site="gfdl">/archive/jpd/OM4/OM4_033/MOM6-examples/ice_ocean_SIS2/OM4_033/preprocessing/mosaic_ocean.1080x768/grid_spec.nc</dataSource> 
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/atmos_mosaic_tile1Xland_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/atmos_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/land_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/land_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/ocean_hgrid.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/ocean_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/ocean_mosaic.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/ocean_topog.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/seawifs_1998-2006_smoothed_2X.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/tidal_amplitude.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/WOA05_ptemp_salt_annual.nc </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/salt_restore.nc </dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_input</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_saltrestore</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/layer_coord.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/MOM_channels_global_025</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m_575m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_GS_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
      </dataFile>
<!-- "heat_content_vprec" are repeated in diag_table.MOM6
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
      </dataFile>
-->
      <diagTable order="append">
# MOM6 ocean diagnostics only used in a CORE/OMIP (no interactive atmos). 
# These terms provide diagnostics for the surface salinity / fresh water restoring. 
 "ocean_model", "vprec",              "vprec",              "ocean_annual", "all", "mean", "none",2
 "ocean_model", "salt_flux_restore",  "salt_flux_restore",  "ocean_annual", "all", "mean", "none",2

 "ocean_model", "vprec",              "vprec",              "ocean_month", "all", "mean", "none",2
 "ocean_model", "salt_flux_restore",  "salt_flux_restore",  "ocean_month", "all", "mean", "none",2
      </diagTable>

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_saltrestore','INPUT/MOM_override'
     </namelist>

     <csh type="always"><![CDATA[
if ( $currentSeg == 1 ) then
   set restart_flag = 'n'
else
   set restart_flag = 'r'
endif

ln -s $work/INPUT/ocean_topog.nc $work/INPUT/topog.nc 

touch $work/INPUT/MOM_override
touch $work/INPUT/SIS_override

      ]]></csh>
     </input>
   </freInclude>

   <experiment name="OM4_SIS2_033_baseline.$(MOM6_DATE)" inherit="OM4_SIS2_033_baseline"/>
   <experiment name="OM4_SIS2_033_baseline$(STATIC)" inherit="MOM6_SIS2_compile$(STATIC)">


    <input>
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_033grid_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE_data']/input/node())"/>
<!--Older runoff
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/runoff.nc</dataSource>
      </dataFile>
-->
      <!--The following is the same as OM4_025 dataTable except that the runoff is not on-grid-->
      <dataTable>
"ATM" , "p_surf"        , "SLP"         , "./INPUT/slp.clim.nc"          , "bilinear" ,  1.0
"ATM" , "p_bot"         , "SLP"         , "./INPUT/slp.clim.nc"          , "bilinear" ,  1.0
"ATM" , "t_bot"         , "T_10_MOD"    , "./INPUT/t_10_mod.clim.nc"     , "bilinear" ,  1.0
"ATM" , "sphum_bot"     , "Q_10_MOD"    , "./INPUT/q_10_mod.clim.nc"     , "bilinear" ,  1.0
"ATM" , "u_bot"         , "U_10_MOD"    , "./INPUT/u_10_mod.clim.nc"     , "bicubic",   1.0
"ATM" , "v_bot"         , "V_10_MOD"    , "./INPUT/v_10_mod.clim.nc"     , "bicubic",   1.0
"ATM" , "z_bot"         , ""            , ""                             , "bilinear" , 10.0
"ATM" , "gust"          , ""            , ""                             , "bilinear" ,  1.0e-4
"ICE" , "lw_flux_dn"    , "LWDN_MOD"    , "./INPUT/ncar_rad.clim.nc"     , "bilinear" ,  1.0
"ICE" , "sw_flux_vis_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.clim.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_vis_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.clim.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_nir_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.clim.nc"     , "bilinear" ,  0.215
"ICE" , "sw_flux_nir_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.clim.nc"     , "bilinear" ,  0.215
"ICE" , "lprec"         , "RAIN"        , "./INPUT/ncar_precip.clim.nc"  , "bilinear" ,  0.9933
"ICE" , "fprec"         , "SNOW"        , "./INPUT/ncar_precip.clim.nc"  , "bilinear" ,  0.9933
"ICE" , "runoff"        , "runoff"      , "./INPUT/runoff.daitren.clim.v2011.02.10a.1440x1080.nc", "bilinear" ,  1.0
"ICE" , "calving"       , ""            , ""                             , "none"  ,  0.0
"ICE" , "dhdt"          , ""            , ""                             , "none"  , 80.0
"ICE" , "dedt"          , ""            , ""                             , "none"  ,  2.0e-6
"ICE" , "drdt"          , ""            , ""                             , "none"  ,  10.0
"LND" , "t_surf"        , ""            , ""                             , "none"  ,  273.0
"LND" , "t_ca"          , ""            , ""                             , "none"  ,  273.0
"LND" , "q_ca"          , ""            , ""                             , "none"  ,  0.0
"LND" , "rough_mom"     , ""            , ""                             , "none"  ,  0.01
"LND" , "rough_heat"    , ""            , ""                             , "none"  ,  0.1
"LND" , "albedo"        , ""            , ""                             , "none"  ,  0.1
#"LND" , "t_ca"         , ""            , ""                             , "none"  ,  273.0
#"LND" , "t_surf"       , ""            , ""                             , "none"  ,  273.0
"LND" , "sphum_surf"    , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_ca"      , ""            , ""                             , "none"  ,  0.0
"LND" , "t_flux"        , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_flux"    , ""            , ""                             , "none"  ,  0.0
"LND" , "lw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "sw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "lprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "fprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "dhdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "dedt"          , ""            , ""                             , "none"  ,  2e-6
"LND" , "dedq"          , ""            , ""                             , "none"  ,  0.0
"LND" , "drdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "drag_q"        , ""            , ""                             , "none"  ,  0.0
"LND" , "p_surf"        , ""            , ""                             , "none"  ,  1.e5
      </dataTable> 

     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
     </dataFile>
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/field_table</dataSource>
     </dataFile>
      
      <diagTable>
$name
$baseDate
      </diagTable>

      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1900,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 3600,
       dt_atmos = 3600,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false. 
     </namelist>


    <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 8000000
            stack_size =0
      </namelist>
     <namelist name="fms_io_nml" >
         fms_netcdf_restart=.true.
         threading_read='multi'
         max_files_r = 200
         max_files_w = 200
!         checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>

     <namelist name="diag_manager_nml">
       max_axes = 150,
       max_files = 100,
       max_num_axis_sets = 100,
       max_input_fields = 699
       max_output_fields = 699
       mix_snapshot_average_fields=.false.
     </namelist>

     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

     <csh><![CDATA[
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 1080
#override NJGLOBAL = 768
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_annual.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_annual.nc"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
#override CHL_FILE              = "seawifs_1998-2006_smoothed_2X.nc"
#override SALT_RESTORE_FILE     = "salt_restore.nc"
#override TOPO_EDITS_FILE = ""
#override DO_GEOTHERMAL = False


MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 1080
#override NJGLOBAL = 768

SIS_OVERRIDE_EOF

     ]]></csh>
     
   </input>

   <runtime>   
      <regression name="basic">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O432']/node())"/> </run>
      </regression>
      <regression name="rts">
        <run days="15 16" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O432']/node())"/> </run>
        <!--the following should reproduce eachother but not the basic because basic uses mask_table-->
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512x2']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O648']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O864']/node())"/> </run>
      </regression>

      <regression name="debug">
        <run days="2"   > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O288']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O288']/node())"/> </run>
      </regression>

      <regression name="debugomp">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512x2']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512']/node())"/> </run>
      </regression>

      <reference restart="$(REFERENCE)/archive/1x1m0d_432x1o/restart/19000201.tar"/>
      <reference restart="$(archiveDir)/../../$(platform)-prod/archive/1x1m0d_432x1o/restart/19000201.tar"/>

   </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>
     
   </experiment>
   
   <!--****************************************************************************************-->
   <!--***************************** 1/2 degree experiments        ****************************-->
   <!--****************************************************************************************-->
											      
   <freInclude name="OM4_05grid_data">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/OMp5_mask_tables.tar</dataSource>
      </dataFile>
    </input>
   </freInclude>

   <freInclude name="OMp5_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/WOA05_pottemp_salt.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/MOM_saltrestore</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/salt_restore.v2015.12.03.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/runoff.daitren.clim.v2011.02.10a.720x576.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/seawifs_1998-2006_smoothed_2X.v2015.12.03.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/tidal_amplitude.v2015.12.03.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/pdata/gfdl_O/datasets/OM4_05/INPUT/geothermal_davies2013_v1.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/MOM_input</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/layer_coord.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/MOM_channels_global_025</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
      </dataFile>
<!-- "heat_content_vprec" are repeated in diag_table.MOM6
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.OM4</dataSource>
      </dataFile>
-->
      <diagTable order="append">
# MOM6 ocean diagnostics only used in a CORE/OMIP (no interactive atmos). 
# These terms provide diagnostics for the surface salinity / fresh water restoring. 
 "ocean_model", "vprec",              "vprec",              "ocean_annual", "all", "mean", "none",2
 "ocean_model", "salt_flux_restore",  "salt_flux_restore",  "ocean_annual", "all", "mean", "none",2

 "ocean_model", "vprec",              "vprec",              "ocean_month", "all", "mean", "none",2
 "ocean_model", "salt_flux_restore",  "salt_flux_restore",  "ocean_month", "all", "mean", "none",2
      </diagTable>
     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_saltrestore','INPUT/MOM_override'
     </namelist>

     <csh type="always"><![CDATA[
if ( $currentSeg == 1 ) then
   set restart_flag = 'n'
else
   set restart_flag = 'r'
endif

ln -s $work/INPUT/ocean_topog.nc $work/INPUT/topog.nc 

touch $work/INPUT/MOM_override
touch $work/INPUT/SIS_override
      ]]></csh>
     </input>
   </freInclude>


   <experiment name="OMp5_baseline.$(MOM6_DATE)" inherit="OMp5_baseline"/>
   <experiment name="OMp5_baseline$(STATIC)" inherit="MOM6_SIS2_compile$(STATIC)">

     <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1900,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 7200,
       dt_atmos = 7200,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false.
       atmos_nthreads = $atm_threads
       ocean_nthreads = $ocean_nthreads
debug_affinity =.true.
ncores_per_node = 36
use_hyper_thread = .false.

     </namelist>

     <namelist name="diag_manager_nml">
            flush_nc_files=.false.
            max_axes = 100,
            max_files = 63,
            max_num_axis_sets = 100,
            max_input_fields = 699
            max_output_fields = 699
            mix_snapshot_average_fields=.false.
     </namelist>


     <diagTable>
$name
$baseDate
     </diagTable>

     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_05/input.nml</dataSource>
     </dataFile>
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/field_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/field_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/field_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_05/field_table</dataSource>
     </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/data_table</dataSource>
      </dataFile>

      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_05grid_data']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='OMp5_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE_data']/input/node())"/>

  
      <csh><![CDATA[

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576

SIS_OVERRIDE_EOF
     ]]></csh>

   </input>
   <runtime>   
      <production simTime="$(PROD_SIMTIME)" units="years">
          <segment simTime="12" units="months"/>
          <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1300p5_production']/node())"/>
      </production>

      <regression name="basic">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1057p5']/node())"/> </run>
      </regression>
      <regression name="rts">
        <run days="15 16" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1057p5']/node())"/> </run>
        <!--the following should reproduce eachother but not the basic because basic uses mask_table-->
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512x2']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O648']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256']/node())"/> </run>
      </regression>

      <regression name="debugomp">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512x2']/node())"/> </run>
      </regression>

      <regression name="timing">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O842p5']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1300p5']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1057p5']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1608p5']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O2783p5']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O3314p5']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O3925p5']/node())"/> </run>

      </regression>

      <regression name="timings">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1152']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1057p5']/node())"/> </run>

        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128x2']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256x2']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512x2']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1152x2']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1057p5x2']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O842p5']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O648']/node())"/> </run>
      </regression>
      <regression name="debug">
        <run days="2"   > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
      </regression>
      <regression name="debug_ens">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
      </regression>
      <regression name="debug2">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O442p5']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O442p5']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O432']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O432']/node())"/> </run>
      </regression>
      <regression name="debug3">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O288']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O288']/node())"/> </run>
      </regression>
      <regression name="debugs">
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
        <run days="2" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128x2']/node())"/> </run>
        <run days="2" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128x2h']/node())"/> </run>
      </regression>
      <reference restart="$(REFERENCE)/archive/1x1m0d_1057x1o/restart/19000201.tar"/>


   </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>
   </experiment>

   <experiment name="OMp5_newgrid" inherit="OMp5_baseline">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_O/datasets/OM4_05/mosaic.v20180204.tar</dataSource>
      </dataFile>
    </input>
   </experiment>
   <experiment name="OMp5_MEKE" inherit="OMp5_baseline">
    <input>
     <csh>
        <![CDATA[
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override SMAGORINSKY_KH = True
#override SMAG_LAP_CONST = 0.15
#override MEKE_VISCOSITY_COEFF = 1.0
#override MEKE_KHTR_FAC = 0.3
#override MLE_FRONT_LENGTH = 100.
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
SIS_OVERRIDE_EOF
     ]]></csh>
    </input>
   </experiment>

   <experiment name="OMp5_BLING" inherit="OMp5_baseline">
    <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1948,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 1800,           ! for stability
       dt_atmos = 1800,           ! to match dt_cpld
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false.
       atmos_nthreads = $atm_threads
       ocean_nthreads = $ocean_nthreads
     </namelist>
     <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_BLING=.true.
       do_generic_CFC=.false.
       do_generic_SF6=.false.
       do_generic_age=.false.
       do_generic_argon=.false.
       do_generic_COBALT=.false.
       force_update_fluxes=.true.
      </namelist>
      <namelist name="generic_bling_nml">
       do_14c=.false.
       do_carbon=.true.
       do_carbon_pre=.false.
       do_po4_pre=.false.
       bury_caco3=.true.
       bury_pop=.true.
       co2_calc='mocsy'
      </namelist>
     <namelist name="diag_manager_nml">
       max_files = 400
       flush_nc_files=.false.
       max_axes = 400,
       max_num_axis_sets = 400,
       max_input_fields = 1200
       max_output_fields = 1800
       mix_snapshot_average_fields=.false.
     </namelist>
     <namelist name="xgrid_nml">
       make_exchange_reproduce = .true.
       interp_method = 'second_order'
     </namelist>
     <namelist name="fms_nml">
       clock_grain='ROUTINE'
       clock_flags='NONE'
       domains_stack_size = 8000000
       stack_size =0
     </namelist>
     <namelist name="fms_io_nml" >
       fms_netcdf_restart=.true.
       threading_read='multi'
       max_files_r = 800
       max_files_w = 800
       checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>
     <namelist name="atmos_model_nml" >
       layout= 0, 0
     </namelist>


     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override'  
     </namelist>

     <namelist name="SIS_input_nml" >
        output_directory = './',
        input_filename = '$restart_flag'
        restart_input_dir = 'INPUT/',
        restart_output_dir = 'RESTART/',
        parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_diurnal','INPUT/SIS_override' 
     </namelist>

     <diagTable>
$name
$baseDate
     </diagTable>

     <!--Append BLING tables to parent baseline tables-->
     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_BLING</dataSource>
     </dataFile>

      <dataTable order="append">
"ATM", "c14o2_flux_pcair_atm",         "",      "",                                "none",  284.262e-06
"ATM", "co2_flux_pcair_atm",           "",      "",                                "none",  284.262e-06
"ATM", "o2_flux_pcair_atm",            "",      "",                                "none",    0.21
"OCN", "runoff_alk_flux_ice_ocn",      "",      "",                                "none",    0.5932e-3
"OCN", "runoff_dic_flux_ice_ocn",      "",      "",                                "none",    0.96e-3
"OCN", "runoff_po4_flux_ice_ocn",      "",      "",                                "none",    0.006792e-3
"OCN", "dry_dep_fed_flux_ice_ocn",     "FLUX",  "./INPUT/Soluble_Fe_Flux_PI.nc",   "bilinear",   -1.0
      </dataTable>  
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/BC/TOPAZ/deposition_fan/Soluble_Fe_Flux_PI.nc</dataSource>
      </dataFile>

      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_05grid_data']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='OMp5_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--CORE2 forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE2_data']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='CORE2_data_table']/input/node())"/>
      <!--BLING specific datasets and tables-->
      <!--COBALT IC datasets used in BLING field_table-->
      <xi:include xpointer="xpointer(//freInclude[@name='OBGC_data_set']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='BLING_field_table']/input/node())"/>

     <csh>
        <![CDATA[
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override DT = 1800
#override DT_THERM = 7200  
USE_generic_tracer = True
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override U_TRUNC_FILE = "SIS_U_truncations"
#override V_TRUNC_FILE = "SIS_V_truncations"
#override MIN_OCN_INTERTIAL_H = 2.

#override ADD_DIURNAL_SW = True 
#override ICE_STATS_INTERVAL = 30
SIS_OVERRIDE_EOF

     ]]></csh>

   </input>

   </experiment>

  <freInclude name="OBGC_data_set">
    <input>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/woa13/woa13_all_n_annual_01.nc</dataSource>
       </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/woa13/woa13_all_p_annual_01.nc</dataSource>
       </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/woa13/woa13_all_i_annual_01.nc</dataSource>
       </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/woa13/woa13_all_o_annual_01.nc</dataSource>
       </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/glodap/20160927/Alk.nc</dataSource>
       </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/glodap/20160927/Preind_DIC.nc</dataSource>
       </dataFile>
      <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/IC/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc</dataSource>
      </dataFile>
     <dataFile label="input" target="INPUT/init_ocean_cobalt_phyto_biomass.res.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/ESM4/OBGC/IC/BLING/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt_phyto_biomass.res.nc</dataSource>
     </dataFile>
    </input>
  </freInclude>
    <freInclude name="BLING_field_table">
    <input>
      <!-- BLING field table (GLODAPv1 Preind DIC) -->
      <fieldTable order="append">
####.................................................
### atmos co2 field table for CMIP6 Jan 1 1850
## jgj 2016/11/29

# CO2 tracer
## Note: atm transport and land model expect moist mmr.
##       set co2 units: kg/kg  (mass mixing ratio) for both atm and lnd field table entries.
##       convert atm IC field table entry from dry vmr value to **dry** mmr
## Note: for atm cold start from constant co2 value, instead of using field table to initialize co2,
##       create atmos_tracers.res.nc with co2 moist mmr values
##       WTMAIR = 2.896440E+01 WTMCO2   =  44.00995
##       CMIP6 Jan 1 1850 co2 = 284.262e-6
#
 

###.................................................
### BLING field table 
## jgj 2013/01/23 updated for BLING

"namelists","ocean_mod","generic_bling/*global*"
/

"namelists","ocean_mod","generic_bling"

init = f

#--------------------------------------------------------------------
# JGJ 2017/01/31
# field table entries for initialization of cobalt/bling tracers
# all unit conversions will be specified in the code based on
# valid src_var_unit and internal model unit.
# If field table src_var_unit does not match valid src_var_unit
# in code, model will give fatal error.
# valid src_var_units:
#    NO3, PO4, SiO4    : micromoles_per_liter
#    O2                : milliliters_per_liter
#    DIC, ALK          : micromoles_per_kg
#    all other fields  : none
# valid src_var_record : 0-12, where 0 is Annual, 1-12 for Jan-Dec
# 2015/10/05: Use annual data for WOA13 N, P, Si, O2 since monthly data does not extend to depth
# airsea and ice_ocean fluxes are handled by coupler, so are initialized in COBALT/BLING.
# 
# 2015/09/28 jgj updated to provide valid_min, valid_max for tracers to ensure
# tracers remain positive after interpolation
# note that values of valid_min and valid_max are in model units not src_units
# currently only alk, dic and htotal have both a valid_min and valid_max
# specified in field_table, but valid_max is ignored for now by code.
# as of 2015/10/06 src_var_record and src_var_gridspec are not yet implemented
#
# 2015/10/14 change valid_min for alk and dic to 0 since land values get filled with valid_min
#            also remove valid_max for alk and dic
#
# BLING needs: dic, alk, po4, o2, dop, fed, htotal, co3_ion, irr_mem, biomass_p, chl
# optional needs: po4_pre, alk_pre, dic_pre, dic_sat, htotal_sat, di14c, do14c
# dop = srdop in cobalt
# biomass = phytoplankton biomass = (nlg+nsm+ndi in COBALT) 
#------------------------------------------------------------------------------------------------
#
# O2 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_o_annual_01.nc)
# min = 0, max = 15.44 from input dataset
# multiply by (1000/22391.6)/1035 to convert from ml/l to mol/kg
o2_src_file = INPUT/woa13_all_o_annual_01.nc
o2_src_var_name = o_an
o2_src_var_unit = milliliters_per_liter
o2_dest_var_name =  o2
o2_dest_var_unit = mol kg-1
o2_src_var_record = 1
o2_src_var_gridspec = NONE
o2_valid_min = 0.0
#
# PO4 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_p_annual_01.nc)
# min = 0, max = 9.757 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
po4_src_file = INPUT/woa13_all_p_annual_01.nc
po4_src_var_name = p_an
po4_src_var_unit = micromoles_per_liter
po4_dest_var_name =  po4
po4_dest_var_unit = mol kg-1
po4_src_var_record = 1
po4_src_var_gridspec = NONE
po4_valid_min = 0.0
#
# PO4_pre from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_p_annual_01.nc)
# min = 0, max = 9.757 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
po4_pre_src_file = INPUT/woa13_all_p_annual_01.nc
po4_pre_src_var_name = p_an
po4_pre_src_var_unit = micromoles_per_liter
po4_pre_dest_var_name =  po4_pre
po4_pre_dest_var_unit = mol kg-1
po4_pre_src_var_record = 1
po4_pre_src_var_gridspec = NONE
po4_pre_valid_min = 0.0
#
# Alkalinity from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Alk.nc)
# min = 2171, max = 2462 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
alk_src_file = INPUT/Alk.nc
alk_src_var_name = Alk
alk_src_var_unit = micromoles_per_kg
alk_dest_var_name =  alk
alk_dest_var_unit = mol kg-1
alk_src_var_record = 1
alk_src_var_gridspec = NONE
alk_valid_min = 0.0
#
# alk_pre Alkalinity from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Alk.nc)
# min = 2171, max = 2462 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
alk_pre_src_file = INPUT/Alk.nc
alk_pre_src_var_name = Alk
alk_pre_src_var_unit = micromoles_per_kg
alk_pre_dest_var_name =  alk_pre
alk_pre_dest_var_unit = mol kg-1
alk_pre_src_var_record = 1
alk_pre_src_var_gridspec = NONE
alk_pre_valid_min = 0.0
#
# Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
dic_src_file = INPUT/Preind_DIC.nc
dic_src_var_name = Preind_DIC
dic_src_var_unit = micromoles_per_kg
dic_dest_var_name =  dic 
dic_dest_var_unit = mol kg-1
dic_src_var_record = 1
dic_src_var_gridspec = NONE
dic_valid_min = 0.0
#
# dic_pre from Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
dic_pre_src_file = INPUT/Preind_DIC.nc
dic_pre_src_var_name = Preind_DIC
dic_pre_src_var_unit = micromoles_per_kg
dic_pre_dest_var_name =  dic_pre 
dic_pre_dest_var_unit = mol kg-1
dic_pre_src_var_record = 1
dic_pre_src_var_gridspec = NONE
dic_pre_valid_min = 0.0
#
# dic_sat from Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
dic_sat_src_file = INPUT/Preind_DIC.nc
dic_sat_src_var_name = Preind_DIC
dic_sat_src_var_unit = micromoles_per_kg
dic_sat_dest_var_name =  dic_sat 
dic_sat_dest_var_unit = mol kg-1
dic_sat_src_var_record = 1
dic_sat_src_var_gridspec = NONE
dic_sat_valid_min = 0.0
#
# di14c from Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
di14c_src_file = INPUT/Preind_DIC.nc
di14c_src_var_name = Preind_DIC
di14c_src_var_unit = micromoles_per_kg
di14c_dest_var_name =  di14c
di14c_dest_var_unit = mol kg-1
di14c_src_var_record = 1
di14c_src_var_gridspec = NONE
di14c_valid_min = 0.0
#
# do14c from Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
do14c_src_file = INPUT/Preind_DIC.nc
do14c_src_var_name = Preind_DIC
do14c_src_var_unit = micromoles_per_kg
do14c_dest_var_name =  do14c
do14c_dest_var_unit = mol kg-1
do14c_src_var_record = 1
do14c_src_var_gridspec = NONE
do14c_valid_min = 0.0
#
# additional tracers from ESM2M-COBALT Preindustrial Control restart (/archive/jgj/datasets/retrospective/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc)
#
# min = 0 from input dataset
cased_src_file = INPUT/init_ocean_cobalt.res.nc
cased_src_var_name = cased
cased_src_var_unit = none
cased_dest_var_name =  cased
cased_dest_var_unit = mol kg-1
cased_src_var_record = 1
cased_src_var_gridspec = NONE
cased_valid_min = 0.0
#
# min = 0,  max = 4.446 from input dataset
chl_src_file = INPUT/init_ocean_cobalt.res.nc
chl_src_var_name = chl
chl_src_var_unit = none
chl_dest_var_name =  chl
chl_dest_var_unit = mol kg-1
chl_src_var_record = 1
chl_src_var_gridspec = NONE
chl_valid_min = 0.0
#
# min = 0,  max = 3.576E-04 from input dataset
co3_ion_src_file = INPUT/init_ocean_cobalt.res.nc
co3_ion_src_var_name = co3_ion
co3_ion_src_var_unit = none
co3_ion_dest_var_name =  co3_ion
co3_ion_dest_var_unit = mol kg-1
co3_ion_src_var_record = 1
co3_ion_src_var_gridspec = NONE
co3_ion_valid_min = 0.0
#
# min = -1.758E-11,  max = 1.758E-08 from input dataset
fed_src_file = INPUT/init_ocean_cobalt.res.nc
fed_src_var_name = fed
fed_src_var_unit = none
fed_dest_var_name =  fed
fed_dest_var_unit = mol kg-1
fed_src_var_record = 1
fed_src_var_gridspec = NONE
fed_valid_min = 0.0
#
# min = 10^-8.4=3.981E-09,  max = 10^-7.9 = 1.259E-08 from input dataset
htotal_src_file = INPUT/init_ocean_cobalt.res.nc
htotal_src_var_name = htotal
htotal_src_var_unit = none
htotal_dest_var_name =  htotal
htotal_dest_var_unit = mol kg-1
htotal_src_var_record = 1
htotal_src_var_gridspec = NONE
htotal_valid_min = 3.981E-09
htotal_valid_max = 1.259E-08
#
# htotal_sat identical to htotal
htotal_sat_src_file = INPUT/init_ocean_cobalt.res.nc
htotal_sat_src_var_name = htotal
htotal_sat_src_var_unit = none
htotal_sat_dest_var_name =  htotal_sat
htotal_sat_dest_var_unit = mol kg-1
htotal_sat_src_var_record = 1
htotal_sat_src_var_gridspec = NONE
htotal_sat_valid_min = 3.981E-09
htotal_sat_valid_max = 1.259E-08
#
# min = 0,  max = 137.7 from input dataset
irr_mem_src_file = INPUT/init_ocean_cobalt.res.nc
irr_mem_src_var_name = irr_mem
irr_mem_src_var_unit = none
irr_mem_dest_var_name =  irr_mem
irr_mem_dest_var_unit = mol kg-1
irr_mem_src_var_record = 1
irr_mem_src_var_gridspec = NONE
irr_mem_valid_min = 0.0
#
# min = -1.257E-11,  max = 3.831E-07 from input dataset
dop_src_file = INPUT/init_ocean_cobalt.res.nc
dop_src_var_name = srdop
dop_src_var_unit = none
dop_dest_var_name =  dop
dop_dest_var_unit = mol kg-1
dop_src_var_record = 1
dop_src_var_gridspec = NONE
dop_valid_min = 0.0
#
# phyto biomass
biomass_p_src_file = INPUT/init_ocean_cobalt_phyto_biomass.res.nc
biomass_p_src_var_name = phyto_biomass
biomass_p_src_var_unit = none
biomass_p_dest_var_name =  biomass_p
biomass_p_dest_var_unit = mol kg-1
biomass_p_src_var_record = 1
biomass_p_src_var_gridspec = NONE
biomass_p_valid_min = 0.0
#
/
###........................................
      </fieldTable>  
    </input>
  </freInclude>
   <experiment name="OMp5_baseline_ens4" inherit="OMp5_baseline">
    <input>
      <namelist name="ensemble_nml">
        ensemble_size=4
     </namelist>
    </input>
   </experiment>

   <experiment name="OMp5_baseline_NEMO" inherit="OMp5_baseline">
    <input>
      <csh><![CDATA[
cat > $work/INPUT/MOM_override << OVERRIDE_EOF
#override EQN_OF_STATE = "NEMO"
USE_CONTEMP_ABSSAL = True
#override TFREEZE_FORM = "TEOS10"

OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576

SIS_OVERRIDE_EOF
     ]]></csh>

      <diagTable order="append">
#================
# Additional DIAGNOSTICS
#================
 "ocean_model", "contemp", "contemp", "ocean_annual",        "all", "mean", "none",2  
 "ocean_model", "abssalt", "abssalt", "ocean_annual",        "all", "mean", "none",2
 "ocean_model", "conSST",  "conSST",  "ocean_annual",         "all", "mean", "none",2  
 "ocean_model", "absSSS",  "absSSS",  "ocean_annual",         "all", "mean", "none",2  
#
 "ocean_model_z", "contemp", "contemp", "ocean_annual_z",        "all", "mean", "none",2  
 "ocean_model_z", "contemp", "contemp", "ocean_month_z",         "all", "mean", "none",2  
 "ocean_model_z", "abssalt", "abssalt", "ocean_annual_z",        "all", "mean", "none",2
 "ocean_model_z", "abssalt", "abssalt", "ocean_month_z",         "all", "mean", "none",2
     </diagTable>
    </input>
   </experiment>

     
   <experiment name="OMp5_baseline_hthread" inherit="OMp5_baseline">
     <input>
  
     </input>

   <runtime>
      <regression name="timings">
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1152']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1057p5']/node())"/> </run>

        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128x2']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256x2']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O512x2']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1152x2']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O1057p5x2']/node())"/> </run>
      </regression>
      <regression name="timing">
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256']/node())"/> </run>
        <run months="1" overrideParams="coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=36"> <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O256x2']/node())"/> </run>
      </regression>
   </runtime>
     
   </experiment>

 <experiment name="OM4_SIS2_05_CORE2_COBALT_combined_cfc_sf6_abio2_mocsy_MEKE" inherit="OM4_SIS2_05_CORE2_COBALT_combined_cfc_sf6_abio2_mocsy">
    <input>
      <csh><![CDATA[
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override SMAGORINSKY_KH = True
#override SMAG_LAP_CONST = 0.15
#override MEKE_VISCOSITY_COEFF = 1.0
#override MEKE_KHTR_FAC = 0.3
#override KHTR = 0.0
#override KH = 0.0
#override MLE_FRONT_LENGTH = 100.
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override DT = 1800
#override DT_THERM = 7200  

USE_generic_tracer = True
#override CHL_FROM_FILE = False
GENERIC_TRACER_IC_FILE = "MOM_GENERICS.res.nc"

#override ENERGYSAVEDAYS = 30

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override U_TRUNC_FILE = "SIS_U_truncations"
#override V_TRUNC_FILE = "SIS_V_truncations"
#override MIN_OCN_INTERTIAL_H = 2.

#override ADD_DIURNAL_SW = True 
#override ICE_STATS_INTERVAL = 30
SIS_OVERRIDE_EOF
     ]]></csh>
    </input>
 </experiment>
 <experiment name="OM4_SIS2_05_CORE2_COBALT_combined_cfc_sf6_abio2_mocsy_readCHL" inherit="OM4_SIS2_05_CORE2_COBALT_combined_cfc_sf6_abio2_mocsy">
    <input>
      <csh><![CDATA[
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override DT = 1800
#override DT_THERM = 7200  

USE_generic_tracer = True
#override CHL_FROM_FILE = True
GENERIC_TRACER_IC_FILE = "MOM_GENERICS.res.nc"

#override ENERGYSAVEDAYS = 30

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override U_TRUNC_FILE = "SIS_U_truncations"
#override V_TRUNC_FILE = "SIS_V_truncations"
#override MIN_OCN_INTERTIAL_H = 2.

#override ADD_DIURNAL_SW = True 
#override ICE_STATS_INTERVAL = 30
SIS_OVERRIDE_EOF
     ]]></csh>
    </input>
 </experiment>
 <experiment name="OM4_SIS2_05_CORE2_COBALT_combined_cfc_sf6_abio2_mocsy" inherit="OM4_SIS2_05_CORE2_COBALT_combined_cfc_sf6_abio2">
    <input>
     <namelist name="generic_COBALT_nml">
       co2_calc='mocsy'
     </namelist>
    </input>
 </experiment>

 <experiment name="OM4_SIS2_05_CORE2_COBALT_combined_cfc_sf6_abio2" inherit="OMp5_baseline">

<description >
 2016/09/26 jpk
 Fixed typo in data_table (ab_co2* should be abco2*)

 2016/09/16 jpk
 Test of generic abiotic routine

 2016/08/17 jpk
 Based on JGJ's c14 test, but testing only CFCs SF6.

 2015/10/05 jgj
 global 1/2 degree z test case dynamic forcing with COBALT ocean biogeochemistry to test C14
 OM4_SIS2_CORE2_baseline plus mom6 2016.05.26, plus updates to ocean_shared for COBALT (merged into user/nnz/verona_dev_merge)
 diurnal_sw activated
 use annual WOA13 N,P,Si,O2 in COBALT field table
 keep dt at 1200
 THERMO_SPANS_COUPLING 

 ENERGYSAVEDAYS set to 30
 added ICE_STATS_INTERVAL set to 30 to decrease frequency of SIS date info saved to fms.out

2016/05/05 jgj
dt_cpld = 1800, dt_therm = 3600 
also change dt_atmos to 1800
THERMO_SPANS_COUPLING activated: dt_therm is 3600 by default in this version of MOM_parameter file 
Topo_edits activated by default in this version of MOM_parameter file 
sis_overrides for U_TRUNC_FILE, V_TRUNC_FILE, MIN_OCN_INTERTIAL_H = 2.
Run on Gaea C3/intel15

2016/05/24 jgj
Add updates to MOM6 to fix initialization issue and to correct tendency diagnostic terms (user/mjh/zdiag4cobalt )
Add updates to COBALT to avoid division by zero in debug mode.

2016/05/25 jgj
Switch to Preind DIC from GLODAP v1 
   co2_flux_pcair_atm = 286.0e-6
   co2_bot = 286.0e-6
   KD=2.0E-5  (was 2.0E-6)
   KHTH=300
   KHTR=300 
   turn on Polzin  (INT_TIDE_PROFILE = "POLZIN_09")

    </description>  

    <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1948,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 1800,           ! for stability
       dt_atmos = 1800,           ! to match dt_cpld
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false.
       atmos_nthreads = $atm_threads
       ocean_nthreads = $ocean_nthreads
     </namelist>
     <namelist name="xgrid_nml">
       make_exchange_reproduce = .true.
       interp_method = 'second_order'
     </namelist>
     <namelist name="fms_nml">
       clock_grain='ROUTINE'
       clock_flags='NONE'
       domains_stack_size = 8000000
       stack_size =0
     </namelist>
     <namelist name="fms_io_nml" >
       fms_netcdf_restart=.true.
       threading_read='multi'
       max_files_r = 800
       max_files_w = 800
       checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>

     <namelist name="atmos_model_nml" >
       layout= 0, 0
     </namelist>

     <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_abiotic=.true.
       do_generic_CFC=.true.
       do_generic_COBALT=.true.
       do_generic_TOPAZ=.false.
       do_generic_SF6=.true.
       force_update_fluxes=.true.
     </namelist>
     <namelist name="diag_manager_nml">
       max_files = 400
       flush_nc_files=.false.
       max_axes = 400,
       max_num_axis_sets = 400,
       max_input_fields = 1200
       max_output_fields = 1800
       mix_snapshot_average_fields=.false.
     </namelist>


      <csh><![CDATA[
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override DT = 1800
#override DT_THERM = 7200  

USE_generic_tracer = True
#override CHL_FROM_FILE = False
GENERIC_TRACER_IC_FILE = "MOM_GENERICS.res.nc"

#override ENERGYSAVEDAYS = 30

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override U_TRUNC_FILE = "SIS_U_truncations"
#override V_TRUNC_FILE = "SIS_V_truncations"
#override MIN_OCN_INTERTIAL_H = 2.

#override ADD_DIURNAL_SW = True 
#override ICE_STATS_INTERVAL = 30
SIS_OVERRIDE_EOF
     ]]></csh>

      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_05grid_data']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='OMp5_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--CORE2 forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE2_data']/input/node())"/>

      <diagTable>
$name
$baseDate
      </diagTable>

<!-- COBALT IC files -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_n_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_p_annual_01.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_i_annual_01.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_o_annual_01.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Alk.nc</dataSource>
      </dataFile>
<!-- Preind DIC -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Preind_DIC.nc</dataSource>
      </dataFile>
<!--CFCs/SF6 Boundary Conditions -->
      <dataFile label="input" target="INPUT/cfc.bc.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/John.Krasting/cwg/input/cfc/CFC_histories_revised_2015_20x20deg.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/MOM_GENERICS.res.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/John.Krasting/cwg/input/cfc/MOM_GENERICS_OM4p5.20170829.res.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
         <dataSource
platform="$(platform)">$(CMIP6_ESM4_ARCHIVE_ROOT)/OBGC/IC/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds_fedet_btf.ocean_cobalt.res.nc</dataSource>
      </dataFile>

<!-- COBALT BC files: Preind  -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_fan/Soluble_Fe_Flux_PI.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_fan/Mineral_Fe_Flux_PI.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_horowitz/depflux_total.mean.1860.nc</dataSource>
      </dataFile>

<!-- COBALT: grid specific -->
      <dataFile label="input" target="INPUT/news_nutrients.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(ESM4_ARCHIVE_ROOT)/news_nutrients_halfdeg_20151207.nc</dataSource>
      </dataFile>

<!-- COBALT: Preind data table -->
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.COBALT_1860_topaz_fe_20160718</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.COBALT_1860_topaz_fe_20160718</dataSource>
      </dataFile>

<!-- o2 gas exchange data table -->
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.o2_20151209</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.o2_20151209</dataSource>
      </dataFile>

<!-- 1850 preind co2 gas exchange data table -->
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.preind_co2_gas_exchange_20160718</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.preind_co2_gas_exchange_20160718</dataSource>
      </dataFile>

<!-- co2_bot 1850 data table -->
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.preind_co2_bot_20160718</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.preind_co2_bot_20160718</dataSource>
      </dataFile>

<!-- COBALT diag table -->
     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_BLING</dataSource>
     </dataFile>
<!--
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_with_z_20160610</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_with_z_20160610</dataSource>
      </dataFile>
-->

<!-- Generic Abiotic Input Files -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/John.Krasting/cwg/input/abiotic/GLODAP_fields.20160916.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/John.Krasting/cwg/input/abiotic/atm_delta_13C_14C.nc</dataSource>
      </dataFile>

<fieldTable order="append">
####.................................................
### COBALT field table for initializing tracers
## jgj 2016/07/18 updated for COBALT and 14C

"namelists","ocean_mod","generic_cobalt/*global*"
/

"namelists","ocean_mod","generic_cobalt"

init = f

# JGJ 2015/07/28
# field table entries for initialization of cobalt tracers
# all unit conversions will be specified in the code based on
# valid src_var_unit and internal model unit.
# If field table src_var_unit does not match valid src_var_unit
# in code, model will give fatal error.
# valid src_var_units:
#    NO3, PO4, SiO4    : micromoles_per_liter
#    O2                : milliliters_per_liter
#    DIC, ALK          : micromoles_per_kg
#    all other fields  : none
# valid src_var_record : 0-12, where 0 is Annual, 1-12 for Jan-Dec
# 2015/10/05: Use annual data for WOA13 N, P, Si, O2 since monthly data does not extend to depth
# airsea and ice_ocean fluxes are handled by coupler, so are initialized in COBALT.
# 
# 2015/09/28 jgj updated to provide valid_min, valid_max for tracers to ensure
# tracers remain positive after interpolation
# note that values of valid_min and valid_max are in model units not src_units
# currently only alk, dic and htotal have both a valid_min and valid_max
# specified in field_table, but valid_max is ignored for now by code.
# as of 2015/10/06 src_var_record and src_var_gridspec are not yet implemented
#
# 2015/10/14 change valid_min for alk and dic to 0 since land values get filled with valid_min
#            also remove valid_max for alk and dic
#
#------------------------------------------------------------------------------------------------
#
# NO3 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_n_annual_01.nc)
# min = 0, max = 65.08 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
no3_src_file = INPUT/woa13_all_n_annual_01.nc
no3_src_var_name = n_an
no3_src_var_unit = micromoles_per_liter
no3_dest_var_name =  no3
no3_dest_var_unit = mol kg-1
no3_src_var_record = 1
no3_src_var_gridspec = NONE
no3_valid_min = 0.0
#
# O2 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_o_annual_01.nc)
# min = 0, max = 15.44 from input dataset
# multiply by (1000/22391.6)/1035 to convert from ml/l to mol/kg
o2_src_file = INPUT/woa13_all_o_annual_01.nc
o2_src_var_name = o_an
o2_src_var_unit = milliliters_per_liter
o2_dest_var_name =  o2
o2_dest_var_unit = mol kg-1
o2_src_var_record = 1
o2_src_var_gridspec = NONE
o2_valid_min = 0.0
#
# PO4 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_p_annual_01.nc)
# min = 0, max = 9.757 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
po4_src_file = INPUT/woa13_all_p_annual_01.nc
po4_src_var_name = p_an
po4_src_var_unit = micromoles_per_liter
po4_dest_var_name =  po4
po4_dest_var_unit = mol kg-1
po4_src_var_record = 1
po4_src_var_gridspec = NONE
po4_valid_min = 0.0
#
# SIO4 from WOA2013  (/archive/mdteam/obs/NOAA-NODC/WOA13/v1.00a/woa13_all_i_annual_01.nc)
# min = 0, max = 267.3 from input dataset
# divide by 1035e3 to convert from umol/l to mol/kg
sio4_src_file = INPUT/woa13_all_i_annual_01.nc
sio4_src_var_name = i_an
sio4_src_var_unit = micromoles_per_liter
sio4_dest_var_name =  sio4
sio4_dest_var_unit = mol kg-1
sio4_src_var_record = 1
sio4_src_var_gridspec = NONE
sio4_valid_min = 0.0
#
# Alkalinity from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Alk.nc)
# min = 2171, max = 2462 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
alk_src_file = INPUT/Alk.nc
alk_src_var_name = Alk
alk_src_var_unit = micromoles_per_kg
alk_dest_var_name =  alk
alk_dest_var_unit = mol kg-1
alk_src_var_record = 1
alk_src_var_gridspec = NONE
alk_valid_min = 0.0
#
# Preind DIC from GLODAP  (/archive/jgj/datasets/retrospective/glodap/20151013/Preind_DIC.nc)
# min = 1837, max = 2406 from input dataset
# divide by 1e6 to convert from umol/kg to mol/kg
dic_src_file = INPUT/Preind_DIC.nc
dic_src_var_name = Preind_DIC
dic_src_var_unit = micromoles_per_kg
dic_dest_var_name =  dic
dic_dest_var_unit = mol kg-1
dic_src_var_record = 1
dic_src_var_gridspec = NONE
dic_valid_min = 0.0
#
# additional tracers from ESM2M-COBALT Preindustrial Control restart (/archive/jgj/datasets/retrospective/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc)
# min =  -2.203E-14, max =  1.347E-08 from input dataset
# no unit conversion necessary
cadet_arag_src_file = INPUT/init_ocean_cobalt.res.nc
cadet_arag_src_var_name = cadet_arag
cadet_arag_src_var_unit = none
cadet_arag_dest_var_name =  cadet_arag
cadet_arag_dest_var_unit = mol kg-1
cadet_arag_src_var_record = 1
cadet_arag_src_var_gridspec = NONE
cadet_arag_valid_min = 0.0
#
# min = -1.774E-15, max =  1.711E-08 from input dataset
cadet_calc_src_file = INPUT/init_ocean_cobalt.res.nc
cadet_calc_src_var_name = cadet_calc
cadet_calc_src_var_unit = none
cadet_calc_dest_var_name =  cadet_calc
cadet_calc_dest_var_unit = mol kg-1
cadet_calc_src_var_record = 1
cadet_calc_src_var_gridspec = NONE
cadet_calc_valid_min = 0.0
#
# NOTE: CASED = 0 at all K except K=1 from input dataset
# min = 0,  max = 5273. from input dataset
cased_src_file = INPUT/init_ocean_cobalt.res.nc
cased_src_var_name = cased
cased_src_var_unit = none
cased_dest_var_name =  cased
cased_dest_var_unit = mol kg-1
cased_src_var_record = 1
cased_src_var_gridspec = NONE
cased_valid_min = 0.0
#
# min = 0,  max = 4.446 from input dataset
chl_src_file = INPUT/init_ocean_cobalt.res.nc
chl_src_var_name = chl
chl_src_var_unit = none
chl_dest_var_name =  chl
chl_dest_var_unit = mol kg-1
chl_src_var_record = 1
chl_src_var_gridspec = NONE
chl_valid_min = 0.0
#
# min = 0,  max = 3.576E-04 from input dataset
co3_ion_src_file = INPUT/init_ocean_cobalt.res.nc
co3_ion_src_var_name = co3_ion
co3_ion_src_var_unit = none
co3_ion_dest_var_name =  co3_ion
co3_ion_dest_var_unit = mol kg-1
co3_ion_src_var_record = 1
co3_ion_src_var_gridspec = NONE
co3_ion_valid_min = 0.0
#
# min = -1.758E-11,  max = 1.758E-08 from input dataset
fed_src_file = INPUT/init_ocean_cobalt.res.nc
fed_src_var_name = fed
fed_src_var_unit = none
fed_dest_var_name =  fed
fed_dest_var_unit = mol kg-1
fed_src_var_record = 1
fed_src_var_gridspec = NONE
fed_valid_min = 0.0
#
# min = 0,  max = 1.715E-11 from input dataset
fedi_src_file = INPUT/init_ocean_cobalt.res.nc
fedi_src_var_name = fedi
fedi_src_var_unit = none
fedi_dest_var_name =  fedi
fedi_dest_var_unit = mol kg-1
fedi_src_var_record = 1
fedi_src_var_gridspec = NONE
fedi_valid_min = 0.0
#
# min = 0,  max = 4.724E-11 from input dataset
felg_src_file = INPUT/init_ocean_cobalt.res.nc
felg_src_var_name = felg
felg_src_var_unit = none
felg_dest_var_name =  felg
felg_dest_var_unit = mol kg-1
felg_src_var_record = 1
felg_src_var_gridspec = NONE
felg_valid_min = 0.0
#
# min = 0,  max = 7.912E-11 from input dataset
fesm_src_file = INPUT/init_ocean_cobalt.res.nc
fesm_src_var_name = fesm
fesm_src_var_unit = none
fesm_dest_var_name =  fesm
fesm_dest_var_unit = mol kg-1
fesm_src_var_record = 1
fesm_src_var_gridspec = NONE
fesm_valid_min = 0.0
#
# min = 10^-8.4=3.981E-09,  max = 10^-7.9 = 1.259E-08 from input dataset
htotal_src_file = INPUT/init_ocean_cobalt.res.nc
htotal_src_var_name = htotal
htotal_src_var_unit = none
htotal_dest_var_name =  htotal
htotal_dest_var_unit = mol kg-1
htotal_src_var_record = 1
htotal_src_var_gridspec = NONE
htotal_valid_min = 3.981E-09
htotal_valid_max = 1.259E-08
#
# min = 0,  max = 137.7 from input dataset
irr_mem_src_file = INPUT/init_ocean_cobalt.res.nc
irr_mem_src_var_name = irr_mem
irr_mem_src_var_unit = none
irr_mem_dest_var_name =  irr_mem
irr_mem_dest_var_unit = mol kg-1
irr_mem_src_var_record = 1
irr_mem_src_var_gridspec = NONE
irr_mem_valid_min = 0.0
#
# min = 0,  max = 5.812E-07 from input dataset
ldon_src_file = INPUT/init_ocean_cobalt.res.nc
ldon_src_var_name = ldon
ldon_src_var_unit = none
ldon_dest_var_name =  ldon
ldon_dest_var_unit = mol kg-1
ldon_src_var_record = 1
ldon_src_var_gridspec = NONE
ldon_valid_min = 0.0
#
# min = 0,  max = 3.576E-08 from input dataset
ldop_src_file = INPUT/init_ocean_cobalt.res.nc
ldop_src_var_name = ldop
ldop_src_var_unit = none
ldop_dest_var_name =  ldop
ldop_dest_var_unit = mol kg-1
ldop_src_var_record = 1
ldop_src_var_gridspec = NONE
ldop_valid_min = 0.0
#
# min = 0,  max = 0.006529 from input dataset
lith_src_file = INPUT/init_ocean_cobalt.res.nc
lith_src_var_name = lith
lith_src_var_unit = none
lith_dest_var_name =  lith
lith_dest_var_unit = mol kg-1
lith_src_var_record = 1
lith_src_var_gridspec = NONE
lith_valid_min = 0.0
#
# min = -1.385E-11,  max = 8.246E-06 from input dataset
nh4_src_file = INPUT/init_ocean_cobalt.res.nc
nh4_src_var_name = nh4
nh4_src_var_unit = none
nh4_dest_var_name =  nh4
nh4_dest_var_unit = mol kg-1
nh4_src_var_record = 1
nh4_src_var_gridspec = NONE
nh4_valid_min = 0.0
#
# min = -2.922E-11,  max = 9.184E-07 from input dataset
nbact_src_file = INPUT/init_ocean_cobalt.res.nc
nbact_src_var_name = nbact
nbact_src_var_unit = none
nbact_dest_var_name =  nbact
nbact_dest_var_unit = mol kg-1
nbact_src_var_record = 1
nbact_src_var_gridspec = NONE
nbact_valid_min = 0.0
#
# min = -6.356E-11,  max = 1.154E-07 from input dataset
ndi_src_file = INPUT/init_ocean_cobalt.res.nc
ndi_src_var_name = ndi
ndi_src_var_unit = none
ndi_dest_var_name =  ndi
ndi_dest_var_unit = mol kg-1
ndi_src_var_record = 1
ndi_src_var_gridspec = NONE
ndi_valid_min = 0.0
#
# min = -3.206E-10,  max = 9.267E-07 from input dataset
nlg_src_file = INPUT/init_ocean_cobalt.res.nc
nlg_src_var_name = nlg
nlg_src_var_unit = none
nlg_dest_var_name =  nlg
nlg_dest_var_unit = mol kg-1
nlg_src_var_record = 1
nlg_src_var_gridspec = NONE
nlg_valid_min = 0.0
#
# min = -3.142E-10,  max = 2.285E-06 from input dataset
nsm_src_file = INPUT/init_ocean_cobalt.res.nc
nsm_src_var_name = nsm
nsm_src_var_unit = none
nsm_dest_var_name =  nsm
nsm_dest_var_unit = mol kg-1
nsm_src_var_record = 1
nsm_src_var_gridspec = NONE
nsm_valid_min = 0.0
#
# min = -1.241E-10,  max = 5.693E-07 from input dataset
nlgz_src_file = INPUT/init_ocean_cobalt.res.nc
nlgz_src_var_name = nlgz
nlgz_src_var_unit = none
nlgz_dest_var_name =  nlgz
nlgz_dest_var_unit = mol kg-1
nlgz_src_var_record = 1
nlgz_src_var_gridspec = NONE
nlgz_valid_min = 0.0
#
# min = -1.766E-10,  max = 7.131E-07 from input dataset
nmdz_src_file = INPUT/init_ocean_cobalt.res.nc
nmdz_src_var_name = nmdz
nmdz_src_var_unit = none
nmdz_dest_var_name =  nmdz
nmdz_dest_var_unit = mol kg-1
nmdz_src_var_record = 1
nmdz_src_var_gridspec = NONE
nmdz_valid_min = 0.0
#
# min = -1.385E-11,  max = 8.246E-06 from input dataset
nsmz_src_file = INPUT/init_ocean_cobalt.res.nc
nsmz_src_var_name = nsmz
nsmz_src_var_unit = none
nsmz_dest_var_name =  nsmz
nsmz_dest_var_unit = mol kg-1
nsmz_src_var_record = 1
nsmz_src_var_gridspec = NONE
nsmz_valid_min = 0.0
#
# min = 0,  max = 4.083E-10 from input dataset
fedet_src_file = INPUT/init_ocean_cobalt.res.nc
fedet_src_var_name = fedet
fedet_src_var_unit = none
fedet_dest_var_name =  fedet
fedet_dest_var_unit = mol kg-1
fedet_src_var_record = 1
fedet_src_var_gridspec = NONE
fedet_valid_min = 0.0
#
# min = 0,  max = 1.137E-06 from input dataset
lithdet_src_file = INPUT/init_ocean_cobalt.res.nc
lithdet_src_var_name = lithdet
lithdet_src_var_unit = none
lithdet_dest_var_name =  lithdet
lithdet_dest_var_unit = mol kg-1
lithdet_src_var_record = 1
lithdet_src_var_gridspec = NONE
lithdet_valid_min = 0.0
#
# min = 0,  max = 8.271E-08 from input dataset
ndet_src_file = INPUT/init_ocean_cobalt.res.nc
ndet_src_var_name = ndet
ndet_src_var_unit = none
ndet_dest_var_name =  ndet
ndet_dest_var_unit = mol kg-1
ndet_src_var_record = 1
ndet_src_var_gridspec = NONE
ndet_valid_min = 0.0
#
# min = 0,  max = 5.169E-09 from input dataset
pdet_src_file = INPUT/init_ocean_cobalt.res.nc
pdet_src_var_name = pdet
pdet_src_var_unit = none
pdet_dest_var_name =  pdet
pdet_dest_var_unit = mol kg-1
pdet_src_var_record = 1
pdet_src_var_gridspec = NONE
pdet_valid_min = 0.0
#
# min = 0,  max = 4.827E-07 from input dataset
sidet_src_file = INPUT/init_ocean_cobalt.res.nc
sidet_src_var_name = sidet
sidet_src_var_unit = none
sidet_dest_var_name =  sidet
sidet_dest_var_unit = mol kg-1
sidet_src_var_record = 1
sidet_src_var_gridspec = NONE
sidet_valid_min = 0.0
#
# min = 0,  max = 4.897E-06 from input dataset
silg_src_file = INPUT/init_ocean_cobalt.res.nc
silg_src_var_name = silg
silg_src_var_unit = none
silg_dest_var_name =  silg
silg_dest_var_unit = mol kg-1
silg_src_var_record = 1
silg_src_var_gridspec = NONE
silg_valid_min = 0.0
#
# min = -6.824E-10,  max = 2.989E-06 from input dataset
sldon_src_file = INPUT/init_ocean_cobalt.res.nc
sldon_src_var_name = sldon
sldon_src_var_unit = none
sldon_dest_var_name =  sldon
sldon_dest_var_unit = mol kg-1
sldon_src_var_record = 1
sldon_src_var_gridspec = NONE
sldon_valid_min = 0.0
#
# min = -4.722E-11,  max = 1.819E-07 from input dataset
sldop_src_file = INPUT/init_ocean_cobalt.res.nc
sldop_src_var_name = sldop
sldop_src_var_unit = none
sldop_dest_var_name =  sldop
sldop_dest_var_unit = mol kg-1
sldop_src_var_record = 1
sldop_src_var_gridspec = NONE
sldop_valid_min = 0.0
#
# min = -3.007E-12,  max = 6.038E-06 from input dataset
srdon_src_file = INPUT/init_ocean_cobalt.res.nc
srdon_src_var_name = srdon
srdon_src_var_unit = none
srdon_dest_var_name =  srdon
srdon_dest_var_unit = mol kg-1
srdon_src_var_record = 1
srdon_src_var_gridspec = NONE
srdon_valid_min = 0.0
#
# min = -1.257E-11,  max = 3.831E-07 from input dataset
srdop_src_file = INPUT/init_ocean_cobalt.res.nc
srdop_src_var_name = srdop
srdop_src_var_unit = none
srdop_dest_var_name =  srdop
srdop_dest_var_unit = mol kg-1
srdop_src_var_record = 1
srdop_src_var_gridspec = NONE
srdop_valid_min = 0.0
#
# min = 0,  max = 1.465E-08 from input dataset
cadet_arag_btf_src_file = INPUT/init_ocean_cobalt.res.nc
cadet_arag_btf_src_var_name = cadet_arag_btf
cadet_arag_btf_src_var_unit = none
cadet_arag_btf_dest_var_name =  cadet_arag_btf
cadet_arag_btf_dest_var_unit = mol kg-1
cadet_arag_btf_src_var_record = 1
cadet_arag_btf_src_var_gridspec = NONE
cadet_arag_btf_valid_min = 0.0
#
# min = 0,  max = 2.011E-08 from input dataset
cadet_calc_btf_src_file = INPUT/init_ocean_cobalt.res.nc
cadet_calc_btf_src_var_name = cadet_calc_btf
cadet_calc_btf_src_var_unit = none
cadet_calc_btf_dest_var_name =  cadet_calc_btf
cadet_calc_btf_dest_var_unit = mol kg-1
cadet_calc_btf_src_var_record = 1
cadet_calc_btf_src_var_gridspec = NONE
cadet_calc_btf_valid_min = 0.0
#
# min = 0,  max = 1.364E-06 from input dataset
lithdet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
lithdet_btf_src_var_name = lithdet_btf
lithdet_btf_src_var_unit = none
lithdet_btf_dest_var_name =  lithdet_btf
lithdet_btf_dest_var_unit = mol kg-1
lithdet_btf_src_var_record = 1
lithdet_btf_src_var_gridspec = NONE
lithdet_btf_valid_min = 0.0
#
# min = 0,  max = 8.360E-08 from input dataset
ndet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
ndet_btf_src_var_name = ndet_btf
ndet_btf_src_var_unit = none
ndet_btf_dest_var_name =  ndet_btf
ndet_btf_dest_var_unit = mol kg-1
ndet_btf_src_var_record = 1
ndet_btf_src_var_gridspec = NONE
ndet_btf_valid_min = 0.0
#
# min = 0,  max = 5.225E-09 from input dataset
pdet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
pdet_btf_src_var_name = pdet_btf
pdet_btf_src_var_unit = none
pdet_btf_dest_var_name =  pdet_btf
pdet_btf_dest_var_unit = mol kg-1
pdet_btf_src_var_record = 1
pdet_btf_src_var_gridspec = NONE
pdet_btf_valid_min = 0.0
#
# min = 0,  max = 5.767E-07 from input dataset
sidet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
sidet_btf_src_var_name = sidet_btf
sidet_btf_src_var_unit = none
sidet_btf_dest_var_name =  sidet_btf
sidet_btf_dest_var_unit = mol kg-1
sidet_btf_src_var_record = 1
sidet_btf_src_var_gridspec = NONE
sidet_btf_valid_min = 0.0
#
# min = 0,  max = 0 from input dataset
mu_mem_ndi_src_file = INPUT/init_ocean_cobalt.res.nc
mu_mem_ndi_src_var_name = mu_mem_ndi
mu_mem_ndi_src_var_unit = none
mu_mem_ndi_dest_var_name =  mu_mem_ndi
mu_mem_ndi_dest_var_unit = mol kg-1
mu_mem_ndi_src_var_record = 1
mu_mem_ndi_src_var_gridspec = NONE
mu_mem_ndi_valid_min = 0.0
#
# min = 0,  max = 0 from input dataset
mu_mem_nlg_src_file = INPUT/init_ocean_cobalt.res.nc
mu_mem_nlg_src_var_name = mu_mem_nlg
mu_mem_nlg_src_var_unit = none
mu_mem_nlg_dest_var_name =  mu_mem_nlg
mu_mem_nlg_dest_var_unit = mol kg-1
mu_mem_nlg_src_var_record = 1
mu_mem_nlg_src_var_gridspec = NONE
mu_mem_nlg_valid_min = 0.0
#
# min = 0,  max = 0 from input dataset
mu_mem_nsm_src_file = INPUT/init_ocean_cobalt.res.nc
mu_mem_nsm_src_var_name = mu_mem_nsm
mu_mem_nsm_src_var_unit = none
mu_mem_nsm_dest_var_name =  mu_mem_nsm
mu_mem_nsm_dest_var_unit = mol kg-1
mu_mem_nsm_src_var_record = 1
mu_mem_nsm_src_var_gridspec = NONE
mu_mem_nsm_valid_min = 0.0
#
# min = 0,  max = 0 from input dataset
fedet_btf_src_file = INPUT/init_ocean_cobalt.res.nc
fedet_btf_src_var_name = fedet_btf
fedet_btf_src_var_unit = none
fedet_btf_dest_var_name =  fedet_btf
fedet_btf_dest_var_unit = mol kg-1
fedet_btf_src_var_record = 1
fedet_btf_src_var_gridspec = NONE
fedet_btf_valid_min = 0.0
#
/
"namelists","ocean_mod","generic_abiotic"
init = f
ab_htotal_src_file = INPUT/init_ocean_cobalt.res.nc
ab_htotal_src_var_name = htotal
ab_htotal_src_var_unit = none
ab_htotal_dest_var_name =  ab_htotal
ab_htotal_dest_var_unit = mol kg-1
ab_htotal_src_var_record = 1
ab_htotal_src_var_gridspec = NONE
ab_htotal_valid_min = 3.981E-09
ab_htotal_valid_max = 1.259E-08
#
ab_htotal14c_src_file = INPUT/init_ocean_cobalt.res.nc
ab_htotal14c_src_var_name = htotal
ab_htotal14c_src_var_unit = none
ab_htotal14c_dest_var_name =  ab_htotal
ab_htotal14c_dest_var_unit = mol kg-1
ab_htotal14c_src_var_record = 1
ab_htotal14c_src_var_gridspec = NONE
ab_htotal14c_valid_min = 3.981E-09
ab_htotal14c_valid_max = 1.259E-08
#
## divide by 1e6 to convert from umol/kg to mol/kg
dissicabio_src_file = INPUT/GLODAP_fields.20160916.nc
dissicabio_src_var_name = pi_tco2_abio
dissicabio_src_var_unit = micromoles_per_kg
dissicabio_dest_var_name =  dissicabio
dissicabio_dest_var_unit = mol kg-1
dissicabio_src_var_record = 1
dissicabio_src_var_gridspec = NONE
dissicabio_valid_min = 0.0
#
## divide by 1e6 to convert from umol/kg to mol/kg
dissi14cabio_src_file = INPUT/GLODAP_fields.20160916.nc
dissi14cabio_src_var_name = di14c
dissi14cabio_src_var_unit = micromoles_per_kg
dissi14cabio_dest_var_name =  dissi14cabio
dissi14cabio_dest_var_unit = mol kg-1
dissi14cabio_src_var_record = 1
dissi14cabio_src_var_gridspec = NONE
dissi14cabio_valid_min = 0.0
/
###.................................................
</fieldTable>

<!-- CFC / SF6 data table -->
      <dataTable order="append">
# 2016/07/18 JGJ CORE-II data table
# keep generic names here so data table does not have to change with experiments
# instead update dataset tag to point to generic name
# modified from  /lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/data_table_dyn
# to use runoff.nc as generic filename for runoff dataset
#
"ATM" , "p_surf"        , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "p_bot"         , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "t_bot"         , "T_10_MOD"    , "./INPUT/t_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "sphum_bot"     , "Q_10_MOD"    , "./INPUT/q_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "u_bot"         , "U_10_MOD"    , "./INPUT/u_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "v_bot"         , "V_10_MOD"    , "./INPUT/v_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "z_bot"         , ""            , ""                                         , "bilinear" , 10.0
"ATM" , "gust"          , ""            , ""                                         , "bilinear" ,  1.0e-4
"ICE" , "lw_flux_dn"    , "LWDN_MOD"    , "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ICE" , "sw_flux_vis_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_vis_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_nir_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "sw_flux_nir_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "lprec"         , "RAIN"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "fprec"         , "SNOW"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "runoff"        , "runoff"      , "./INPUT/runoff.daitren.clim.v2011.02.10a.720x576.nc" , "none"  ,  1.0
"ICE" , "calving"       , ""            , ""                             , "none"  ,  0.0
"ICE" , "dhdt"          , ""            , ""                             , "none"  , 80.0
"ICE" , "dedt"          , ""            , ""                             , "none"  ,  2.0e-6
"ICE" , "drdt"          , ""            , ""                             , "none"  ,  10.0
"LND" , "t_surf"        , ""            , ""                             , "none"  ,  273.0
"LND" , "t_ca"          , ""            , ""                             , "none"  ,  273.0
"LND" , "q_ca"          , ""            , ""                             , "none"  ,  0.0
"LND" , "rough_mom"     , ""            , ""                             , "none"  ,  0.01
"LND" , "rough_heat"    , ""            , ""                             , "none"  ,  0.1
"LND" , "albedo"        , ""            , ""                             , "none"  ,  0.1
#"LND" , "t_ca"         , ""            , ""                             , "none"  ,  273.0
#"LND" , "t_surf"       , ""            , ""                             , "none"  ,  273.0
"LND" , "sphum_surf"    , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_ca"      , ""            , ""                             , "none"  ,  0.0
"LND" , "t_flux"        , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_flux"    , ""            , ""                             , "none"  ,  0.0
"LND" , "lw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "sw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "lprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "fprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "dhdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "dedt"          , ""            , ""                             , "none"  ,  2e-6
"LND" , "dedq"          , ""            , ""                             , "none"  ,  0.0
"LND" , "drdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "drag_q"        , ""            , ""                             , "none"  ,  0.0
"LND" , "p_surf"        , ""            , ""                             , "none"  ,  1.e5
#
"ATM", "cfc11_flux_pcair_atm","CFC11","INPUT/cfc.bc.nc","bilinear", 1.0e-12
"ATM", "cfc12_flux_pcair_atm","CFC12","INPUT/cfc.bc.nc","bilinear", 1.0e-12
"ATM", "sf6_flux_pcair_atm",   "SF6",  "INPUT/cfc.bc.nc","bilinear", 1.0e-12
"OCN", "delta_14catm", "D14C", "./INPUT/atm_delta_13C_14C.nc",  "bilinear", 1.0
"ATM", "abco2_flux_pcair_atm", "" , "", "none" ,284.65e-6
"ATM", "ab14co2_flux_pcair_atm", "", "", "none" ,284.65e-6
      </dataTable>

      <diagTable order="append">
#======================================================================================

# Ocean Inert Chemistry Diagnostics
"ocean_inert",           1, "months", 1, "days", "time",
"ocean_inert_z",         1, "months", 1, "days", "time",
"ocean_inert_annual"    12, "months", 1, "days", "time",
"ocean_inert_annual_z"  12, "months", 1, "days", "time",

#
"generic_cfc",    "cfc11",    "cfc11",    "ocean_inert",          "all",.true.,"none",2
"generic_cfc_z",  "cfc11",    "cfc11",    "ocean_inert_z",        "all",.true.,"none",2
"generic_cfc",    "cfc11",    "cfc11",    "ocean_inert_annual",   "all",.true.,"none",2
"generic_cfc_z",  "cfc11",    "cfc11",    "ocean_inert_annual_z", "all",.true.,"none",2
"generic_cfc",    "fgcfc11",  "fgcfc11",  "ocean_inert",          "all",.true.,"none",2

"generic_cfc",    "cfc12",    "cfc12",    "ocean_inert",          "all",.true.,"none",2
"generic_cfc_z",  "cfc12",    "cfc12",    "ocean_inert_z",        "all",.true.,"none",2
"generic_cfc",    "cfc12",    "cfc12",    "ocean_inert_annual",   "all",.true.,"none",2
"generic_cfc_z",  "cfc12",    "cfc12",    "ocean_inert_annual_z", "all",.true.,"none",2
"generic_cfc",    "fgcfc12",  "fgcfc12",  "ocean_inert",          "all",.true.,"none",2

"generic_sf6",    "sf6",      "sf6",      "ocean_inert",          "all",.true.,"none",2
"generic_sf6_z",  "sf6",      "sf6",      "ocean_inert_z",        "all",.true.,"none",2
"generic_sf6",    "sf6",      "sf6",      "ocean_inert_annual",   "all",.true.,"none",2
"generic_sf6_z",  "sf6",      "sf6",      "ocean_inert_annual_z", "all",.true.,"none",2
"generic_sf6",    "fgsf6",    "fgsf6",    "ocean_inert",          "all",.true.,"none",2

"generic_cfc",   "cfc11_alpha",     "cfc11_alpha",     "ocean_inert","all",.true.,"none",2
"generic_cfc",   "cfc11_csurf",     "cfc11_csurf",     "ocean_inert","all",.true.,"none",2
"generic_cfc",   "cfc11_sc_no",     "cfc11_sc_no",     "ocean_inert","all",.true.,"none",2
"generic_cfc",   "cfc11_stf_gas",   "cfc11_stf_gas",   "ocean_inert","all",.true.,"none",2
"generic_cfc",   "cfc12_alpha",     "cfc12_alpha",     "ocean_inert","all",.true.,"none",2
"generic_cfc",   "cfc12_csurf",     "cfc12_csurf",     "ocean_inert","all",.true.,"none",2
"generic_cfc",   "cfc12_sc_no",     "cfc12_sc_no",     "ocean_inert","all",.true.,"none",2
"generic_cfc",   "cfc12_stf_gas",   "cfc12_stf_gas",   "ocean_inert","all",.true.,"none",2
"generic_sf6",   "sf6_alpha",       "sf6_alpha",       "ocean_inert","all",.true.,"none",2
"generic_sf6",   "sf6_csurf",       "sf6_csurf",       "ocean_inert","all",.true.,"none",2
"generic_sf6",   "sf6_sc_no",       "sf6_sc_no",       "ocean_inert","all",.true.,"none",2
"generic_sf6",   "sf6_stf_gas",     "sf6_stf_gas",     "ocean_inert","all",.true.,"none",2

"ocean_abiotic",           1, "months", 1, "days", "time",
"ocean_abiotic_z"          1, "months", 1, "days", "time",
"ocean_abiotic_annual",   12, "months", 1, "days", "time",
"ocean_abiotic_annual_z"  12, "months", 1, "days", "time",

#
#-- CMIP Tracer Fields
"generic_abiotic",   "dissicabio",           "dissicabio",           "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic",   "dissi14cabio",         "dissi14cabio",         "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic",   "phabio",               "phabio",               "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic_z", "dissicabio",           "dissicabio",           "ocean_abiotic_z","all",.true.,"none", 2
"generic_abiotic_z", "dissi14cabio",         "dissi14cabio",         "ocean_abiotic_z","all",.true.,"none", 2
"generic_abiotic_z", "phabio",               "phabio",               "ocean_abiotic_z","all",.true.,"none", 2
"generic_abiotic",   "dissicabio",           "dissicabio",           "ocean_abiotic_annual","all",.true.,"none", 2
"generic_abiotic",   "dissi14cabio",         "dissi14cabio",         "ocean_abiotic_annual","all",.true.,"none", 2
"generic_abiotic",   "phabio",               "phabio",               "ocean_abiotic_annual","all",.true.,"none", 2
"generic_abiotic_z", "dissicabio",           "dissicabio",           "ocean_abiotic_annual_z","all",.true.,"none", 2
"generic_abiotic_z", "dissi14cabio",         "dissi14cabio",         "ocean_abiotic_annual_z","all",.true.,"none", 2
"generic_abiotic_z", "phabio",               "phabio",               "ocean_abiotic_annual_z","all",.true.,"none", 2

#-- CMIP Surface Fields
"generic_abiotic",   "dissicabioos",         "dissicabioos",         "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissi14cabioos",       "dissi14cabioos",       "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dpco2abio",            "dpco2abio",            "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "fgco2abio",            "fgco2abio",            "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "fg14co2abio",          "fg14co2abio",          "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "phabioos",             "phabioos",             "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "spco2abio",            "spco2abio",            "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "fgco2abio",            "fgco2abio",            "ocean_abiotic_annual","all",.true.,"none",2
"generic_abiotic",   "fg14co2abio",          "fg14co2abio",          "ocean_abiotic_annual","all",.true.,"none",2

#-- Non-CMIP Tracer Fields
"generic_abiotic",   "ab_alk",               "ab_alk",               "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic",   "ab_htotal",            "ab_htotal",            "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic",   "ab_htotal14c",         "ab_htotal14c",         "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic",   "ab_po4",               "ab_po4",               "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic",   "ab_sio4",              "ab_sio4",              "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic",   "jdecay_di14c",         "jdecay_di14c",         "ocean_abiotic","all",.true.,"none", 2
"generic_abiotic_z", "ab_alk",               "ab_alk",               "ocean_abiotic_z","all",.true.,"none",2
"generic_abiotic_z", "ab_htotal",            "ab_htotal",            "ocean_abiotic_z","all",.true.,"none",2
"generic_abiotic_z", "ab_htotal14c",         "ab_htotal14c",         "ocean_abiotic_z","all",.true.,"none",2
"generic_abiotic_z", "ab_po4",               "ab_po4",               "ocean_abiotic_z","all",.true.,"none",2
"generic_abiotic_z", "ab_sio4",              "ab_sio4",              "ocean_abiotic_z","all",.true.,"none",2

#-- Non-CMIP Surface Fields
"generic_abiotic",   "sfc_ab_alk",           "sfc_ab_alk",           "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "sfc_ab_htotal",        "sfc_ab_htotal",        "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "sfc_ab_htotal14c",     "sfc_ab_htotal14c",     "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "sfc_ab_po4",           "sfc_ab_po4",           "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "sfc_ab_sio4",          "sfc_ab_sio4",          "ocean_abiotic","all",.true.,"none",2

#-- Non-CMIP Gas exchange
"generic_abiotic",   "ab_pco2surf",          "ab_pco2surf",          "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "ab_p14co2surf",        "ab_p14co2surf",        "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "delta_14catm",         "delta_14catm",         "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissicabio_alpha",     "dissicabio_alpha",     "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissi14cabio_alpha",   "dissi14cabio_alpha",   "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissicabio_csurf",     "dissicabio_csurf",     "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissi14cabio_csurf",   "dissi14cabio_csurf",   "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissicabio_sc_no",     "dissicabio_sc_no",     "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissi14cabio_sc_no",   "dissi14cabio_sc_no",   "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissicabio_stf_gas",   "dissicabio_stf_gas",   "ocean_abiotic","all",.true.,"none",2
"generic_abiotic",   "dissi14cabio_stf_gas", "dissi14cabio_stf_gas", "ocean_abiotic","all",.true.,"none",2
# Required cell measures
"ocean_model",  "volcello", "volcello",  "ocean_abiotic","all","mean","none",2 # Cell measure for 3d data
"ocean_model_z","volcello", "volcello",  "ocean_abiotic_z","all","mean","none",2 # Cell measure for 3d data
"ocean_model",  "volcello", "volcello",  "ocean_abiotic_annual","all","mean","none",2 # Cell measure for 3d data
"ocean_model_z", "volcello", "volcello", "ocean_abiotic_annual_z","all","mean","none",2 # Cell measure for 3d data
"ocean_model",  "volcello", "volcello",  "ocean_inert","all","mean","none",2 # Cell measure for 3d data
"ocean_model_z","volcello", "volcello",  "ocean_inert_z","all","mean","none",2 # Cell measure for 3d data
"ocean_model",  "volcello", "volcello",  "ocean_inert_annual","all","mean","none",2 # Cell measure for 3d data
"ocean_model_z","volcello", "volcello",  "ocean_inert_annual_z","all","mean","none",2 # Cell measure for 3d data
      </diagTable>

    </input>


    <postProcess>
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='COBALT_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='COBALT_z_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='abiotic_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='abiotic_z_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='inert_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='inert_z_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='abiotic_postprocess_1x1deg']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='abiotic_z_postprocess_1x1deg']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='inert_postprocess_1x1deg']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='inert_z_postprocess_1x1deg']/postProcess/node())"/>
    </postProcess>

    <runtime>
      <reference restart="$(REFERENCE)/archive/1x1m0d_1057x1o/restart/19480201.tar"/>
      <reference restart="$(archiveDir)/../../$(platform)-prod/archive/1x1m0d_1057x1o/restart/19480201.tar"/>
    </runtime>

</experiment>


 <experiment name="OM4_SIS2_05_CORE2" inherit="OMp5_baseline">
    <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1948,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 1800,           ! for stability
       dt_atmos = 1800,           ! to match dt_cpld
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false.
       atmos_nthreads = $atm_threads
       ocean_nthreads = $ocean_nthreads
     </namelist>
     <namelist name="xgrid_nml">
       make_exchange_reproduce = .true.
       interp_method = 'second_order'
     </namelist>
     <namelist name="fms_nml">
       clock_grain='ROUTINE'
       clock_flags='NONE'
       domains_stack_size = 8000000
       stack_size =0
     </namelist>
     <namelist name="fms_io_nml" >
       fms_netcdf_restart=.true.
       threading_read='multi'
       max_files_r = 800
       max_files_w = 800
       checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>

     <namelist name="atmos_model_nml" >
       layout= 0, 0
     </namelist>

     <namelist name="generic_tracer_nml">
       do_generic_tracer=.false.
       do_generic_abiotic=.false.
       do_generic_CFC=.false.
       do_generic_COBALT=.false.
       do_generic_TOPAZ=.false.
       do_generic_SF6=.false.
       force_update_fluxes=.false.
     </namelist>
     <namelist name="diag_manager_nml">
       max_files = 400
       flush_nc_files=.false.
       max_axes = 400,
       max_num_axis_sets = 400,
       max_input_fields = 1200
       max_output_fields = 1800
       mix_snapshot_average_fields=.false.
     </namelist>


      <csh><![CDATA[
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override DT = 1800
#override DT_THERM = 7200  

USE_generic_tracer = False
#override CHL_FROM_FILE = True
GENERIC_TRACER_IC_FILE = "MOM_GENERICS.res.nc"

#override ENERGYSAVEDAYS = 30

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override U_TRUNC_FILE = "SIS_U_truncations"
#override V_TRUNC_FILE = "SIS_V_truncations"
#override MIN_OCN_INTERTIAL_H = 2.

#override ADD_DIURNAL_SW = True 
#override ICE_STATS_INTERVAL = 30
SIS_OVERRIDE_EOF
     ]]></csh>

      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='OM4_05grid_data']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='OMp5_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_data']/input/node())"/>
      <!--CORE2 forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE2_data']/input/node())"/>

      <diagTable>
$name
$baseDate
      </diagTable>

      <dataTable>
# 2016/07/18 JGJ CORE-II data table
# keep generic names here so data table does not have to change with experiments
# instead update dataset tag to point to generic name
# modified from  /lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/data_table_dyn
# to use runoff.nc as generic filename for runoff dataset
#
"ATM" , "p_surf"        , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "p_bot"         , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "t_bot"         , "T_10_MOD"    , "./INPUT/t_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "sphum_bot"     , "Q_10_MOD"    , "./INPUT/q_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "u_bot"         , "U_10_MOD"    , "./INPUT/u_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "v_bot"         , "V_10_MOD"    , "./INPUT/v_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "z_bot"         , ""            , ""                                         , "bilinear" , 10.0
"ATM" , "gust"          , ""            , ""                                         , "bilinear" ,  1.0e-4
"ICE" , "lw_flux_dn"    , "LWDN_MOD"    , "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ICE" , "sw_flux_vis_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_vis_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_nir_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "sw_flux_nir_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "lprec"         , "RAIN"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "fprec"         , "SNOW"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "runoff"        , "runoff"      , "./INPUT/runoff.daitren.clim.v2011.02.10a.720x576.nc" , "none"  ,  1.0
"ICE" , "calving"       , ""            , ""                             , "none"  ,  0.0
"ICE" , "dhdt"          , ""            , ""                             , "none"  , 80.0
"ICE" , "dedt"          , ""            , ""                             , "none"  ,  2.0e-6
"ICE" , "drdt"          , ""            , ""                             , "none"  ,  10.0
"LND" , "t_surf"        , ""            , ""                             , "none"  ,  273.0
"LND" , "t_ca"          , ""            , ""                             , "none"  ,  273.0
"LND" , "q_ca"          , ""            , ""                             , "none"  ,  0.0
"LND" , "rough_mom"     , ""            , ""                             , "none"  ,  0.01
"LND" , "rough_heat"    , ""            , ""                             , "none"  ,  0.1
"LND" , "albedo"        , ""            , ""                             , "none"  ,  0.1
#"LND" , "t_ca"         , ""            , ""                             , "none"  ,  273.0
#"LND" , "t_surf"       , ""            , ""                             , "none"  ,  273.0
"LND" , "sphum_surf"    , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_ca"      , ""            , ""                             , "none"  ,  0.0
"LND" , "t_flux"        , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_flux"    , ""            , ""                             , "none"  ,  0.0
"LND" , "lw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "sw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "lprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "fprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "dhdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "dedt"          , ""            , ""                             , "none"  ,  2e-6
"LND" , "dedq"          , ""            , ""                             , "none"  ,  0.0
"LND" , "drdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "drag_q"        , ""            , ""                             , "none"  ,  0.0
"LND" , "p_surf"        , ""            , ""                             , "none"  ,  1.e5
#
      </dataTable>


    </input>

    <runtime>
      <reference restart="$(REFERENCE)/archive/1x1m0d_1057x1o/restart/19480201.tar"/>
      <reference restart="$(archiveDir)/../../$(platform)-prod/archive/1x1m0d_1057x1o/restart/19480201.tar"/>
    </runtime>

</experiment>
<!-- OCEAN BGC post-processing-->
  <freInclude name="COBALT_postprocess">

      <postProcess> 
      <!--REFINE DIAG SCRIP -->
      <!--By default a refineDiag script causes the annual data to be unpacked and saved in /ptmp/$USER-->
<!--
      <refineDiag script="$(NB_ROOT)/mom6/tools/analysis/MOM6_refineDiag.csh  $(NB_ROOT)/mdt_xml/awg_include/refineDiag/refineDiag_data_stager_globalAve.csh"/>
-->

      <!--PostProcessing component models-->
      <component type="ocean_cobalt_1day" start="$(PP_START_YEAR)" source="ocean_cobalt_1day" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_A)" />
      </component>

      <component type="ocean_cobalt_tracers_month" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_month" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_tracers_year" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_year" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_sfc" start="$(PP_START_YEAR)" source="ocean_cobalt_sfc" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_btm" start="$(PP_START_YEAR)" source="ocean_cobalt_btm" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_phytolim_sfc" start="$(PP_START_YEAR)" source="ocean_cobalt_phytolim_sfc" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_fdet_100" start="$(PP_START_YEAR)" source="ocean_cobalt_fdet_100" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_biomass_100" start="$(PP_START_YEAR)" source="ocean_cobalt_biomass_100" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_prod_100" start="$(PP_START_YEAR)" source="ocean_cobalt_prod_100" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_miscflux_100" start="$(PP_START_YEAR)" source="ocean_cobalt_miscflux_100" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_phyto_diags" start="$(PP_START_YEAR)" source="ocean_cobalt_phyto_diags" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_bact_diags" start="$(PP_START_YEAR)" source="ocean_cobalt_bact_diags" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_zoo_diags" start="$(PP_START_YEAR)" source="ocean_cobalt_zoo_diags" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_misc" start="$(PP_START_YEAR)" source="ocean_cobalt_misc" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

     </postProcess>
 </freInclude>
 

  <freInclude name="COBALT_z_postprocess">

      <postProcess> 
      <!--REFINE DIAG SCRIP -->
      <!--By default a refineDiag script causes the annual data to be unpacked and saved in /ptmp/$USER-->
      <!--MOM6_refineDiag.csh is currently empty and is here only to cause the unpack annual history files in /ptmp-->
<!--
      <refineDiag script="$(NB_ROOT)/mom6/tools/analysis/MOM6_refineDiag.csh  $(NB_ROOT)/mdt_xml/awg_include/refineDiag/refineDiag_data_stager_globalAve.csh"/>

-->

      <!--PostProcessing component models-->
<!--
      <component type="ocean_cobalt_1day_z" start="$(PP_START_YEAR)" source="ocean_cobalt_1day_z" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_A)" />
      </component>
-->

      <component type="ocean_cobalt_tracers_month_z" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_month_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_tracers_year_z" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_year_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_phyto_diags_z" start="$(PP_START_YEAR)" source="ocean_cobalt_phyto_diags_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_bact_diags_z" start="$(PP_START_YEAR)" source="ocean_cobalt_bact_diags_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_zoo_diags_z" start="$(PP_START_YEAR)" source="ocean_cobalt_zoo_diags_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_misc_z" start="$(PP_START_YEAR)" source="ocean_cobalt_misc_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

     </postProcess>
  </freInclude>

  <freInclude name="abiotic_postprocess">
      <postProcess> 
      <component type="ocean_abiotic_month" start="$(PP_START_YEAR)" source="ocean_abiotic" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
     </postProcess>
  </freInclude>
 
  <freInclude name="abiotic_postprocess_1x1deg">
      <postProcess> 
      <component type="ocean_abiotic_month_1x1deg" xyInterp="180,360" start="$(PP_START_YEAR)" source="ocean_abiotic" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
     </postProcess>
  </freInclude>
 
  <freInclude name="abiotic_z_postprocess">
      <postProcess> 
      <component type="ocean_abiotic_z" start="$(PP_START_YEAR)" source="ocean_abiotic_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
     </postProcess>
  </freInclude>

  <freInclude name="abiotic_z_postprocess_1x1deg">
      <postProcess> 
      <component type="ocean_abiotic_z_1x1deg" xyInterp="180,360" start="$(PP_START_YEAR)" source="ocean_abiotic_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
     </postProcess>
  </freInclude>

  <freInclude name="inert_postprocess">
      <postProcess> 
      <component type="ocean_inert_month" start="$(PP_START_YEAR)" source="ocean_inert" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
     </postProcess>
  </freInclude>
 
  <freInclude name="inert_postprocess_1x1deg">
      <postProcess> 
      <component type="ocean_inert_month_1x1deg" xyInterp="180,360" start="$(PP_START_YEAR)" source="ocean_inert" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
     </postProcess>
  </freInclude>
 

  <freInclude name="inert_z_postprocess">
      <postProcess> 
      <component type="ocean_inert_z" start="$(PP_START_YEAR)" source="ocean_inert_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
     </postProcess>
  </freInclude>

  <freInclude name="inert_z_postprocess_1x1deg">
      <postProcess> 
      <component type="ocean_inert_z_1x1deg" xyInterp="180,360" start="$(PP_START_YEAR)" source="ocean_inert_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
     </postProcess>
  </freInclude>

  <freInclude name="BLING_postprocess">
      <postProcess> 
      <component type="ocean_bling_1x1deg" start="$(PP_START_YEAR)" source="ocean_bling" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_bling_cmip6_omip_sfc_1x1deg" start="$(PP_START_YEAR)" source="ocean_bling_cmip6_omip_sfc" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_bling_cmip6_omip_2d_1x1deg" start="$(PP_START_YEAR)" source="ocean_bling_cmip6_omip_2d" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_bling_cmip6_omip_tracers_month_z_1x1deg" start="$(PP_START_YEAR)" source="ocean_bling_cmip6_omip_tracers_month_z" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_bling_cmip6_omip_tracers_year_z_1x1deg" start="$(PP_START_YEAR)" source="ocean_bling_cmip6_omip_tracers_year_z" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_bling_cmip6_omip_rates_year_z_1x1deg" start="$(PP_START_YEAR)" source="ocean_bling_cmip6_omip_rates_year_z" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

     </postProcess>
  </freInclude>

<experiment name="SPEAR_o1_CORE2_OM4" inherit="MOM6_SIS2_compile_symmetric">
  <description>
 For Core2: change ocean_albedo, monin obukhov 
 Recompile without land and atmos
  10/16/2017
  The baseline 1850 Control run of SPEAR at c96 atmospheric resolution.
  The "bridge" run to create land usage partitioning for 1850 and 2010 left the biomass associated with those regions in 1850-era conditions.
  Therefore an extra spinup of 150 years was performed to equilibrate the land with the CO2 forcing of the appropriate model
  The initial condition for SPEAR is formed from
     atmos : Year  21/1/1 of the spinup run (LOAR4_c96L33_am4p0_1850climo_H07)
     ice   : Year  21/1/1 of the spinup run (LOAR4_c96L33_am4p0_1850climo_H07)
     land  : Year 151/1/1 of the spinup run (LOAR4_c96L33_am4p0_1850climo_H07)
     ocean : World Ocean Atlas.
  Postprocessing will take place at intervals of 10, 100 and 1000 years.
  </description>
  <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1948,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 3600,
       dt_atmos = 3600,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false. 
       check_stocks=0
     </namelist>
          <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

      <namelist name="xgrid_nml">
        make_exchange_reproduce = .true.
        interp_method = 'second_order'
      </namelist> 
       <namelist name="ocean_albedo_nml">
      ocean_albedo_option = 2 
      </namelist>
       <namelist name="ice_albedo_nml">
            t_range = 10.
      </namelist>
       <namelist name="ocean_rough_nml">
            rough_scheme = 'beljaars'
       </namelist>
       <namelist name="monin_obukhov_nml">
            neutral = .true.
        </namelist>
      <namelist name="atmos_model_nml">
        nxblocks = 1
        nyblocks = $atm_threads
	layout=0,0
      </namelist>
      <namelist name="flux_exchange_nml">
            debug_stocks = .FALSE.
            divert_stocks_report = .TRUE.            
            do_area_weighted_flux = .FALSE. 
     </namelist>
      <namelist name="surface_flux_nml">
            ncar_ocean_flux = .true.
	    raoult_sat_vap = .true.
     </namelist>      

      <namelist name="fms_io_nml">
        threading_read  = 'multi',
        max_files_r = 200,
        max_files_w = 200,
        checksum_required =.false.
      </namelist>
      <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 8000000
            stack_size =0
      </namelist>

     <namelist name="icebergs_nml">
        make_calving_reproduce=.TRUE.
        really_debug=.FALSE.
        debug=.FALSE.
        verbose=.FALSE.
        verbose_hrs=7200
        use_operator_splitting=.TRUE.
        bergy_bit_erosion_fraction=0.0
        sicn_shift=0.1
        parallel_reprod=.TRUE.
        traj_sample_hrs=0
        add_weight_to_ocean=.false.
force_all_pes_traj = .true.
     </namelist>
     <namelist name="diag_manager_nml">
        mix_snapshot_average_fields = .false.,
        max_input_fields = 800,
        max_output_fields = 1500
        max_axes = 100
        max_num_axis_sets = 50
        max_files = 40
        issue_oor_warnings = .false.
        max_axis_attributes=4
     </namelist>
 

      <xi:include xpointer="xpointer(//freInclude[@name='OM4_common']/input/node())"/> 
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='FLOR2_MOM6_data']/input/node())"/> 
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='MOM6_1deg_data']/input/node())"/>
      <!--SIS Input datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='SIS2_1deg_data']/input/node())"/>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">                   
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/field_table</dataSource>
      </dataFile>                                                                                     

      <diagTable>
$name
$baseDate
      </diagTable>

      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//freInclude[@name='CORE2_data']/input/node())"/>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/runoff.daitren.iaf.1948-2007.regridded.nc</dataSource>
      </dataFile>

      <dataTable>
"ATM" , "p_surf"        , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "p_bot"         , "SLP"         , "./INPUT/slp.1948-2007.nomads.nc"          , "bilinear" ,  1.0
"ATM" , "t_bot"         , "T_10_MOD"    , "./INPUT/t_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "sphum_bot"     , "Q_10_MOD"    , "./INPUT/q_10_mod.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ATM" , "u_bot"         , "U_10_MOD"    , "./INPUT/u_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "v_bot"         , "V_10_MOD"    , "./INPUT/v_10_mod.1948-2007.nomads.nc"     , "bicubic",   1.0
"ATM" , "z_bot"         , ""            , ""                                         , "bilinear" , 10.0
"ATM" , "gust"          , ""            , ""                                         , "bilinear" ,  1.0e-4
"ICE" , "lw_flux_dn"    , "LWDN_MOD"    , "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  1.0
"ICE" , "sw_flux_vis_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_vis_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.285
"ICE" , "sw_flux_nir_dir_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "sw_flux_nir_dif_dn", "SWDN_MOD", "./INPUT/ncar_rad.1948-2007.nomads.nc"     , "bilinear" ,  0.215
"ICE" , "lprec"         , "RAIN"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933
"ICE" , "fprec"         , "SNOW"        , "./INPUT/ncar_precip.1948-2007.nomads.nc"  , "bilinear" ,  0.9933/
#"ICE" , "runoff"        , "runoff"      , "./INPUT/runoff.daitren.iaf.1948-2007.regridded.nc", "none" ,  1.0
"ICE" , "runoff"        , ""            , ""                             , "none"  ,  0.0
"ICE" , "calving"       , ""            , ""                             , "none"  ,  0.0
"ICE" , "dhdt"          , ""            , ""                             , "none"  , 80.0
"ICE" , "dedt"          , ""            , ""                             , "none"  ,  2.0e-6
"ICE" , "drdt"          , ""            , ""                             , "none"  ,  10.0
"LND" , "t_surf"        , ""            , ""                             , "none"  ,  273.0
"LND" , "t_ca"          , ""            , ""                             , "none"  ,  273.0
"LND" , "q_ca"          , ""            , ""                             , "none"  ,  0.0
"LND" , "rough_mom"     , ""            , ""                             , "none"  ,  0.01
"LND" , "rough_heat"    , ""            , ""                             , "none"  ,  0.1
"LND" , "albedo"        , ""            , ""                             , "none"  ,  0.1
#"LND" , "t_ca"         , ""            , ""                             , "none"  ,  273.0
#"LND" , "t_surf"       , ""            , ""                             , "none"  ,  273.0
"LND" , "sphum_surf"    , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_ca"      , ""            , ""                             , "none"  ,  0.0
"LND" , "t_flux"        , ""            , ""                             , "none"  ,  0.0
"LND" , "sphum_flux"    , ""            , ""                             , "none"  ,  0.0
"LND" , "lw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "sw_flux"       , ""            , ""                             , "none"  ,  0.0
"LND" , "lprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "fprec"         , ""            , ""                             , "none"  ,  0.0
"LND" , "dhdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "dedt"          , ""            , ""                             , "none"  ,  2e-6
"LND" , "dedq"          , ""            , ""                             , "none"  ,  0.0
"LND" , "drdt"          , ""            , ""                             , "none"  ,  5.0
"LND" , "drag_q"        , ""            , ""                             , "none"  ,  0.0
"LND" , "p_surf"        , ""            , ""                             , "none"  ,  1.e5
      </dataTable>
      <dataFile label="input" target="INPUT/KH_background_2d.nc">
         /lustre/f1/unswept/William.Cooke/MOM6_datasets/Kh_BG_2D/Kh_background_1e4_50to90ns.nc
      </dataFile>

      <dataFile label="input" target="INPUT/">
         /autofs/mnt/ncrc-svm1_home2/William.Cooke/decadal/topo_edits_033016a.nc
      </dataFile>

         <csh><![CDATA[
touch $work/INPUT/MOM_override

cat > $work/INPUT/MOM_override << EOF
NUM_DIAG_COORDS = 2             ! default = 1
                                ! The number of diagnostic vertical coordinates to use.
                                ! For each coordinate, an entry in DIAG_COORDS must be provided.
DIAG_COORDS = "z Z ZSTAR", "rho2 RHO2 RHO" !

DIAG_COORD_DEF_RHO2 = "RFNC1:35,999.5,1028,1028.5,8.,1038.,0.0078125" ! default = "WOA09"
                                ! Determines how to specify the coordinate
                                ! resolution. Valid options are:
                                !  PARAM       - use the vector-parameter DIAG_COORD_RES_RHO2
                                !  UNIFORM[:N] - uniformly distributed
                                !  FILE:string - read from a file. The string specifies
                                !                the filename and variable name, separated
                                !                by a comma or space, e.g. FILE:lev.nc,dz
                                !                or FILE:lev.nc,interfaces=zw
                                !  WOA09[:N]   - the WOA09 vertical grid (approximately)
                                !  FNC1:string - FNC1:dz_min,H_total,power,precision
                                !  HYBRID:string - read from a file. The string specifies
                                !                the filename and two variable names, separated
                                !                by a comma or space, for sigma-2 and dz. e.g.
                                !                HYBRID:vgrid.nc,sigma2,dz

USE_LAND_MASK_FOR_HVISC = True  !   [Boolean] default = False
                                ! If true, use Use the land mask for the computation of thicknesses
                                ! at velocity locations. This eliminates the dependence on arbitrary
                                ! values over land or outside of the domain. Default is False in order to
                                ! maintain answers with legacy experiments but should be changed to True
                                ! for new experiments.
EOF

    ]]></csh>
  </input>
   <runtime>   
     <production simTime="$(PROD_SIMTIME)" units="years">
        <segment simTime="12" units="months"/>
        <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128p']/node())"/>
      </production>
      <regression name="basic">
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
      </regression>
      <regression name="rts">
        <run days="15 16" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O128']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O64']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O72']/node())"/> </run>
        <run months="1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O64x2']/node())"/> </run>
      </regression>
      <regression name="debug">
        <run days="2"   > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O64']/node())"/> </run>
        <run days="1 1" > <xi:include href="awg_include/xml_building_blocks/layouts.xml" xpointer="xpointer(//freInclude[@name='resourceparams_O64']/node())"/> </run>
      </regression>

   </runtime>
</experiment>
  <freInclude name="FLOR2_MOM6_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/land_ice_ocean_LM3_SIS2/OM_360x320_C180/INPUT/layer_coord.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/land_ice_ocean_LM3_SIS2/OM_360x320_C180/INPUT/seawifs_1998-2006_smoothed_2X.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/land_ice_ocean_LM3_SIS2/OM_360x320_C180/INPUT/tidal_amplitude.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/land_ice_ocean_LM3_SIS2/OM_360x320_C180/INPUT/MOM_channels_FLOR</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
          <dataSource site="ncrc">/lustre/f1/unswept/Matthew.Harrison/MOM6_datasets/FLOR2/diag_vgrid.nc</dataSource>
          <dataSource site="gfdl">/archive/William.Cooke/gold/datasets/FLOR2/diag_vgrid.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/WOA05_pottemp_salt.nc </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Matthew.Harrison/MOM6_datasets/FLOR2/edits_012016.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Matthew.Harrison/MOM6_datasets/FLOR2/edits_013016a.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="SIS2_1deg_data">
    <input>
     <dataFile label="input" target="INPUT/SIS_input" chksum="" size="" timestamp="">
         <dataSource site="ncrc">/lustre/f1/unswept/William.Cooke/MOM6_datasets/LOAR4/SIS_input_C39_init</dataSource>
     </dataFile>
<!--
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/land_ice_ocean_LM3_SIS2/OM_360x320_C180/SIS_input</dataSource>
     </dataFile>
-->
     <namelist name="SIS_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_diurnal','INPUT/SIS_override'
     </namelist>
     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
     </dataFile>

     </input>
  </freInclude>

  <freInclude name="MOM6_1deg_data">
    <input>

      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Niki.Zadeh/archive/input/warsaw/mosaic_ocean.360x320.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/MOM_input" chksum="" size="" timestamp="">
         <dataSource site="ncrc">/lustre/f1/unswept/William.Cooke/MOM6_datasets/LOAR4/MOM_input_C39_init</dataSource>
      </dataFile>
<!-- 
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/land_ice_ocean_LM3_SIS2/OM_360x320_C180/MOM_input</dataSource>
      </dataFile>
-->
     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override'
     </namelist>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
      </dataFile>
      <diagTable order="append">
# MOM6 ocean diagnostics only used in a CORE/OMIP (no interactive atmos). 
# These terms provide diagnostics for the surface salinity / fresh water restoring. 
 "ocean_model", "vprec",              "vprec",              "ocean_annual", "all", "mean", "none",2
 "ocean_model", "salt_flux_restore",  "salt_flux_restore",  "ocean_annual", "all", "mean", "none",2

 "ocean_model", "vprec",              "vprec",              "ocean_month", "all", "mean", "none",2
 "ocean_model", "salt_flux_restore",  "salt_flux_restore",  "ocean_month", "all", "mean", "none",2
      </diagTable>

     </input>
  </freInclude>

</experimentSuite>
