<?xml version="1.0"?>
<!-- FRE Usage documentation: http://www.gfdl.noaa.gov/fms/fre -->
<!-- $Id: OM4.xml,v 1.1.2.12.2.6.2.3 2014/05/23 19:37:49 Niki.Zadeh Exp $ -->

<!--
Quick start guide

module load fre/bronx-10
fremake -x OM4.xml -p ncrc3.intel15 -t prod OM4_libs_compile -no-link
   To run with SIS2
fremake -x OM4.xml -p ncrc3.intel15 -t prod MOM6_SIS2_compile
frerun  -x OM4.xml -p ncrc3.intel15 -t prod OM4_SIS2_baseline -r basic 

-->

<experimentSuite rtsVersion="4" xmlns:xi="http://www.w3.org/2001/XInclude">
   <property name="RELEASE"      value="verona"/> <!-- CVS tag for shared source code -->
   <property name="MOM6_DATE"    value="2016.05.26"/>     <!-- git tag date for MOM6 source code -->
   <property name="FRE_STEM"     value="$(RELEASE)_mom6_$(MOM6_DATE)"/>
   <property name="MOM6_GIT_TAG" value="dev/master/$(MOM6_DATE)"/> <!-- git tag for MOM6 source code -->
   <property name="BERGS_GIT_TAG" value="dev/master"/>
   <property name="FRE_VERSION"  value="fre/bronx-10"/>

  <property name="OM4_ANALYSIS" value="ice_ocean_SIS2/OM4_025"/>  <!--example containing .frepp scripts for analysis-->
                                                                 <!--Please set the value to ice_ocean_SIS2/OM4_05 for 1/2 degree ocean model runs-->

   <!--Production run properties. Users can modify these according to their need and/or performance analysis-->
   <property name="PROD_SIMTIME"   value="20"/>
   <!--Post-processing  chunk lengths -->
   <property name="CHUNK_LENGTH_A" value="5yr"/>
   <property name="CHUNK_LENGTH_B" value="20yr"/>

   <!--The following properties need to be set only if the user wants to monitor the run progress at MDBI
      and are not needed for the run or post-processing -->
   <property name="PP_START_YEAR"  value="1900"/>
   <property name="PP_END_YEAR"    value="1910"/>
   <!--Use these values for CORE2 dynamic forcing runs -->
   <!--
   <property name="PP_START_YEAR"  value="1948"/>
   <property name="PP_END_YEAR"    value="1958"/>
   -->
   <property name="ANALYSIS_SWITCH" value="on"/>
   <property name="MDBIswitch"      value="on"/>  <!-- on/off switch for MDBI database -->


   <property name="PROD_RUNTIME"         value="16:00:00"/><!--Maximum wall clock per simulation-->
   <property name="PROD_SEGTIME"         value="04:00:00"/><!--Wall clock per segment (usually 1 year)-->
   <property name="PROD_NPES"            value="1756"/> 
   <property name="PROD_MASK_TABLE"      value="mask_table.548.32x72"/>
   <property name="OCN_PROD_LAYOUT"      value="32,72"/>
   <property name="OCN_PROD_IO_LAYOUT"   value="1,4"/>
   <property name="ICE_PROD_LAYOUT"      value="32,72"/>
   <property name="ICE_PROD_IO_LAYOUT"   value="1,4"/>


   <!--Users need not change the following properties -->
   <property name="reference_tag"  value="verona_answers"/> <!-- Reference release tag for existing files in the archives for answer comparison. Used in "REFERENCE" property. -->
   <property name="PROG_MAIN"   value="coupler/coupler_main.o"/>
   <property name="LIBS_ROOT"   value="OM4_libs_compile"/>
   <property name="FMS_LIB_DIR" value="./$(LIBS_ROOT)/$(platform)-$(target)/exec"/>

   <!-- The following properties are for testing/debugging purposes and should normally be empty-->
   <property name="MODIFIER"     value=""/>  
   <property name="DEBUGLEVEL"   value=""/>
   <property name="STATIC"       value=""/>  

   <property name="domainparams_O128"
             value="coupler_nml:ocean_npes=128;
                    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    dummy_ice_nml:ice_layout=16,8;dummy_ice_nml:ice_io_layout=1,4;
                    icebergs_nml:make_calving_reproduce=.true.;
                    dummy_ocean_nml:ocean_layout=16,8;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O128x2"
             value="coupler_nml:ocean_npes=128;coupler_nml:ocean_nthreads=2;coupler_nml:atmos_nthreads=2;
                    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    dummy_ice_nml:ice_layout=16,8;dummy_ice_nml:ice_io_layout=1,4;
                    icebergs_nml:make_calving_reproduce=.true.;
                    dummy_ocean_nml:ocean_layout=16,8;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O128x1h"
             value="coupler_nml:ocean_npes=128;coupler_nml:ocean_nthreads=1;coupler_nml:atmos_nthreads=1;
                    dcoupler_nml:use_hyper_thread=.T.;dcoupler_nml:ncores_per_node=32;
                    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    dummy_ice_nml:ice_layout=16,8;dummy_ice_nml:ice_io_layout=1,4;
                    icebergs_nml:make_calving_reproduce=.true.;
                    dummy_ocean_nml:ocean_layout=16,8;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O128x2h"
             value="coupler_nml:ocean_npes=128;coupler_nml:ocean_nthreads=2;coupler_nml:atmos_nthreads=2;
                    dcoupler_nml:use_hyper_thread=.T.;dcoupler_nml:ncores_per_node=32;
                    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    dummy_ice_nml:ice_layout=16,8;dummy_ice_nml:ice_io_layout=1,4;
                    icebergs_nml:make_calving_reproduce=.true.;
                    dummy_ocean_nml:ocean_layout=16,8;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O256"
             value="coupler_nml:ocean_npes=256;
                    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    dummy_ice_nml:ice_layout=16,16;dummy_ice_nml:ice_io_layout=1,4;
                    icebergs_nml:make_calving_reproduce=.true.;
                    dummy_ocean_nml:ocean_layout=16,16;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O360"
             value="coupler_nml:ocean_npes=360;
                    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    dummy_ice_nml:ice_layout=36,10;dummy_ice_nml:ice_io_layout=1,5;
                    icebergs_nml:make_calving_reproduce=.true.;
                    dummy_ocean_nml:ocean_layout=36,10;dummy_ocean_nml:ocean_io_layout=1,5;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O432"
             value="coupler_nml:ocean_npes=432;
                    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
                    icebergs_nml:make_calving_reproduce=.true.;
                    dummy_ocean_nml:ocean_layout=36,12;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O512"
	     value="coupler_nml:ocean_npes=512;
	            dummy_ice_nml:ice_layout=32,16;dummy_ice_nml:ice_io_layout=1,4;
		    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    icebergs_nml:make_calving_reproduce=.true.;
	            dummy_ocean_nml:ocean_layout=32,16;dummy_ocean_nml:ocean_io_layout=1,1;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O512x2"
	     value="coupler_nml:ocean_npes=512;coupler_nml:ocean_nthreads=2;coupler_nml:atmos_nthreads=2;
	            dummy_ice_nml:ice_layout=32,16;dummy_ice_nml:ice_io_layout=1,4;
		    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    icebergs_nml:make_calving_reproduce=.true.;
	            dummy_ocean_nml:ocean_layout=32,16;dummy_ocean_nml:ocean_io_layout=1,1;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O512x1h"
	     value="coupler_nml:ocean_npes=512;coupler_nml:ocean_nthreads=1;coupler_nml:atmos_nthreads=1;
                    dcoupler_nml:use_hyper_thread=.T.;dcoupler_nml:ncores_per_node=32;
	            dummy_ice_nml:ice_layout=32,16;dummy_ice_nml:ice_io_layout=1,4;
		    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    icebergs_nml:make_calving_reproduce=.true.;
	            dummy_ocean_nml:ocean_layout=32,16;dummy_ocean_nml:ocean_io_layout=1,1;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O648"
	     value="coupler_nml:ocean_npes=648;
	            dummy_ice_nml:ice_layout=18,36;dummy_ice_nml:ice_io_layout=1,4;
		    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    icebergs_nml:make_calving_reproduce=.true.;
	            dummy_ocean_nml:ocean_layout=18,36;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O864"
	     value="coupler_nml:ocean_npes=864;
	            dummy_ice_nml:ice_layout=24,36;dummy_ice_nml:ice_io_layout=1,4;
		    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    icebergs_nml:make_calving_reproduce=.true.;
	            dummy_ocean_nml:ocean_layout=24,36;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O1152"
	     value="coupler_nml:ocean_npes=1152;
	            dummy_ice_nml:ice_layout=32,36;dummy_ice_nml:ice_io_layout=1,4;
		    dummy_ice_nml:ice_mask_table=MOM_mask_table;
                    icebergs_nml:make_calving_reproduce=.true.;
	            dummy_ocean_nml:ocean_layout=32,36;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O1756"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1756;
               dummy_ice_nml:ice_layout=32,72;dummy_ice_nml:ice_io_layout=1,4;
               dummy_ice_nml:ice_mask_table=mask_table.548.32x72;
               dummy_ocean_nml:ocean_layout=32,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.548.32x72"/>

   <property name="domainparams_O1970"
             value="coupler_nml:ocean_npes=1970;
                    dummy_ice_nml:ice_layout=36,72;dummy_ice_nml:ice_io_layout=1,4;
                    dummy_ice_nml:ice_mask_table=mask_table.622.36x72;
                    dummy_ocean_nml:ocean_layout=36,72;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=mask_table.622.36x72"/>

   <property name="domainparams_O2304"
	     value="coupler_nml:ocean_npes=2304;
	            dummy_ice_nml:ice_layout=32,72;dummy_ice_nml:ice_io_layout=1,4;
		    dummy_ice_nml:ice_mask_table=MOM_mask_table;
	            dummy_ocean_nml:ocean_layout=32,72;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_O2432"
	     value="coupler_nml:ocean_npes=2432;
	            dummy_ice_nml:ice_layout=45,72;dummy_ice_nml:ice_io_layout=1,4;
		    dummy_ice_nml:ice_mask_table=mask_table.808.45x72;
	            dummy_ocean_nml:ocean_layout=45,72;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=mask_table.808.45x72"/>

   <property name="domainparams_O2997"
	     value="coupler_nml:ocean_npes=2997;
	            dummy_ice_nml:ice_layout=90,45;dummy_ice_nml:ice_io_layout=9,5;
		    dummy_ice_nml:ice_mask_table=mask_table.1053.90x45;
	            dummy_ocean_nml:ocean_layout=90,45;dummy_ocean_nml:ocean_io_layout=9,5;
                    dummy_ocean_nml:ocean_mask_table=mask_table.1053.90x45"/>

   <property name="domainparams_O3240"
	     value="coupler_nml:ocean_npes=3240;
	            dummy_ice_nml:ice_layout=45,72;dummy_ice_nml:ice_io_layout=1,4;
	            dummy_ocean_nml:ocean_layout=45,72;dummy_ocean_nml:ocean_io_layout=1,4;
                    dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <!--1/2 degree ocean grid Only-->
   <property name="domainparams_O951p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=951;
	       dummy_ice_nml:ice_layout=32,36;dummy_ice_nml:ice_io_layout=1,4;
               dummy_ice_nml:ice_mask_table=mask_table.201.32x36;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.201.32x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_O1057p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1057;
	       dummy_ice_nml:ice_layout=36,36;dummy_ice_nml:ice_io_layout=1,4;
               dummy_ice_nml:ice_mask_table=mask_table.239.36x36;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.239.36x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_O1300p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1300;
	       dummy_ice_nml:ice_layout=36,45;dummy_ice_nml:ice_io_layout=1,5;
               dummy_ice_nml:ice_mask_table=mask_table.320.36x45;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.320.36x45"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_O1441p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1441;
	       dummy_ice_nml:ice_layout=36,50;dummy_ice_nml:ice_io_layout=1,5;
               dummy_ice_nml:ice_mask_table=mask_table.359.36x50;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,50;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.359.36x50"/><!--1/2 degree ocean grid Only-->

    <property name="domainparams_O1608p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1608;
	       dummy_ice_nml:ice_layout=45,45;dummy_ice_nml:ice_io_layout=1,5;
               dummy_ice_nml:ice_mask_table=mask_table.417.45x45;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=45,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.417.45x45"/><!--1/2 degree ocean grid Only-->

    <property name="domainparams_O2700p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2700;
	       dummy_ice_nml:ice_layout=45,60;dummy_ice_nml:ice_io_layout=1,5;
               dummy_ice_nml:ice_mask_table=MOM_mask_table;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=45,60;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/><!--1/2 degree ocean grid Only-->
    <property name="domainparams_O2119p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2119;
	       atmos_model_nml:layout=45,60;atmos_model_nml:mask_table=mask_table.581.45x60;
	       land_model_nml:layout=45,60;land_model_nml:mask_table=mask_table.581.45x60;
	       dummy_ice_nml:ice_layout=45,60;dummy_ice_nml:ice_io_layout=1,5;
               dummy_ice_nml:ice_mask_table=mask_table.581.45x60;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=45,60;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.581.45x60"/><!--1/2 degree ocean grid Only-->

    <property name="domainparams_O2783p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2783;
	       atmos_model_nml:layout=60,60;atmos_model_nml:mask_table=mask_table.817.60x60;
	       land_model_nml:layout=60,60;land_model_nml:mask_table=mask_table.817.60x60;
	       dummy_ice_nml:ice_layout=60,60;dummy_ice_nml:ice_io_layout=1,5;
               dummy_ice_nml:ice_mask_table=mask_table.817.60x60;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=60,60;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.817.60x60"/><!--1/2 degree ocean grid Only-->

    <property name="domainparams_O3314p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=3314;
	       atmos_model_nml:layout=60,72;atmos_model_nml:mask_table=mask_table.1006.60x72;
	       land_model_nml:layout=60,72;land_model_nml:mask_table=mask_table.1006.60x72;
	       dummy_ice_nml:ice_layout=60,72;dummy_ice_nml:ice_io_layout=1,4;
               dummy_ice_nml:ice_mask_table=mask_table.1006.60x72;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=60,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.1006.60x72"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_O3925p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=3925;
	       dummy_ice_nml:ice_layout=72,72;dummy_ice_nml:ice_io_layout=1,4;
               dummy_ice_nml:ice_mask_table=mask_table.1259.72x72;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=72,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.1259.72x72"/><!--1/2 degree ocean grid Only-->
    
   <setup>
    <platform name="ncrc3.intel15">
      <project>gfdl_f</project>
      <directory stem="$(FRE_STEM)"/>
         <directory>
            <!--unswept locations-->
            <root>$CPERM/$USER/$(FRE_STEM)</root>
            <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
            <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
            <!--swept locations (including the staged archive location)-->
            <archive>$CTMP/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)</archive>
            <stdout>$CTMP/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
            <work>$CTMP/$USER/work/$(FRE_STEM)/$FRE_JOBID</work>
         </directory>
 
      <csh><![CDATA[
module use /sw/eslogin-c3/modulefiles
          source $MODULESHOME/init/csh
          module use -a /ncrc/home2/fms/local/modulefiles
          module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
          module unload netcdf fre fre-commands
          module load PrgEnv-intel/5.2.82
          module swap intel intel/15.0.2.164
          module load git
          module load $(FRE_VERSION)
module load nco/4.5.2
          setenv KMP_STACKSIZE 512m
          setenv NC_BLKSZ 1M
          alias cpget 'cp \!^ \!^.copy ; \rm -f \!^ ; mv \!^.copy \!^ ; chmod +w \!^ '

     ]]></csh>

     <property name="MY_ROOT"          value="$(rootDir)"/>
     <property name="FMS_ARCHIVE_ROOT" value="$CDATA/fms"/>
     <property name="F2003_FLAGS"      value="-DINTERNAL_FILE_NML -g -traceback"/> <!-- -g -traceback -->
     <property name="REFERENCE"        value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
     <property name="NB_ROOT"          value="/nbhome/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)"/>
     <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
     <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
     <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     <property name="ESM4_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/ESM4"/>
 
    </platform>
    <platform name="ncrc3.pgi15">
      <project>gfdl_f</project>
      <directory stem="$(FRE_STEM)"/>
         <directory>
            <!--unswept locations-->
            <root>$CPERM/$USER/$(FRE_STEM)</root>
            <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
            <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
            <!--swept locations (including the staged archive location)-->
            <archive>$CTMP/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)</archive>
            <stdout>$CTMP/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
            <work>$CTMP/$USER/work/$(FRE_STEM)/$FRE_JOBID</work>
         </directory>
 
      <csh><![CDATA[
module use /sw/eslogin-c3/modulefiles
        source $MODULESHOME/init/csh
 
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-pgi/5.2.82
        module swap pgi pgi/15.3.0 

        module load $(FRE_VERSION)
        module load git
        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
module load nco/4.5.2
     ]]></csh>

     <property name="MY_ROOT"          value="$(rootDir)"/>
     <property name="FMS_ARCHIVE_ROOT" value="$CDATA/fms"/>
     <property name="F2003_FLAGS"      value="-DINTERNAL_FILE_NML -g -traceback"/> <!-- -g -traceback -->
     <property name="REFERENCE"        value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
     <property name="NB_ROOT"          value="/nbhome/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)"/>
     <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
     <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
     <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     <property name="ESM4_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/ESM4"/>
 
    </platform>
    <platform name="ncrc3.gnu">
      <project>gfdl_f</project>
      <directory stem="$(FRE_STEM)"/>
         <directory>
            <!--unswept locations-->
            <root>$CPERM/$USER/$(FRE_STEM)</root>
            <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
            <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
            <!--swept locations (including the staged archive location)-->
            <archive>$CTMP/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)</archive>
            <stdout>$CTMP/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
            <work>$CTMP/$USER/work/$(FRE_STEM)/$FRE_JOBID</work>
         </directory>
 
      <csh><![CDATA[
module use /sw/eslogin-c3/modulefiles
        source $MODULESHOME/init/csh
 
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-gnu/5.2.82

        module load $(FRE_VERSION)
        module load git
        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
module load nco/4.5.2
     ]]></csh>

     <property name="MY_ROOT"          value="$(rootDir)"/>
     <property name="FMS_ARCHIVE_ROOT" value="$CDATA/fms"/>
     <property name="F2003_FLAGS"      value="-DINTERNAL_FILE_NML -fbacktrace"/> <!-- -g -traceback -->
     <property name="REFERENCE"        value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
     <property name="NB_ROOT"          value="/nbhome/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)"/>
     <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
     <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
     <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     <property name="ESM4_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/ESM4"/>
 
    </platform>
    <platform name="ncrc3.intel16">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_f</project>
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(FRE_STEM)</root>
        <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <!--swept locations (including the staged archive location)-->
        <archive>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CTMP/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
     
      <csh><![CDATA[
module use /sw/eslogin-c3/modulefiles

        source $MODULESHOME/init/csh
 
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-intel/5.2.82
        module swap intel intel/16.0.0.109

        module load $(FRE_VERSION)
        module load git
        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
      ]]></csh>

     <property name="MY_ROOT"          value="$(rootDir)"/>
     <property name="FMS_ARCHIVE_ROOT" value="$CDATA/fms"/>
     <property name="F2003_FLAGS"      value="-DINTERNAL_FILE_NML -g -traceback"/> <!-- -g -traceback -->
     <property name="REFERENCE"        value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
     <property name="NB_ROOT"          value="/nbhome/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)"/>
     <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
     <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
     <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     <property name="ESM4_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/ESM4"/>
    </platform>
    
    <platform name="ncrc3.default">
      <xi:include xpointer="xpointer(//setup/platform[@name='ncrc3.intel15']/node())" />
    </platform>

    <platform name="theia.intel">
      <project>gfdlport</project>
      <directory stem="$(FRE_STEM)">
        <root>/scratch4/GFDL/gfdlscr/$USER/$(stem)</root>
        <src>/scratch4/GFDL/gfdlscr/$USER/$(stem)/$(name)/src</src>
        <exec>/scratch4/GFDL/gfdlscr/$USER/$(stem)/$(name)/$(platform)-$(target)/exec</exec>
        <scripts>$HOME/$(stem)/$(name)/$(platform)-$(target)/scripts</scripts>
        <stdout>/scratch4/GFDL/gfdlscr/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
        <state>$HOME/$(stem)/$(name)/$(platform)-$(target)/state</state>
        <work>/scratch4/GFDL/gfdlscr/$USER/work/$FRE_JOBID</work>
        <ptmp>/scratch4/GFDL/gfdlscr/$USER/ptmp</ptmp>
        <archive>/scratch4/GFDL/gfdlscr/$USER/$(stem)/$(name)/$(platform)-$(target)</archive>
      </directory>

     <csh><![CDATA[
        module use -a /home/fms/local/modulefiles
        module use -a /contrib/gfdl/modulefiles
        module load intel/15.1.133
        module load netcdf/4.3.0
        module load hdf5/1.8.14
        module load impi/5.0.1.035
        module load nco
        module load $(FRE_VERSION)

        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
        ]]>
      </csh>

     <property name="MY_ROOT"          value="$(rootDir)"/>
     <property name="FMS_ARCHIVE_ROOT" value="$CDATA/fms"/>
     <property name="F2003_FLAGS"      value="-DINTERNAL_FILE_NML -g -traceback"/> <!-- -g -traceback -->
     <property name="REFERENCE"        value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
     <property name="NB_ROOT"          value="/nbhome/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)"/>
     <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
     <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
     <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     <property name="ESM4_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/ESM4"/>
    
    </platform>

    <platform name="theia.default">
      <xi:include xpointer="xpointer(//setup/platform[@name='theia.intel']/node())" />
    </platform>

    <platform name="olcf.eos_intel15">
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(stem)</root>
        <exec>$CPERM/$USER/$(stem)/$(name)/$(platform)-$(target)/exec</exec>
        <state>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <scripts>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <!--swept locations (including the staged archive location)-->
        <archive>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CPERM/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="MY_ROOT"          value="$(rootDir)"/>

      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="/ncrc/home2/Chris.Golaz/awg/tikal_201403/input"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/scratch4/GFDL/gfdlscr/Garrett.Wright/pdata/gfdl_M"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)/$(name)"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>

      <property name="FMS_ARCHIVE_ROOT" value="/lustre/atlas/proj-shared/cli061/pdata/fms" />
      <property name="FMS_ESM_ARCHIVE_ROOT" value="/lustre/atlas/proj-shared/cli061/pdata/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="/lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/retrospective"/>
     <property name="ESM4_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/ESM4"/>

      <project>cli061</project>
      <csh><![CDATA[
        module use -a /ccs/proj/cli061/local/modulefiles
#        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray #if unload and reload PrgEnv-intel it cannot find some modules
        module unload netcdf fre
#        module load PrgEnv-intel
        module swap intel intel/15.0.2.164 #does not find some system libraries
        module load $(FRE_VERSION)
        module load cray-netcdf/4.3.3.1
        module load gcp

#        module use /lustre/atlas/proj-shared/cli061/underwoo/hsm/modulefiles
        module load hsm
        setenv NC_BLKSZ 1M
        setenv KMP_STACKSIZE 512m
        setenv F_UFMTENDIAN big
setenv MPICH_ENV_DISPLAY
setenv MPICH_UNEX_BUFFER_SIZE 256m
limit stacksize unlimited
limit coredumpsize unlimited
        ]]>
     </csh>
    </platform>
    <platform name="olcf.default">
      <xi:include xpointer="xpointer(//setup/platform[@name='olcf.eos_intel15']/node())" />
    </platform>

<!-- gfdl platforms -->

    <platform name="gfdl.default">
      <property name="NB_ROOT"  value="/nbhome/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)"/><!--Do not change this! Other platforms use  the same value. -->
      <directory stem="$(FRE_STEM)">
        <archive>$ARCHIVE/$(stem)/$(name)/$(platform)-$(target)</archive>
        <postProcess>$(archiveDir)/pp</postProcess>
        <analysis>$(NB_ROOT)</analysis><!--Do not change this! frepp translates this to $out_dir. This is also the directory under which  frepp looks for mom6 clone.  -->
	<ptmp>/ptmp/$USER</ptmp>
      </directory>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML"/>
      <property name="MY_ROOT"          value="$(rootDir)"/>
      <property name="REFERENCE"         value=""/>
      <property name="ARCHIVE_INPUT_NZ"  value="/archive/Niki.Zadeh/input"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value=""/>
      <property name="OBGC_ARCHIVE_ROOT"    value=""/> 
      <property name="OBGC_MODEL_UPDATES"   value="/home/Jasmin.John"/>
     <property name="ESM4_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/ESM4"/>

      <csh><![CDATA[
        source $MODULESHOME/init/csh
        module use -a /home/fms/local/modulefiles
        module purge
        module load $(FRE_VERSION)
        module load fre-analysis
        module load git
        setenv FREVERSION $(FRE_VERSION)           
        setenv NBROOT $(NB_ROOT)
        /home/Niki.Zadeh/nnz_tools/bin/verify -m $(MOM6_GIT_TAG) -x dev 
       ]]>
      </csh>
    </platform>

    <platform name="gfdl.ncrc3-intel15">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.default']/node())" />
    </platform>
    <platform name="gfdl.theia-default">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.default']/node())" />
    </platform>
    <platform name="gfdl.theia-intel">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.default']/node())" />
    </platform>

   </setup>

   <property name="OM4_033_ARCHIVE"  value="/lustre/f1/unswept/Niki.Zadeh/archive/input/verona/John.Dunne_OM4_033_20151028"/>
   <property name="OM4_05_ARCHIVE"  value="/lustre/f1/unswept/Niki.Zadeh/archive/input/verona/John.Dunne_OM4_05_20160517"/>
   
   
   <property name="MOM6_EXAMPLES"  value="$root/$(LIBS_ROOT)/src/mom6"/>
   <property name="MY_LIBS"        value="$(MY_ROOT)/$(FMS_LIB_DIR)"/>

   <experiment name="OM4_libs_compile">
      <description>
Make the executable for ocean-ice experiments.
      </description>
      <component name="fms" paths="shared" includeDir="$root/$(LIBS_ROOT)/src/shared/include">
         <description domainName="infrastructure" communityName="FMS" communityVersion="$(RELEASE)" communityGrid="NA"/>
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> shared.git </codeBase>
         </source>
         <compile>
            <cppDefs>-Duse_libMPI -Duse_netCDF $(F2003_FLAGS) -DMAXFIELDMETHODS_=400</cppDefs>
         </compile>
      </component>

      <component name="mom6" requires="fms" paths="mom6/src/MOM6/config_src/dynamic mom6/src/MOM6/config_src/coupled_driver mom6/src/MOM6/src/*/ mom6/src/MOM6/src/*/*/ ocean_shared">
       <description domainName="Ocean" communityName="GFDL-MOM6" communityVersion="$(MOM6_GIT_TAG)" communityGrid="Tripolar"/>
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> ocean_null.git </codeBase>
        <csh><![CDATA[
          \rm -rf ocean_null
          git clone -b $(MOM6_GIT_TAG) https://github.com/NOAA-GFDL/MOM6-examples.git mom6
          pushd mom6
          git checkout $(MOM6_GIT_TAG)  #needed for older git on zeus
          git submodule init src/MOM6 src/SIS2 src/icebergs tools/python/MIDAS
          git clone --recursive https://github.com/NOAA-GFDL/MOM6.git src/MOM6 
          git clone             https://github.com/NOAA-GFDL/SIS2.git src/SIS2
          git clone             https://github.com/NOAA-GFDL/icebergs.git src/icebergs
          git submodule update #This gets the right version of submodules
          popd


          #To use MOM6 diagnostics/remapping in generic tracers package ocean_shared should be compiled as part of the MOM6 library and NOT as a separate stand-alone library
	  git clone -b $(RELEASE) http://gitlab.gfdl.noaa.gov/fms/ocean_shared.git 
          (cd ocean_shared && git checkout user/nnz/verona_dev_merge)
	  
	
          pushd mom6
          set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
          if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
            ln -s /scratch4/GFDL/gfdlscr/pdata/gfdl_O/datasets/ .datasets
          else if ("${platform_domain}" =~ *"ccs.ornl.gov"* ) then
            ln -s /lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/ .datasets
          else
            ln -s /lustre/f1/pdata/gfdl_O/datasets/ .datasets
          endif
          popd	  

          test -e mom6/.datasets
          if ($status != 0) then
            echo ""; echo "" ; echo "   WARNING:  .datasets link in MOM6 examples directory is invalid"; echo ""; echo ""
          endif
           ]]>  </csh>
       </source>
       <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -D_USE_MOM6_DIAG -D_USE_GENERIC_TRACER -D_FILE_VERSION="'"`git-version-string $<`"'"]]> </cppDefs>
            <!--<makeOverrides>OPENMP=""</makeOverrides>--> <!-- openmp switch for MOM6 may cause crash -->

       </compile>
      </component>
      
      <component name="icebergs" paths="mom6/src/icebergs" requires="fms">
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> ocean_null.git </codeBase>
        <csh>\rm -rf ocean_null</csh>
       </source>
       <compile>
            <cppDefs><![CDATA[-D_FILE_VERSION="'"`git-version-string $<`"'"]]> </cppDefs>
       </compile>
       <description domainName="N/A" communityName="N/A" communityVersion="$(RELEASE)" communityGrid="N/A"/>
      </component>


      <component name="sis2" paths="mom6/src/SIS2 ice_param" requires="fms mom6 icebergs" includeDir="$root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/framework" > 
         <description domainName="Sea Ice SIS2" communityName="GFDL-SIS2" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
	   <codeBase version="$(RELEASE)"> ice_param.git </codeBase> 
         </source>
         <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]>
            </cppDefs>
         </compile>
      </component>

      <component name="land_null" paths="land_null" requires="fms">
         <description domainName="NA" communityName="NA" communityVersion="NA" communityGrid="NA"/>
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> land_null.git </codeBase>
         </source>
      </component>

      <component name="atmos_null" paths="atmos_null atmos_param/monin_obukhov atmos_param/diag_integral" requires="fms">
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
           <codeBase version="$(RELEASE)"> atmos_null.git atmos_param.git </codeBase>
         </source>
         <compile>
            <cppDefs>$(F2003_FLAGS) </cppDefs>
        </compile>
      </component>
   </experiment>

   <experiment name="MOM6_SIS2_compile" inherit="OM4_libs_compile">
      <component paths="shared" name="fms" includeDir="$root/$(LIBS_ROOT)/src/shared/include">
         <library path="$(MY_LIBS)/fms/libfms.a" headerDir="$(MY_LIBS)/fms"/>
      </component>
      <component name="land_null" paths="land_null" requires="fms">
         <library path="$(MY_LIBS)/land_null/libland_null.a" headerDir="$(MY_LIBS)/land_null"/>
      </component>
      <component name="atmos_null" paths="atmos_null atmos_param" requires="fms">
          <library path="$(MY_LIBS)/atmos_null/libatmos_null.a" headerDir="$(MY_LIBS)/atmos_null"/>
      </component>
      <component paths="mom6 ocean_shared" requires="fms" name="mom6">
         <library path="$(MY_LIBS)/mom6/libmom6.a" headerDir="$(MY_LIBS)/mom6"/>
      </component> 
      <component paths="icebergs" requires="fms" name="icebergs">
         <library path="$(MY_LIBS)/icebergs/libicebergs.a" headerDir="$(MY_LIBS)/icebergs"/>
      </component> 
      <component paths="sis2" requires="fms icebergs" name="sis2">
         <library path="$(MY_LIBS)/sis2/libsis2.a" headerDir="$(MY_LIBS)/sis2"/>
      </component> 
      <component name="coupler" paths="coupler" requires="fms land_null atmos_null sis2 mom6 icebergs">
         <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid="NA"/> 
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> coupler.git </codeBase>
         </source>
         <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>
   </experiment>

   <experiment name="MOM6_SIS2_compile_static_90x45" inherit="OM4_libs_compile">
      <component paths="shared" name="fms" includeDir="$root/$(LIBS_ROOT)/src/shared/include">
         <library path="$(MY_LIBS)/fms/libfms.a" headerDir="$(MY_LIBS)/fms"/>
      </component>
      <component name="land_null" paths="land_null" requires="fms">
         <library path="$(MY_LIBS)/land_null/libland_null.a" headerDir="$(MY_LIBS)/land_null"/>
      </component>
      <component name="atmos_null" paths="atmos_null atmos_param" requires="fms">
          <library path="$(MY_LIBS)/atmos_null/libatmos_null.a" headerDir="$(MY_LIBS)/atmos_null"/>
      </component>
      <component paths="ocean_shared" requires="fms" name="ocean_shared">
         <library path="$(MY_LIBS)/ocean_shared/libocean_shared.a" headerDir="$(MY_LIBS)/ocean_shared"/>
      </component> 
      <component paths="icebergs" requires="fms" name="icebergs">
         <library path="$(MY_LIBS)/icebergs/libicebergs.a" headerDir="$(MY_LIBS)/icebergs"/>
      </component> 
      <component paths="sis2" requires="fms icebergs" name="sis2">
         <library path="$(MY_LIBS)/sis2/libsis2.a" headerDir="$(MY_LIBS)/sis2"/>
      </component>
      <component name="mom6_static_90x45" requires="fms ocean_shared" paths="$root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory_90x45.h $root/$(LIBS_ROOT)/src/mom6/src/MOM6/config_src/coupled_driver $root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/*/ $root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/*/*/">
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> ocean_null.git </codeBase>
        <csh><![CDATA[
          \rm -rf ocean_null
          echo "No need to checkout any new source code for this component!" 
          /bin/cp  $root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory.h $root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory_90x45.h 
          /bin/sed "s/NIPROC_ 32/NIPROC_ 90/g" -i $root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory_90x45.h 
          /bin/sed "s/NJPROC_ 18/NJPROC_ 45/g" -i $root/$(LIBS_ROOT)/src/mom6/ice_ocean_SIS2/OM4_025/MOM_memory_90x45.h 
        ]]></csh>
         </source>
         <compile>
            <cppDefs><![CDATA[ $(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>

      
      <component name="coupler" paths="coupler" requires="fms land_null atmos_null sis2 mom6_static_90x45 ocean_shared icebergs">
         <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid="NA"/> 
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> coupler.git </codeBase>
         </source>
         <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>
   </experiment>
    
   <experiment name="OM4_common">
    <input>
      <namelist name="dummy_ocean_nml">
       ocean_layout = $(OCN_PROD_LAYOUT)
       ocean_io_layout = $(OCN_PROD_IO_LAYOUT)
       ocean_mask_table= $(PROD_MASK_TABLE)
     </namelist>
     <namelist name="dummy_ice_nml">
       ice_layout = $(ICE_PROD_LAYOUT)
       ice_io_layout = $(ICE_PROD_IO_LAYOUT)
       ice_mask_table=$(PROD_MASK_TABLE)
     </namelist>


     <csh type="always">
        <![CDATA[
#------------------------------------------
## Find out whether to restart.

if ( $currentSeg == 1 ) then
   set restart_flag = 'n'
else
   set restart_flag = 'r'
endif

ln -s $work/INPUT/ocean_topog.nc $work/INPUT/topog.nc 

touch $work/INPUT/MOM_override
touch $work/INPUT/SIS_override
touch $work/INPUT/MOM_layout
touch $work/INPUT/SIS_layout

# Record the job stdout location for later use timings database
cat >> $HOME/frejobs_stdout <<EOF_frejobs
$stdoutDir/$FRE_JOBID
EOF_frejobs

#scan auxiliary_nml
#the reason for defining dummy variables is to parse the stdout for the timing database, please leave them as is

set dummy = `awk '/ocean_mask_table/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set OCN_MASK_TABLE = $dummy
set dummy     = `awk '/ocean_layout/     {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set OCN_LAYOUT     = $dummy
set dummy  = `awk '/ocean_io_layout/  {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set OCN_IO_LAYOUT  = $dummy
set dummy  = `awk '/ocean_nthreads/  {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set OCEAN_OMP_THREADS  = $dummy

cat > $work/INPUT/MOM_layout << MOM_LAYOUT_EOF
#override undef NIPROC_IO
#override undef NJPROC_IO
#override undef NIPROC
#override undef NJPROC
#override IO_LAYOUT = $OCN_IO_LAYOUT
#override LAYOUT    = $OCN_LAYOUT
#override MASKTABLE = $OCN_MASK_TABLE
MOM_LAYOUT_EOF

if($OCEAN_OMP_THREADS) then
cat >> $work/INPUT/MOM_layout << MOM2_LAYOUT_EOF
OCEAN_OMP_THREADS = $OCEAN_OMP_THREADS
MOM2_LAYOUT_EOF
endif

#scan auxiliary_nml
set dummy = `awk '/ice_mask_table/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set ICE_MASK_TABLE = $dummy
set dummy = `awk '/ice_layout/     {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set ICE_LAYOUT     = $dummy
set dummy = `awk '/ice_io_layout/  {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set ICE_IO_LAYOUT  = $dummy

cat > $work/INPUT/SIS_layout << SIS_LAYOUT_EOF
#override undef NIPROC_IO
#override undef NJPROC_IO
#override undef NIPROC
#override undef NJPROC
#override IO_LAYOUT = $ICE_IO_LAYOUT
#override LAYOUT    = $ICE_LAYOUT
#override MASKTABLE = $ICE_MASK_TABLE
SIS_LAYOUT_EOF

cat > $work/INPUT/SIS_diurnal << SIS_diurnal_EOF
ADD_DIURNAL_SW = True ! This must ONLY be used in the ice-ocean mode, NOT fully coupled mode.
SIS_diurnal_EOF

# Copy AWG and OWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?flagOutputXferOn && $?flagOutputPostProcessOn && $currentSeg == 1 ) then
  #gcp --batch does not understand some variations of home filesystem like /autofs/mnt/ncrc-svm1_home1 so we need to massage rtsxml to comply
  set xmldirlocal = `dirname $rtsxml | sed -r "s/^\/(autofs|ncrc)\/.+\/$USER\//\~$USER\//"`
  set xmldirRemote = `echo $xmldirlocal | sed -r "$patternSedHome"`
  set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
  if ("${platform_domain}" == "ncrc.gov") then
    set xmldirRemote = `echo $xmldirlocal | sed -r "$patternSedHome;$patternSedCTMP;$patternSedCPERM"`
    gcp --batch -cd -r --sync $xmldirlocal/awg_include gfdl:$(NB_ROOT)/mdt_xml/
    gcp --batch -cd -r --sync $xmldirlocal/awg_include gfdl:$xmldirRemote/
  endif
  #trick to copy MOM6 directory but avoid traversing the .datasets links
  tar cvf mom6.tar --exclude='.datasets' -C $(MOM6_EXAMPLES) . > /dev/null
  mkdir mom6
  tar xvf mom6.tar -C ./mom6 > /dev/null
  if ("${platform_domain}" == "ncrc.gov") then
    gcp --batch -cd -r --sync mom6 gfdl:$(NB_ROOT)/
  else if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
    gcp -cd -r --sync mom6 gfdl:$(NB_ROOT)/
  endif
endif

#Handle hyperthreaded cases

set use_hyper_thread = `awk '/use_hyper_thread/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set atmos_nthreads = `awk '/atmos_nthreads/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set ocean_nthreads = `awk '/ocean_nthreads/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
if ( $use_hyper_thread == ".T." || $use_hyper_thread == ".true." ) then
   @ atmos_nthreads *= 2
   @ ocean_nthreads *= 2
   /bin/sed -r "s/atmos_nthreads.*/atmos_nthreads=$atmos_nthreads/g" -i $work/input.nml.unexpanded
   /bin/sed -r "s/ocean_nthreads.*/ocean_nthreads=$ocean_nthreads/g" -i $work/input.nml.unexpanded 
   alias runCommand /usr/bin/time -p `which aprun` -n $ocean_npes -j2 -d $ocean_nthreads ./$executable:t
endif

      ]]></csh>
    </input>
   </experiment>


   <experiment name="OM4_grid">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/grid_spec.nc</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/grid_spec.nc</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/grid_spec.nc</dataSource>
        <dataSource site="gfdl">/archive/gold/datasets/OM4_025/mosaic.v20140610.unpacked/grid_spec.nc</dataSource> 
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/atmos_mosaic_tile1Xland_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/atmos_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/land_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/land_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ocean_hgrid.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ocean_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ocean_mosaic.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ocean_topog.nc</dataSource>
       <!--hsmget cannot get this  <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/topog.nc</dataSource> -->
      </dataFile>
    </input>
   </experiment>

   <!--OM4 CORE forcing datasets-->
   <experiment name="CORE_data">
    <input>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/data_table</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ncar_precip.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/ncar_rad.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/q_10_mod.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/runoff.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/salt_restore.v20140616.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_saltrestore</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/slp.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/t_10_mod.clim.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/u_10_mod.clim.nc</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/v_10_mod.clim.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2/INPUT/cfc.bc.nc</dataSource>
      </dataFile>

    </input>
   </experiment>

   <!--OM4 CORE2 dynamic forcing datasets-->
   <experiment name="CORE2_data">
    <input>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/data_table_dyn</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/ncar_precip.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/ncar_rad.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/q_10_mod.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <!-- runoff -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/runoff.daitren.iaf.1948-2007.regridded.nc</dataSource>
      </dataFile>
      <!-- salt restore -->
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/PHC2_salx.2015_06_15.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/MOM_saltrestore</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/slp.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/t_10_mod.1948-2007.nomads.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/u_10_mod.1948-2007.nomads.nc</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/pdata/gfdl_G/CORE/IAF_v2.0/v_10_mod.1948-2007.nomads.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2/INPUT/cfc.bc.nc</dataSource>
      </dataFile>

    </input>
   </experiment>

   <experiment name="OM4_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_input</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/layer_coord.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/seawifs_1998-2006_smoothed_2X.v20140616.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/tidal_amplitude.v20140616.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/MOM_channels_global_025</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m_575m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_GS_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/All_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/WOA05_pottemp_salt.nc </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.33.16x18     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.96.32x18     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.242.32x36     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.274.36x36     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.315.32x45    
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.548.32x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.622.36x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.808.45x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1053.90x45
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1809.90x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1309.90x54     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1402.72x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.3785.90x144
      </dataFile>
      <dataFile label="input" target="INPUT/ocean_static_no_mask_table.nc" chksum="" size="" timestamp="">
          <dataSource site="ncrc">/lustre/f1/pdata/gfdl_O/datasets/OM4_025/mosaic.v20140610.unpacked/ocean_static.nc</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
      </dataFile>

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_saltrestore','INPUT/MOM_override'
     </namelist>

     <csh type="always"><![CDATA[
if ( $currentSeg == 1 ) then
   set restart_flag = 'n'
else
   set restart_flag = 'r'
endif

ln -s $work/INPUT/ocean_topog.nc $work/INPUT/topog.nc 

touch $work/INPUT/MOM_override
touch $work/INPUT/SIS_override

      ]]></csh>
 
     </input>

   </experiment>

   <experiment name="SIS2_data">
    <input>

     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
     </dataFile>
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/SIS_input</dataSource>
     </dataFile>

<!-- No init ice yet
     <dataFile label="input" target="INPUT/ice_model.res.nc" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/.datasets/OM4_025/INPUT/ice_model.res.v20140620.nc</dataSource>
     </dataFile>
-->
     <namelist name="SIS_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_diurnal','INPUT/SIS_override'
     </namelist>

     </input>
   </experiment>

   <experiment name="OBGC_COBALT_data">
    <input>
       <!-- IC files -->
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_n_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_p_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_i_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_o_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Alk.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/TCO2.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
         <dataSource
platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc</dataSource>
      </dataFile>

       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_horowitz/depflux_total.mean.1990.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Soluble_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Mineral_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_20141212</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/diag_table.COBALT_20141212</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_20141212</dataSource>
      </dataFile>

      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
      </dataFile>

      <!-- grid specific -->
      <dataFile label="input" target="INPUT/news_nutrients_quarterdeg.nc" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/news_nutrients_quarterdeg_20150918_v2.nc</dataSource>
      </dataFile>

      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.COBALT_20150915</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/data_table.COBALT_20150915</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/data_table.COBALT_20150915</dataSource>
      </dataFile>

     </input>

   </experiment>
   <experiment name="OBGC_COBALT_data_p5">
    <input>
       <!-- IC files -->
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_n_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_p_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_i_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_o_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Alk.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/TCO2.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
         <dataSource
platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc</dataSource>
      </dataFile>

       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_horowitz/depflux_total.mean.1990.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Soluble_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Mineral_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_20141212</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/diag_table.COBALT_20141212</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_20141212</dataSource>
      </dataFile>

      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
      </dataFile>

      <!-- grid specific -->
      <dataFile label="input" target="INPUT/news_nutrients_halfdeg.nc" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/unswept/Jasmin.John/datasets/ESM4/news_nutrients_halfdeg_20151207.nc</dataSource>
      </dataFile>

      <dataTable>
# jgj 2013/01/23 updated for COBALT
#nnz: chanaged news_nutrients_quarterdeg to news_nutrients_halfdeg
#
"OCN", "runoff_no3_flux_ice_ocn",   "NO3_CONC",   "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_ldon_flux_ice_ocn",  "LDON_CONC",  "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_sldon_flux_ice_ocn", "SLDON_CONC", "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_srdon_flux_ice_ocn", "SRDON_CONC", "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_ndet_flux_ice_ocn",  "NDET_CONC",  "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_po4_flux_ice_ocn",   "PO4_CONC",   "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_ldop_flux_ice_ocn",  "LDOP_CONC",  "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_sldop_flux_ice_ocn", "SLDOP_CONC", "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_srdop_flux_ice_ocn", "SRDOP_CONC", "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_fed_flux_ice_ocn", ""   , ""                             , "none" ,  0.0
"OCN", "runoff_alk_flux_ice_ocn", ""   , ""                             , "none" ,  0.48e-3
"OCN", "runoff_dic_flux_ice_ocn", ""   , ""                             , "none" ,  0.24e-3
"OCN", "runoff_lith_flux_ice_ocn", ""  , ""                             , "none" , 13.0e-3
"OCN", "dry_dep_fed_flux_ice_ocn", "FLUX",         "./INPUT/Soluble_Fe_Flux_moxim11_climatology.nc", "bilinear" , -1.0
"OCN", "dry_dep_lith_flux_ice_ocn", "FLUX",        "./INPUT/Mineral_Fe_Flux_moxim11_climatology.nc", "bilinear" , -1594.0
"OCN", "dry_dep_po4_flux_ice_ocn", "FLUX",         "./INPUT/Mineral_Fe_Flux_moxim11_climatology.nc", "bilinear" , -0.035
"OCN", "wet_dep_no3_flux_ice_ocn",  "NO3_WET_DEP", "./INPUT/depflux_total.mean.1990.nc", "bilinear" , -1.0
"OCN", "dry_dep_no3_flux_ice_ocn",  "NO3_DRY_DEP", "./INPUT/depflux_total.mean.1990.nc", "bilinear" , -1.0
"OCN", "wet_dep_nh4_flux_ice_ocn",  "NH4_WET_DEP", "./INPUT/depflux_total.mean.1990.nc", "bilinear" , -1.0
"OCN", "dry_dep_nh4_flux_ice_ocn",  "NH4_DRY_DEP", "./INPUT/depflux_total.mean.1990.nc", "bilinear" , -1.0
#
"ATM", "o2_flux_pcair_atm", ""         , ""                             , "none" , 0.21
"ATM", "co2_flux_pcair_atm", ""        , ""                             , "none" ,350.0e-6
"ATM", "co2_bot"       , ""        , ""                    , "none"     , 350.0e-6
#
## JGJ: add cfcs later - check scale factor
# "ATM", "cfc_11_flux_pcair_atm","CFC_11","INPUT/cfc.bc.nc","bilinear", 1.0e-12
# "ATM", "cfc_12_flux_pcair_atm","CFC_12","INPUT/cfc.bc.nc","bilinear", 1.0e-12
#      </dataTable>
	
     </input>

   </experiment>
  
   <!-- OCEAN  and ICE post-processing-->
   <experiment name="OM4_postprocess">
      <postProcess> 
         <csh><![CDATA[
         cd $work/RESTART
	 #Treat icebergs restarts and trajectories
         #Find non-empty iceberg restarts and combine them AND then remove uncombined restarts
	 #This should be handled properly by FRE
         #ncrcat icebergs.res.nc.* icebergs.res.nc
      ls icebergs.res.nc.*
      if( ! $status ) then
         which ncdump
         if( $status ) then
           echo ncdump not available! We need to stop the run or the model restarts incorrectly!
           exit 1
         endif

         set non_empty_restarts = ""
         foreach file ( `ls icebergs.res.nc.????` )
            if ( `ncdump -h $file | grep UNLIMITED | awk '{gsub(/\(/," ");print $6}'` ) set non_empty_restarts = "$non_empty_restarts $file"
         end
         if( "$non_empty_restarts" != "" ) then
          ncrcat $non_empty_restarts icebergs.res.nc
          if( ! -e icebergs.res.nc ) then
            echo ERROR: ncrcat did not produce icebergs restart file! We need to stop the run or the model restarts incorrectly!
            exit 1
          endif
         endif
         mkdir hide_from_fre
         mv icebergs.res.nc.* hide_from_fre/
         
         cd $work         
         mkdir hide_from_fre
         ncrcat iceberg_trajectories.nc.* iceberg_trajectories.nc
         mv iceberg_trajectories.nc.* hide_from_fre/
      endif
         #Save the last line of timestats without the first (step number) column as a signature of MOM6 answers
         tail -1 timestats | cut -c8- > RESTART/$enddate.timestats.res
         #Save the whole timestats under ascii/
         mv timestats $enddate.timestats
         mv timestats.nc $enddate.timestats.nc

         #Make a directory to trick FRE to pick up and archive in ascii
         mkdir extra.results
         mv *velocity_truncations MOM_parameter_doc* SIS_parameter_doc* seaice.stats ocean.stats *.ocean.stats* timestats extra.results/

         #Make perftools report and trick FRE to archive them 
         ls *.xf
         if ( ! $status ) then
           pat_report $executable:t+*.xf > extra.results/pat_report.out 
         endif

         #When the ocean uses a mask_table the ocean_static.nc file produced by the model run has holes in coordinates (geolon,geolat)
         #This causes problems for ferret and python tools for analysis.
         #Copy a non-masked version of ocean_static.nc to be saved as a history file to be used by the analysis scipts . 
         cp $work/INPUT/ocean_static_no_mask_table.nc $work/

         ]]></csh>

      <!--REFINE DIAG SCRIP -->
      <!--By default a refineDiag script causes the annual data to be unpacked and saved in /ptmp/$USER-->
      <refineDiag script="$(NB_ROOT)/mom6/tools/analysis/MOM6_refineDiag.csh  $(NB_ROOT)/mdt_xml/awg_include/refineDiag/refineDiag_data_stager_globalAve.csh"/>

      <!--PostProcessing component models-->
      <component type="ocean_5daily"   start="$(PP_START_YEAR)" source="ocean_5daily" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_A)" source="ocean_5daily"/>
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="ocean_5daily"/>
      </component>
      <component type="ocean_monthly"   start="$(PP_START_YEAR)" source="ocean_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" source="ocean_month">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_monthly.frepp"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)" source="ocean_month">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_monthly.frepp"/>
        </timeSeries>
      </component>
      <component type="ocean_monthly_z"   source="ocean_month_z" sourceGrid="ocean-tripolar">
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_annual_z" start="$(PP_START_YEAR)" source="ocean_annual_z"  sourceGrid="ocean-tripolar">
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual_z.frepp"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual_z.frepp"/>
        </timeAverage>

        <timeSeries freq="annual"  chunkLength="$(CHUNK_LENGTH_B)" source="ocean_annual_z"/>	
      </component>

      <component type="ocean_annual" start="$(PP_START_YEAR)"  source="ocean_annual"  sourceGrid="ocean-tripolar"> 
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual.frepp"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual.frepp"/>
        </timeAverage>
      </component>

      <!--Ocean scalars-->
      <component type="ocean_scalar_monthly"   source="ocean_scalar_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)" source="ocean_scalar_month"/>
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_B)"/>
      </component>
      
      <component type="ocean_scalar_annual"    source="ocean_scalar_annual" sourceGrid="ocean-tripolar">
        <timeSeries freq="annual"   chunkLength="$(CHUNK_LENGTH_B)" source="ocean_scalar_annual"/>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)"/>
      </component>

      <!--Ocean regions-->
      <component type="ocean_Barents_opening" source="rregionocean_Barents_opening" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Barents_opening"/>
      </component>
      <component type="ocean_Bering_Strait" source="rregionocean_Bering_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Bering_Strait"/>
      </component>
      <component type="ocean_Davis_Strait" source="rregionocean_Davis_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Davis_Strait"/>
      </component>
      <component type="ocean_Windward_Passage" source="rregionocean_Windward_Passage" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Windward_Passage"/>
      </component>
      <component type="ocean_Denmark_Strait" source="rregionocean_Denmark_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Denmark_Strait"/>
      </component>
      <component type="ocean_Drake_Passage" source="rregionocean_Drake_Passage" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Drake_Passage"/>
      </component>
      <component type="ocean_English_Channel" source="rregionocean_English_Channel" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_English_Channel"/>
      </component>
      <component type="ocean_Faroe_Scotland" source="rregionocean_Faroe_Scotland" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Faroe_Scotland"/>
      </component>
      <component type="ocean_Florida_Bahamas" source="rregionocean_Florida_Bahamas" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Florida_Bahamas"/>
      </component>
      <component type="ocean_Fram_Strait" source="rregionocean_Fram_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Fram_Strait"/>
      </component>
      <component type="ocean_Iceland_Faroe_V" source="rregionocean_Iceland_Faroe_V" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Iceland_Faroe_V"/>
      </component>
      <component type="ocean_Iceland_Faroe_U" source="rregionocean_Iceland_Faroe_U" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Iceland_Faroe_U"/>
      </component>
      <component type="ocean_Indonesian_Throughflow" source="rregionocean_Indonesian_Throughflow" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Indonesian_Throughflow"/>
      </component>
      <component type="ocean_Mozambique_Channel" source="rregionocean_Mozambique_Channel" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Mozambique_Channel"/>
      </component>
      <component type="ocean_Pacific_undercurrent" source="rregionocean_Pacific_undercurrent" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Pacific_undercurrent"/>
      </component>
      <component type="ocean_Taiwan_Luzon" source="rregionocean_Taiwan_Luzon" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Taiwan_Luzon"/>
      </component>
      <component type="ocean_Agulhas_section" source="rregionocean_Agulhas_section" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Agulhas_section"/>
      </component>
      <component type="ocean_Gibraltar_Strait" source="rregionocean_Gibraltar_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Gibraltar_Strait"/>
      </component>
      <component type="ocean_Iceland_Norway" source="rregionocean_Iceland_Norway" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(CHUNK_LENGTH_B)" source="rregionocean_Iceland_Norway"/>
      </component>

      <!--ICE-->      
      <component type="ice"  start="$(PP_START_YEAR)"  source="ice_month"  sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)"  source="ice_month">
	   <analysis switch="$(ANALYSIS_SWITCH)" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
	</timeSeries>   
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)"  source="ice_month">
           <analysis switch="$(ANALYSIS_SWITCH)" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
        </timeSeries>
        <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)">
          <!-- MDBI, this will trigger "fredb" to log the experiment to database if MDBIswitch is on -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>

        </timeAverage>
	  
        <timeAverage source="annual"  interval="$(CHUNK_LENGTH_B)"/>
      </component>

     </postProcess>
   </experiment>

   <experiment name="OM4i_postprocess">

      <postProcess> 
         <csh><![CDATA[
         cd $work/RESTART
         #Treat icebergs restarts and trajectories
         #Find non-empty iceberg restarts and combine them AND then remove uncombined restarts
         #This should be handled properly by FRE
         #ncrcat icebergs.res.nc.* icebergs.res.nc
      ls icebergs.res.nc.*
      if( ! $status ) then
         which ncdump
         if( $status ) then
           echo ncdump not available! We need to stop the run or the model restarts incorrectly!
           exit 1
         endif

         set non_empty_restarts = ""
         foreach file ( `ls icebergs.res.nc.????` )
            if ( `ncdump -h $file | grep UNLIMITED | awk '{gsub(/\(/," ");print $6}'` ) set non_empty_restarts = "$non_empty_restarts $file"
         end
         if( "$non_empty_restarts" != "" ) then
          ~Rusty.Benson/ncrcat $non_empty_restarts icebergs.res.nc
          if( ! -e icebergs.res.nc ) then
            echo ncrcat did not produce icebergs restart file! We need to stop the run or the model restarts incorrectly!
            exit 1
          endif
         endif
         mkdir hide_from_fre
         mv icebergs.res.nc.* hide_from_fre/
         cd $work
         mkdir hide_from_fre
         ~Rusty.Benson/ncrcat iceberg_trajectories.nc.* iceberg_trajectories.nc
         mv iceberg_trajectories.nc.* hide_from_fre/
      endif

         #Save the last line of timestats without the first (step number) column as a signature of MOM6 answers
         tail -1 timestats | cut -c8- > RESTART/$enddate.timestats.res
         #Save the whole timestats under ascii/
         mv timestats $enddate.timestats
         mv timestats.nc $enddate.timestats.nc

         #Make a directory to trick FRE to pick up and archive in ascii
         mkdir extra.results
         mv *velocity_truncations MOM_parameter_doc* SIS_parameter_doc* seaice.stats timestats extra.results/

         ]]></csh>

      <!--REFINE DIAG SCRIP -->
      <!--By default a refineDiag script causes the annual data to be unpacked and saved in /ptmp/$USER-->
      <refineDiag script="$(NB_ROOT)/mom6/tools/analysis/MOM6_refineDiag.csh  $(NB_ROOT)/mdt_xml/awg_include/refineDiag/refineDiag_data_stager_globalAve.csh"/>

      <component type="ocean_monthly"   start="$(PP_START_YEAR)" source="ocean_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" source="ocean_month">
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)" source="ocean_month">
        </timeSeries>
      </component>
      <component type="ocean_monthly_z"   source="ocean_month_z" sourceGrid="ocean-tripolar">
        <timeAverage source="monthly" interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_annual" start="$(PP_START_YEAR)"  source="ocean_annual"  sourceGrid="ocean-tripolar"> 
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="annual" interval="$(CHUNK_LENGTH_B)"/>
      </component>
      <component type="ice"  start="$(PP_START_YEAR)"  source="ice_month"  sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)"  source="ice_month">
	   <analysis switch="$(ANALYSIS_SWITCH)" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
	</timeSeries>   
        <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_B)"  source="ice_month">
           <analysis switch="$(ANALYSIS_SWITCH)" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
        </timeSeries>
        <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
        <timeAverage source="annual"  interval="$(CHUNK_LENGTH_B)"/>
      </component>

     </postProcess>

   </experiment>

   <!--****************************************************************************************-->
   <!--***************************** 1/4 degree experiments        ****************************-->
   <!--****************************************************************************************-->
											      
   <experiment name="OM4_SIS2_baseline_config" inherit="MOM6_SIS2_compile$(STATIC)">
    <description communityProject="OWG" communityModel="OM4_SIS2 $(FRE_STEM)" communityModelID="OWG_OM4_SIS2" communityExperimentName="$(name)" >
 global 1/4 degree z test case
    </description>  
    <scenario 
      communityForcing="CORE"
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      startTime="$(PP_START_YEAR)"
      endTime="$(PP_END_YEAR)" 
      branch_time="0.0">
    </scenario>
    <communityComment>
    For more information please refer to the
    &lt;a href="http://wiki.gfdl.noaa.gov/index.php/MOM6"&gt; MOM6 Wiki.  &lt;/a&gt;
    </communityComment>


    <runtime>   
       <regression name="basic">
         <run months="1"   npes="$(PROD_NPES)"  runTimePerJob="01:30:00"/>
       </regression>
       <regression name="rts">
         <run days="15 16"  npes="$(PROD_NPES)"  runTimePerJob="01:30:00"/>
         <!--the following two should reproduce eachother but not the basic because basic uses mask_table-->
         <run days="2"  npes="2304" overrideParams="$(domainparams_O2304)" runTimePerJob="00:30:00"/>
         <run days="2"  npes="1152" overrideParams="$(domainparams_O1152)" runTimePerJob="00:30:00"/>
         <run days="2"  npes="512"  overrideParams="$(domainparams_O512)"  runTimePerJob="00:30:00"/>
       </regression>

      <regression name="timing">
         <run months="1"    npes="512" overrideParams="$(domainparams_O512x2)"  runTimePerJob="01:00:00"/>
         <run months="1"    npes="512" overrideParams="$(domainparams_O512)"    runTimePerJob="01:00:00"/>
         <run months="1"    npes="512" overrideParams="$(domainparams_O512x1h)" runTimePerJob="01:00:00"/>
       </regression>

      <regression name="timings">
          <run months="1"  npes="2997"  runTimePerJob="00:50:00" overrideParams="$(domainparams_O2997)"/>
          <run months="1"  npes="2432"  runTimePerJob="00:50:00" overrideParams="$(domainparams_O2432)"/>
          <run months="1"  npes="1970"  runTimePerJob="00:50:00" overrideParams="$(domainparams_O1970)"/>
       </regression>
      <regression name="debug">
         <run days="1"   npes="512" overrideParams="$(domainparams_O512)" runTimePerJob="01:30:00"/>
       </regression>

      <production simTime="$(PROD_SIMTIME)" units="years" npes="$(PROD_NPES)" runTime="$(PROD_RUNTIME)">
           <segment simTime="12" units="months" runTime="$(PROD_SEGTIME)"/>
       </production>

      <reference restart="$(REFERENCE)/1x1m0d_1756pe/restart/19000201.tar"/>

    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>

   </experiment>

   <experiment name="OM4_SIS2_baseline.$(MOM6_DATE)" inherit="OM4_SIS2_baseline"/>
   <experiment name="OM4_SIS2_baseline$(STATIC)" inherit="OM4_SIS2_baseline_config">
    <description communityProject="OWG" communityModel="OM4_SIS2 $(FRE_STEM)" communityModelID="OWG_OM4_SIS2" communityExperimentName="$(name)" >
 global 1/4 degree z test case
    </description>  
     <input>

      <xi:include xpointer="xpointer(//experiment[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <!--OM4 gridSpec mosaic datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_grid']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='CORE_data']/input/node())"/>

     
     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
     </dataFile>
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/field_table</dataSource>
     </dataFile>
      
      <diagTable>
$name
$baseDate
      </diagTable>

      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1900,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 1800,
       dt_atmos = 1800,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false. 
     </namelist>


    <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 8000000
            stack_size =0
      </namelist>
     <namelist name="fms_io_nml" >
         fms_netcdf_restart=.true.
         threading_read='multi'
         max_files_r = 200
         max_files_w = 200
!         checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>
     <namelist name="diag_manager_nml">
       max_axes = 150,
       max_files = 100,
       max_num_axis_sets = 100,
       max_input_fields = 699
       max_output_fields = 699
       mix_snapshot_average_fields=.false.
     </namelist>
     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

   </input>
   </experiment>


   <experiment name="OM4_SIS2_CORE2_baseline" inherit="OM4_SIS2_baseline_config">
    <description communityProject="OWG" communityModel="OM4_SIS2 $(FRE_STEM)" communityModelID="OWG_OM4_SIS2" communityExperimentName="$(name)" >
global 1/4 degree z test case
based off of the OM4_SIS2_baseline experiment
regridded runoff and salinity
CORE2 dynamic forcing data
    </description>  
     <input>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <!--OM4 gridSpec mosaic datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_grid']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='CORE2_data']/input/node())"/>

     <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Amy.Langenhorst/CORE/IAF_v2.0/20080101.ice_model.res.tar</dataSource>
        <dataSource site="gfdl">/archive/arl/CORE/IAF_v2.0/20080101.ice_model.res.tar</dataSource>
     </dataFile>
     
     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
     </dataFile>
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/field_table</dataSource>
     </dataFile>
      
      <diagTable>
$name
$baseDate
      </diagTable>

      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1948,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 3600,
       dt_atmos = 3600,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false. 
     </namelist>
     <namelist name="fms_nml">
       clock_grain='ROUTINE'
       clock_flags='NONE'
       domains_stack_size = 8000000
       stack_size =0
     </namelist>
     <namelist name="fms_io_nml" >
       fms_netcdf_restart=.true.
       threading_read='multi'
       max_files_r = 200
       max_files_w = 200
!       checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>
     <namelist name="xgrid_nml">
       make_exchange_reproduce = .false.
       interp_method = 'second_order'
     </namelist>
     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

   </input>
   </experiment>

   <experiment name="OM4_SIS2_CORE2_scatter" inherit="OM4_SIS2_CORE2_baseline">
     <input>
      <csh><![CDATA[
cat > $work/INPUT/MOM_override << OVERRIDE_EOF
#override ENERGYSAVEDAYS = 30
#override CALCULATE_APE = False

#override USE_KPP = False
#override ENERGETICS_SFC_PBL = True
#override MSTAR = 1.2
#override KD = 2.0E-6
#override FOX_KEMPER_ML_RESTRAT_COEF = 20.0
#override SMAG_LAP_CONST = 0.
#override AH_VEL_SCALE = 0.

#override RESOLN_SCALED_KH = False
#override CORIOLIS_SCHEME = "ARAKAWA_HSU90"
#override MEKE_BGSRC = 0.
#override MEKE_FRCOEFF = 1.0
#override MEKE_GMCOEFF = 0.0
#override MEKE_ALPHA_RHINES = 0.0
#override MEKE_ALPHA_EADY = 0.0
#override MEKE_ALPHA_GRID = 1.0
#override MEKE_VISCOSITY_COEFF = -0.4
#override MEKE_KH = 600.
#override MEKE_VISC_DRAG = False
#override MEKE_CB = 0.
#override MEKE_COLD_START = True
#override MEKE_BACKSCAT_RO_C = 8.0
#override MEKE_BACKSCAT_RO_POW = 2.0
OVERRIDE_EOF
     ]]></csh>
    </input>
   </experiment>

   <!--****************************************************************************************-->
   <!--***************************** 1 degree experiments        ****************************-->
   <!--****************************************************************************************-->


   <experiment name="MOM6_GOLD_SIS2_bergs" inherit="MOM6_SIS2_compile">
    <description communityProject="OWG" communityModel="MOM6_GOLD_SIS2 $(FRE_STEM)" communityModelID="OWG_MOM6_GOLD_SIS2" communityExperimentName="$(name)" >
 global 1 degree i test case
    </description>                                               
    <scenario 
      communityForcing="CORE"
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      startTime="$(PP_START_YEAR)"
      endTime="$(PP_END_YEAR)" 
      branch_time="0.0">
    </scenario>
    <communityComment>
    For more information please refer to the
    &lt;a href="http://wiki.gfdl.noaa.gov/index.php/MOM6"&gt; MOM6 Wiki.  &lt;/a&gt;
    </communityComment>
     <input>                                                 
     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/SIS2_icebergs/input.nml</dataSource>
    </dataFile>                                                                                   
     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">                   
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/SIS2_icebergs/diag_table</dataSource>
     </dataFile>                                                                                    
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">                   
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/field_table</dataSource>
     </dataFile>                                                                                     
     <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">                     
        <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/data_table</dataSource> 
     </dataFile>                                                                                     
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">                         
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/MOM_input</dataSource> 
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/SIS_input</dataSource> 
     </dataFile>      
                                                                             
      <!--gridSpec mosaic datasets-->
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/grid_spec.nc</dataSource>
        <dataSource site="gfdl">/archive/gold/datasets/GOLD_SIS/riga/mosaic.unpacked/grid_spec.nc</dataSource> 
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/mosaic.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_hgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic_tile1Xland_mosaic_tile1.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/atmos_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_hgrid.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mask.nc</dataSource>                            
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mosaic.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/land_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource> 
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_hgrid.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_mask.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_mosaic.nc</dataSource>                         
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocean_vgrid.nc</dataSource>                          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/README</dataSource>                                  
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/topog.nc</dataSource>                                
      </dataFile>                                                                                                                        

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/cfc.bc.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/geothermal_heating_cm2g.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/gustiness_qscat.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/OM3_zgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/seawifs_1998-2006_GOLD_smoothed_2X.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/sgs_h2.nc</dataSource>                            
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/tideamp.nc</dataSource>                           
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/tke_tidal_cm2p2.nc</dataSource>                   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>                                                                                                                     

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ncar_precip_clim.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ncar_rad_clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/q_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/runoff.nc</dataSource>          
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/salt_restore.nc</dataSource>    
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/slp.clim.nc</dataSource>        
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/sst_ice_clim.nc</dataSource>    
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/t_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/u_10_mod.clim.nc</dataSource>   
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/v_10_mod.clim.nc</dataSource>   
      </dataFile>                                                                                                   

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/GOLD_IC.2010.11.15.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/ocmip2_cfc.res.nc</dataSource>
      </dataFile>                                                                                              

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/31Layer_zgrid.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/example_calving.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/temp_restore.nc</dataSource>
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/SIS2_icebergs/INPUT/GOLD_SIS_IC.nc</dataSource>
      </dataFile>

      <namelist name="coupler_nml">
       months = $months,           
       days   = $days,             
       current_date = 1,1,1,0,0,0,
       hours = 0                     
       minutes = 0                   
       seconds = 0                   
       calendar = 'NOLEAP',          
       dt_cpld  = 7200,              
       dt_atmos = 7200,              
       do_atmos = .false.,           
       do_land = .false.,            
       do_ice = .true.,              
       do_ocean = .true.,            
       atmos_npes = 0,            
       ocean_npes = 0,               
       concurrent = .false.          
       use_lag_fluxes=.true.         
     </namelist>                     

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override'  
     </namelist>

     <namelist name="SIS_input_nml" >
        output_directory = './',
        input_filename = '$restart_flag'
        restart_input_dir = 'INPUT/',
        restart_output_dir = 'RESTART/',
        parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_diurnal','INPUT/SIS_override' 
     </namelist>

     <namelist name="fms_io_nml" >
         fms_netcdf_restart=.true.
         threading_read='multi'
!         checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>
 
     <namelist name="icebergs_nml">
    verbose=.false.,
    verbose_hrs=24,
    traj_sample_hrs=24,
    debug=.false.,
    really_debug=.false.,
    use_slow_find=.true.,
    add_weight_to_ocean=.true.,
    passive_mode=.false.,
    generate_test_icebergs=.false.,
    speed_limit=0.,
    use_roundoff_fix=.true.,
    make_calving_reproduce=.true.,
force_all_pes_traj = .true.
     </namelist>

     <namelist name="dummy_ocean_nml">
       ocean_layout = 8,16
       ocean_io_layout = 4,4
       ocean_mask_table='MOM_mask_table'
     </namelist>
     <namelist name="dummy_ice_nml">
       ice_layout = 8,16
       ice_io_layout = 4,4
       ice_mask_table='MOM_mask_table'
     </namelist>

     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

      <xi:include xpointer="xpointer(//experiment[@name='OM4_common']/input/node())"/>


   </input>
   <runtime>
       <regression name="basic">
         <run days="20"    npes="128"  runTimePerJob="00:30:00"/>
       </regression>
       <regression name="rts">
         <run days="10 10" npes="128"  runTimePerJob="00:30:00"/>
         <run days="20" npes="64" overrideParams="dummy_ocean_nml:ocean_layout=4,16;dummy_ocean_nml:ocean_io_layout=1,4;dummy_ice_nml:ice_layout=4,16;dummy_ice_nml:ice_io_layout=1,4" runTimePerJob="00:30:00"/>
         <run days="20"    npes="32" overrideParams="dummy_ocean_nml:ocean_layout=4,8;dummy_ocean_nml:ocean_io_layout=1,4;dummy_ice_nml:ice_layout=4,8;dummy_ice_nml:ice_io_layout=1,4" runTimePerJob="00:30:00"/>
         <run days="20"    npes="30" overrideParams="dummy_ocean_nml:ocean_layout=5,6;dummy_ocean_nml:ocean_io_layout=1,3;dummy_ice_nml:ice_layout=5,6;dummy_ice_nml:ice_io_layout=1,3" runTimePerJob="00:30:00"/>
       </regression>

       <regression name="debug">
         <run days="2"    npes="64" overrideParams="dummy_ocean_nml:ocean_layout=4,16;dummy_ocean_nml:ocean_io_layout=1,2;dummy_ice_nml:ice_layout=4,16;dummy_ice_nml:ice_io_layout=1,4" runTimePerJob="00:30:00"/>

       </regression>

       <production simTime="$(PROD_SIMTIME)" units="years" npes="128" runTime="$(PROD_RUNTIME)">
           <segment simTime="12" units="months" runTime="02:00:00"/>
       </production>

       <reference restart="$(REFERENCE)/1x0m20d_64pe/restart/00010121.tar"/>
   </runtime>
    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='OM4i_postprocess']/postProcess/node())"/>
    </postProcess>

   </experiment>

   <experiment name="MOM6_GOLD_SIS2_nobergs" inherit="MOM6_GOLD_SIS2_bergs">
    <input>
      
     <csh><![CDATA[
cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override DO_ICEBERGS = False
SIS_OVERRIDE_EOF
     ]]></csh>
     
    </input>
   </experiment>

   <experiment name="MOM6_GOLD_SIS2_generics" inherit="MOM6_GOLD_SIS2_bergs">
    <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1970,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 7200,
       dt_atmos = 7200,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.true.
     </namelist>
         <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_CFC=.true.
       do_generic_SF6=.true.
       do_generic_age=.true.
       do_generic_argon=.true.
       do_generic_COBALT=.false.
       do_generic_TOPAZ=.false.
         </namelist>

<!--Once we have the surface forcing file we can use it this way	 
      <dataTable order="append">
"ATM", "sf6_flux_pcair_atm","SF6","INPUT/sf6.bc.nc",.false., 1.0
	</dataTable>
-->

      <fieldTable order="append">
"namelists","ocean_mod","generic_age/*global*"
/

      </fieldTable>

      <diagTable order="append">
#================
# Additional DIAGNOSTICS
#================
#
#==================
# GENERIC TRACERS
#==================
#
## tracer quantities
"generic_tracers",          1,  "days", 1, "days", "time",
"generic_cfc","cfc_11",     "cfc_11",     "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc_12",     "cfc_12",     "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc_11_stf", "cfc_11_stf", "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc_12_stf", "cfc_12_stf", "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc_11_stf_gas", "cfc_11_stf_gas", "generic_tracers","all",.true.,"none",2
"generic_cfc","cfc_12_stf_gas", "cfc_12_stf_gas", "generic_tracers","all",.true.,"none",2
"generic_sf6","sf6",        "sf6",        "generic_tracers","all",.true.,"none",2
"generic_sf6","sf6_stf",    "sf6_stf",    "generic_tracers","all",.true.,"none",2
"generic_age","age",        "age",        "generic_tracers","all",.true.,"none",2
"generic_age","age_stf",    "age_stf",    "generic_tracers","all",.true.,"none",2
"generic_argon","argon",    "argon",        "generic_tracers","all",.true.,"none",2
"generic_argon","argon_stf","argon_stf",    "generic_tracers","all",.true.,"none",2
#
"ocean_model","temp","temp","generic_tracers","all",.true.,"none",2
"ocean_model","salt","salt","generic_tracers","all",.true.,"none",2

#
"generic_tracers_z",          1,  "days", 1, "days", "time",
"generic_cfc_z_new","cfc_11",     "cfc_11",     "generic_tracers_z","all",.true.,"none",2
"generic_cfc_z_new","cfc_12",     "cfc_12",     "generic_tracers_z","all",.true.,"none",2
"generic_cfc_z_new","cfc_11_stf", "cfc_11_stf", "generic_tracers_z","all",.true.,"none",2
"generic_cfc_z_new","cfc_12_stf", "cfc_12_stf", "generic_tracers_z","all",.true.,"none",2
"generic_sf6_z_new","sf6",        "sf6",        "generic_tracers_z","all",.true.,"none",2
"generic_sf6_z_new","sf6_stf",    "sf6_stf",    "generic_tracers_z","all",.true.,"none",2
"generic_age_z_new","age",        "age",        "generic_tracers_z","all",.true.,"none",2
"generic_age_z_new","age_stf",    "age_stf",    "generic_tracers_z","all",.true.,"none",2
"generic_argon_z_new","argon",    "argon",      "generic_tracers_z","all",.true.,"none",2
"generic_argon_z_new","argon_stf","argon_stf",  "generic_tracers_z","all",.true.,"none",2
#
"ocean_model_z_new","temp","temp","generic_tracers_z","all",.true.,"none",2
"ocean_model_z_new","salt","salt","generic_tracers_z","all",.true.,"none",2

      </diagTable>

     <csh>
        <![CDATA[
cat > $work/INPUT/MOM_override << OVERRIDE_EOF
#override USE_OCMIP2_CFC = False
#override USE_IDEAL_AGE_TRACER = False
USE_generic_tracer = True
GENERIC_TRACER_IC_FILE = "_NULL_"
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"
OVERRIDE_EOF

#Add null CFC's to a restart file
cd $work/INPUT
#ncap -O --script 'cfc_11 = ptemp * 0.0 ; cfc_12 = ptemp * 0.0 ; sf6 = ptemp * 0.0 ; age  = ptemp * 0.0 ; argon = ptemp * 0.0 ' GOLD_IC.2010.11.15.nc MOM_GENERICS.res.nc
#CFC is constant_init_tracer so the ice fluxes are not needed.
\rm ice_ocmip2_cfc.res.nc

     ]]></csh>

   </input>

   <runtime>
       <reference restart="$(REFERENCE)/1x0m20d_32pe/restart/19700121.tar"/>
   </runtime>

   </experiment>

   <!--****************************************************************************************-->
   <!--***************************** 1/3 degree experiments        ****************************-->
   <!--****************************************************************************************-->
											      
   <experiment name="OM4_033grid_data">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/grid_spec.nc</dataSource>
        <dataSource site="theia">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/grid_spec.nc</dataSource>
        <dataSource site="olcf">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/grid_spec.nc</dataSource>
        <dataSource site="gfdl">/archive/jpd/OM4/OM4_033/MOM6-examples/ice_ocean_SIS2/OM4_033/preprocessing/mosaic_ocean.1080x768/grid_spec.nc</dataSource> 
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/atmos_mosaic_tile1Xland_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/atmos_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/land_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/land_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/ocean_hgrid.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/ocean_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/ocean_mosaic.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/mosaic_ocean.1080x768/ocean_topog.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/seawifs_1998-2006_smoothed_2X.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/tidal_amplitude.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/WOA05_ptemp_salt_annual.nc </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_033_ARCHIVE)/salt_restore.nc </dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_input</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_saltrestore</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/layer_coord.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/MOM_channels_global_025</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m_575m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_GS_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
      </dataFile>

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_saltrestore','INPUT/MOM_override'
     </namelist>

     <csh type="always"><![CDATA[
if ( $currentSeg == 1 ) then
   set restart_flag = 'n'
else
   set restart_flag = 'r'
endif

ln -s $work/INPUT/ocean_topog.nc $work/INPUT/topog.nc 

touch $work/INPUT/MOM_override
touch $work/INPUT/SIS_override

      ]]></csh>
     </input>
   </experiment>

   <experiment name="OM4_SIS2_033_baseline.$(MOM6_DATE)" inherit="OM4_SIS2_033_baseline"/>
   <experiment name="OM4_SIS2_033_baseline$(STATIC)" inherit="MOM6_SIS2_compile$(STATIC)">
    <description communityProject="OWG" communityModel="OM4_SIS2_033 $(FRE_STEM)" communityModelID="OWG_OM4_SIS2_033" communityExperimentName="$(name)" >
 global 1/3 degree z test case
    </description>  
    <scenario 
      communityForcing="CORE"
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      startTime="$(PP_START_YEAR)"
      endTime="$(PP_END_YEAR)" 
      branch_time="0.0">
    </scenario>
    <communityComment>
    For more information please refer to the
    &lt;a href="http://wiki.gfdl.noaa.gov/index.php/MOM6"&gt; MOM6 Wiki.  &lt;/a&gt;
    </communityComment>


    <input>
  
     <csh><![CDATA[
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 1080
#override NJGLOBAL = 768
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_annual.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_annual.nc"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
#override CHL_FILE              = "seawifs_1998-2006_smoothed_2X.nc"
#override SALT_RESTORE_FILE     = "salt_restore.nc"
#override TOPO_EDITS_FILE = ""

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 1080
#override NJGLOBAL = 768

SIS_OVERRIDE_EOF

     ]]></csh>


      <xi:include xpointer="xpointer(//experiment[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_033grid_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='CORE_data']/input/node())"/>

     
     <dataFile label="namelist" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/input.nml</dataSource>
     </dataFile>
     <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/field_table</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/field_table</dataSource>
     </dataFile>
      
      <diagTable>
$name
$baseDate
      </diagTable>

      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1900,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 3600,
       dt_atmos = 3600,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.false. 
     </namelist>


    <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 8000000
            stack_size =0
      </namelist>
     <namelist name="fms_io_nml" >
         fms_netcdf_restart=.true.
         threading_read='multi'
         max_files_r = 200
         max_files_w = 200
!         checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
     </namelist>

     <namelist name="diag_manager_nml">
       max_axes = 150,
       max_files = 100,
       max_num_axis_sets = 100,
       max_input_fields = 699
       max_output_fields = 699
       mix_snapshot_average_fields=.false.
     </namelist>

     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>
   </input>

   <runtime>   
       <regression name="basic">
         <run days="2"   npes="432"  overrideParams="$(domainparams_O432)"  runTimePerJob="00:30:00"/>
       </regression>
       <regression name="rts">
         <run days="1 1" npes="432"  overrideParams="$(domainparams_O432)"  runTimePerJob="00:30:00"/>
         <!--the following two should reproduce eachother but not the basic because basic uses mask_table-->
         <run days="2"  npes="512"  overrideParams="$(domainparams_O512)"  runTimePerJob="00:30:00"/>
         <run days="2"  npes="648"  overrideParams="$(domainparams_O648)"  runTimePerJob="00:30:00"/>
         <run days="2"  npes="864"  overrideParams="$(domainparams_O864)"  runTimePerJob="00:30:00"/>	 
          <!--the following is for checking the timings or production run-->
         <run months="1" npes="1152" overrideParams="$(domainparams_O1152)" runTimePerJob="00:50:00"/>
       </regression>
       
       <regression name="restarts">
         <run days="2"    npes="512" overrideParams="$(domainparams_O512)" runTimePerJob="00:30:00"/>
         <run days="1 1"  npes="512" overrideParams="$(domainparams_O512)" runTimePerJob="00:30:00"/>
       </regression>

      <regression name="debug">
         <run days="1"   npes="1152" overrideParams="$(domainparams_O1152)" runTimePerJob="01:30:00"/>
       </regression>

      <production simTime="$(PROD_SIMTIME)" units="years" npes="$(PROD_NPES)" runTime="$(PROD_RUNTIME)">
           <segment simTime="12" units="months" runTime="$(PROD_SEGTIME)"/>
       </production>

      <reference restart="$(REFERENCE)/1x0m2d_432x1o/restart/19000103.tar"/>

   </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>
     
   </experiment>
   
   <!--****************************************************************************************-->
   <!--***************************** 1/2 degree experiments        ****************************-->
   <!--****************************************************************************************-->
											      
   <experiment name="OM4_05grid_data">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/grid_spec.nc</dataSource>
        <dataSource site="theia">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/grid_spec.nc</dataSource>
        <dataSource site="olcf">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/grid_spec.nc</dataSource>
        <dataSource site="gfdl">/archive/jpd/OM4/OM4_05/MOM6-examples/ice_ocean_SIS2/OM4_05/preprocessing/mosaic_ocean.720x576/grid_spec.nc</dataSource> 
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/atmos_mosaic_tile1Xland_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/atmos_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/land_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/land_mosaic_tile1Xocean_mosaic_tile1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/ocean_hgrid.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/ocean_mask.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/ocean_mosaic.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/ocean_topog.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/seawifs_1998-2006_smoothed_2X.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/tidal_amplitude.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.239.36x36
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.320.36x45
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.201.32x36
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.548.36x72
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.417.45x45
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.359.36x50
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.581.45x60
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.817.60x60
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.1006.60x72
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.1259.72x72
      </dataFile>
      <dataFile label="input" target="INPUT/ocean_static_no_mask_table.nc" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/ocean_static.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/WOA05_ptemp_salt_monthly.nc </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/salt_restore.nc </dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/MOM_input</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/layer_coord.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/MOM_channels_global_025</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m_575m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_GS_edits.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
      </dataFile>

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_saltrestore','INPUT/MOM_override'
     </namelist>

     <csh type="always"><![CDATA[
if ( $currentSeg == 1 ) then
   set restart_flag = 'n'
else
   set restart_flag = 'r'
endif

ln -s $work/INPUT/ocean_topog.nc $work/INPUT/topog.nc 

touch $work/INPUT/MOM_override
touch $work/INPUT/SIS_override

      ]]></csh>
     </input>
   </experiment>


   <experiment name="OMp5_baseline.$(MOM6_DATE)" inherit="OMp5_baseline"/>
   <experiment name="OMp5_baseline$(STATIC)" inherit="MOM6_SIS2_compile$(STATIC)">

     <input>
      <namelist name="coupler_nml">
       months = $months,
       days   = $days,
       current_date = 1900,1,1,0,0,0,
       hours = 0
       minutes = 0
       seconds = 0
       calendar = 'NOLEAP',
       dt_cpld  = 3600,
       dt_atmos = 3600,
       do_atmos = .false.,
       do_land = .false.,
       do_ice = .true.,
       do_ocean = .true.,
       atmos_npes = 0,
       ocean_npes = 0,
       concurrent = .false.
       use_lag_fluxes=.true.
     </namelist>
     <namelist name="generic_tracer_nml">
       do_generic_tracer=.false.
       do_generic_CFC=.false.
       do_generic_COBALT=.false.
       do_generic_TOPAZ=.false.
       force_update_fluxes=.true. !This has to be set for THERMO_SPANS_COUPLING to work
     </namelist>
     <namelist name="diag_manager_nml">
       max_axes = 150,
       max_files = 100,
       max_num_axis_sets = 100,
       max_input_fields = 699
       max_output_fields = 699
       mix_snapshot_average_fields=.false.
     </namelist>
     <namelist name="fms_nml">
       clock_grain='ROUTINE'
       clock_flags='NONE'
       domains_stack_size = 7000000
       stack_size =0
     </namelist>
      <namelist name="dummy_ocean_nml">
       ocean_layout = 36,36
       ocean_io_layout = 1,4
       ocean_mask_table=mask_table.239.36x36
     </namelist>
     <namelist name="dummy_ice_nml">
       ice_layout = 36,36
       ice_io_layout = 1,4
       ice_mask_table=mask_table.239.36x36
     </namelist>

     <!--verona-->
     <namelist name="sat_vapor_pres_nml">
      construct_table_wrt_liq = .true.,
      construct_table_wrt_liq_and_ice = .true.,
     </namelist>

     <diagTable>
$name
$baseDate
     </diagTable>


      <xi:include xpointer="xpointer(//experiment[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_05grid_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='CORE_data']/input/node())"/>

  
      <csh><![CDATA[
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
#override CHL_FILE              = "seawifs_1998-2006_smoothed_2X.nc"
#override SALT_RESTORE_FILE     = "salt_restore.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override KHTR = 300.                                                                
MEKE_KHTH_FAC = 1.0                                                                  
VISC_RES_FN_POWER = 100 
#override DT = 1800
#override DT_THERM = 7200  
#override DIABATIC_FIRST = False
#override USE_generic_tracer = False
#override CHL_FROM_FILE = True
#override OCEAN_SURFACE_STAGGER = "C"
#override TOPO_EDITS_FILE       = ""
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576

SIS_OVERRIDE_EOF
     ]]></csh>

   </input>
   <runtime>   
       <regression name="basic">
         <run months="1" npes="1057" overrideParams="$(domainparams_O1057p5)" runTimePerJob="00:50:00"/>
       </regression>
       <regression name="rts">
         <run days="15 16" npes="1057" overrideParams="$(domainparams_O1057p5)" runTimePerJob="00:50:00"/>
         <!--the following two should reproduce eachother but not the basic because basic uses mask_table-->
         <run days="2"  npes="432"  overrideParams="$(domainparams_O432)"  runTimePerJob="00:30:00"/>
         <run days="2"  npes="512"  overrideParams="$(domainparams_O512)"  runTimePerJob="01:00:00"/>
         <run days="2"  npes="648"  overrideParams="$(domainparams_O648)"  runTimePerJob="01:00:00"/>
         <run days="2"  npes="864"  overrideParams="$(domainparams_O864)"  runTimePerJob="01:00:00"/>	 
       </regression>
       <regression name="restart">
         <run days="2"  npes="432"  overrideParams="$(domainparams_O432)"  runTimePerJob="00:30:00"/>
         <run days="1 1"  npes="432"  overrideParams="$(domainparams_O432)"  runTimePerJob="00:30:00"/>
       </regression>

       <regression name="timing">
         <run months="1" npes="128" overrideParams="$(domainparams_O128)" runTimePerJob="00:50:00"/>
         <run months="1" npes="128" overrideParams="$(domainparams_O128x2)" runTimePerJob="00:50:00"/>
         <run months="1" npes="128" overrideParams="$(domainparams_O128x1h)" runTimePerJob="00:50:00"/>
         <run months="1" npes="128" overrideParams="$(domainparams_O128x2h)" runTimePerJob="00:50:00"/>
         <run months="1" npes="256" overrideParams="$(domainparams_O256)" runTimePerJob="00:50:00"/>
       </regression>

       <regression name="timings">
         <run months="1" npes="1300" overrideParams="$(domainparams_O1300p5)" runTimePerJob="00:50:00"/>
         <run months="1" npes="1441" overrideParams="$(domainparams_O1441p5)" runTimePerJob="00:50:00"/>
         <run months="1" npes="1608" overrideParams="$(domainparams_O1608p5)" runTimePerJob="00:50:00"/>
        <run months="1" npes="2119" overrideParams="$(domainparams_O2119p5)" runTimePerJob="01:40:00"/>
         <run months="1" npes="2700" overrideParams="$(domainparams_O2700p5)" runTimePerJob="01:40:00"/>
       </regression>
       <regression name="timings2">
         <run months="1" npes="951" overrideParams="$(domainparams_O951p5)" runTimePerJob="01:00:00"/>
         <run months="1" npes="1057" overrideParams="$(domainparams_O1057p5)" runTimePerJob="01:00:00"/>
         <run months="1" npes="2783" overrideParams="$(domainparams_O2783p5)" runTimePerJob="00:40:00"/>
         <run months="1" npes="3314" overrideParams="$(domainparams_O3314p5)" runTimePerJob="00:40:00"/>
       </regression>

      <regression name="debug">
         <run days="1"  npes="648"  overrideParams="$(domainparams_O648)"  runTimePerJob="01:00:00"/>
         <run days="1"  npes="432"  overrideParams="$(domainparams_O432)"  runTimePerJob="01:00:00"/>
         <run days="1"  npes="360"  overrideParams="$(domainparams_O360)"  runTimePerJob="01:00:00"/>
      </regression>

      <production simTime="$(PROD_SIMTIME)" units="years" npes="1057" runTime="$(PROD_RUNTIME)">
           <segment simTime="12" units="months" runTime="$(PROD_SEGTIME)"/>
       </production>

      <reference restart="$(REFERENCE)/1x1m0d_1057x1o/restart/19000201.tar"/>

   </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>
     

   </experiment>
   <experiment name="OMp5_COBALT_zdiag.$(MOM6_DATE)" inherit="OMp5_COBALT_zdiag"/>
   <experiment name="OMp5_COBALT_zdiag$(STATIC)" inherit="OMp5_baseline">

     <input>
     <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_CFC=.false.
       do_generic_COBALT=.true.
       do_generic_TOPAZ=.false.
       force_update_fluxes=.true. !This has to be set for THERMO_SPANS_COUPLING to work
     </namelist>
     <namelist name="diag_manager_nml">
       max_axes = 150,
       max_files = 100,
       max_num_axis_sets = 100,
       max_input_fields = 899
       max_output_fields = 899
       mix_snapshot_average_fields=.false.
     </namelist>


     <diagTable>
$name
$baseDate
     </diagTable>

     <diagTable order="append">
#================
# sample z DIAGNOSTICS
#================
#===========================
# ocean_cobalt_sample_z
#===========================
"ocean_cobalt_sample",       1,  "days", 1, "days", "time",
 "generic_cobalt","def_fe_Di",          "def_fe_Di",          "ocean_cobalt_sample","all",.true.,"none",2
 "generic_cobalt","chl",                "chl",                "ocean_cobalt_sample","all",.true.,"none",2
 "generic_cobalt","htotal",             "htotal",             "ocean_cobalt_sample","all",.true.,"none",2
 "generic_cobalt","alk",                "alk",                "ocean_cobalt_sample","all",.true.,"none",2
 "generic_cobalt","dic",                "dic",                "ocean_cobalt_sample","all",.true.,"none",2
 "generic_cobalt","o2",                 "o2",                 "ocean_cobalt_sample","all",.true.,"none",2
 "generic_cobalt","lith",               "lith",               "ocean_cobalt_sample","all",.true.,"none",2
 "generic_cobalt","dep_dry_lith",       "dep_dry_lith",       "ocean_cobalt_sample","all",.true.,"none",2
 "generic_cobalt","dep_wet_lith",       "dep_wet_lith",       "ocean_cobalt_sample","all",.true.,"none",2
#
 "ocean_model","temp","temp","ocean_cobalt_sample","all",.true.,"none",2
 "ocean_model","salt","salt","ocean_cobalt_sample","all",.true.,"none",2

"ocean_cobalt_sample_z",       1,  "days", 1, "days", "time",
 "generic_cobalt_z_new","def_fe_Di",          "def_fe_Di",          "ocean_cobalt_sample_z","all",.true.,"none",2
 "generic_cobalt_z_new","chl",                "chl",                "ocean_cobalt_sample_z","all",.true.,"none",2
 "generic_cobalt_z_new","htotal",             "htotal",             "ocean_cobalt_sample_z","all",.true.,"none",2
 "generic_cobalt_z_new","alk",                "alk",                "ocean_cobalt_sample_z","all",.true.,"none",2
 "generic_cobalt_z_new","dic",                "dic",                "ocean_cobalt_sample_z","all",.true.,"none",2
 "generic_cobalt_z_new","o2",                 "o2",                 "ocean_cobalt_sample_z","all",.true.,"none",2
 "generic_cobalt_z_new","lith",               "lith",               "ocean_cobalt_sample_z","all",.true.,"none",2
 "generic_cobalt_z_new","dep_dry_lith",       "dep_dry_lith",       "ocean_cobalt_sample_z","all",.true.,"none",2
 "generic_cobalt_z_new","dep_wet_lith",       "dep_wet_lith",       "ocean_cobalt_sample_z","all",.true.,"none",2
#
 "ocean_model_z_new","temp","temp","ocean_cobalt_sample_z","all",.true.,"none",2
 "ocean_model_z_new","salt","salt","ocean_cobalt_sample_z","all",.true.,"none",2

     </diagTable>

      <xi:include xpointer="xpointer(//experiment[@name='OM4_common']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_05grid_data']/input/node())"/>
      <!--SIS2 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <!--CORE forcing datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='CORE_data']/input/node())"/>
      <!--COBALT source datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OBGC_COBALT_Preind_data_p5']/input/node())"/>
      <!--COBALT field table-->
      <xi:include xpointer="xpointer(//experiment[@name='OBGC_COBALT_Preind_field_table']/input/node())"/>
      <!--COBALT diag table-->
      <xi:include xpointer="xpointer(//experiment[@name='OBGC_COBALT_diag_table']/input/node())"/>

<dataTable>
"OCN", "runoff_no3_flux_ice_ocn",   "NO3_CONC",   "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_ldon_flux_ice_ocn",  "LDON_CONC",  "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_sldon_flux_ice_ocn", "SLDON_CONC", "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_srdon_flux_ice_ocn", "SRDON_CONC", "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_ndet_flux_ice_ocn",  "NDET_CONC",  "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_po4_flux_ice_ocn",   "PO4_CONC",   "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_ldop_flux_ice_ocn",  "LDOP_CONC",  "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_sldop_flux_ice_ocn", "SLDOP_CONC", "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_srdop_flux_ice_ocn", "SRDOP_CONC", "./INPUT/news_nutrients.nc","none",1.0e-3
"OCN", "runoff_fed_flux_ice_ocn", ""   , ""                             , "none" ,  0.0
"OCN", "runoff_alk_flux_ice_ocn", ""   , ""                             , "none" ,  0.48e-3
"OCN", "runoff_dic_flux_ice_ocn", ""   , ""                             , "none" ,  0.24e-3
"OCN", "runoff_lith_flux_ice_ocn", ""  , ""                             , "none" , 13.0e-3
"OCN", "dry_dep_fed_flux_ice_ocn", "FLUX",         "./INPUT/Soluble_Fe_Flux_moxim11_climatology.nc", "bilinear" , -1.0
"OCN", "dry_dep_lith_flux_ice_ocn", "FLUX",        "./INPUT/Mineral_Fe_Flux_moxim11_climatology.nc", "bilinear" , -1594.0
"OCN", "dry_dep_po4_flux_ice_ocn", "FLUX",         "./INPUT/Mineral_Fe_Flux_moxim11_climatology.nc", "bilinear" , -0.035
"OCN", "wet_dep_no3_flux_ice_ocn",  "NO3_WET_DEP", "./INPUT/depflux_total.mean.1860.nc", "bilinear" , -1.0
"OCN", "dry_dep_no3_flux_ice_ocn",  "NO3_DRY_DEP", "./INPUT/depflux_total.mean.1860.nc", "bilinear" , -1.0
"OCN", "wet_dep_nh4_flux_ice_ocn",  "NH4_WET_DEP", "./INPUT/depflux_total.mean.1860.nc", "bilinear" , -1.0
"OCN", "dry_dep_nh4_flux_ice_ocn",  "NH4_DRY_DEP", "./INPUT/depflux_total.mean.1860.nc", "bilinear" , -1.0
#
# jgj 2015/12/09 data table for o2 gas exchange
#
"ATM", "o2_flux_pcair_atm", ""         , ""                             , "none" , 0.21
# jgj 2015/12/09 co2 data table for Preindustrial Control
#
## restoring co2 and radiation co2 data overrides set to 286e-6
"ATM" , "co2_dvmr_restore", "",     "", "none",  368.11e-06
"ATM" , "co2_dvmr_rad",     "",     "", "none",  368.11e-06
</dataTable>
  
      <csh><![CDATA[
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
#override SALT_RESTORE_FILE     = "salt_restore.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override KHTR = 300.                                                                
MEKE_KHTH_FAC = 1.0                                                                  
VISC_RES_FN_POWER = 100 
#override DT = 1800
#override DT_THERM = 7200  
#override DIABATIC_FIRST = False
#override OCEAN_SURFACE_STAGGER = "C"
#override TOPO_EDITS_FILE       = ""
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"

#override USE_generic_tracer = True
#override CHL_FROM_FILE = False

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576

SIS_OVERRIDE_EOF
     ]]></csh>

   </input>

   </experiment>
   
<experiment name="OBGC_COBALT_Preind_data_p5">
    <input>
       <!-- IC files -->
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_n_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_p_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_i_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_o_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Alk.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Preind_DIC.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
         <dataSource
platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc</dataSource>
      </dataFile>

       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_horowitz/depflux_total.mean.1860.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Soluble_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Mineral_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>

      <!-- grid specific -->
      <dataFile label="input" target="INPUT/news_nutrients.nc" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(ESM4_ARCHIVE_ROOT)/news_nutrients_halfdeg_20151207.nc</dataSource>
      </dataFile>

     </input>

</experiment>

<experiment name="OBGC_COBALT_Preind_data_table">
    <input>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.COBALT_preind_20151209</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.COBALT_preind_20151209</dataSource>
      </dataFile>
    </input>
</experiment>

<experiment name="OBGC_COBALT_diag_table">
    <input>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_with_z_20160505</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_with_z_20160505</dataSource>
      </dataFile>
    </input>
</experiment>

<experiment name="OBGC_COBALT_Preind_field_table">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/field_table.COBALT_init_tracers_latlon_preind_dic_20151209</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/field_table.COBALT_init_tracers_latlon_preind_dic_20151209</dataSource>
      </dataFile>
    </input>
</experiment>

<experiment name="ESM4_o2_gas_exchange_data_table">
    <input>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.o2_20151209</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.o2_20151209</dataSource>
      </dataFile>
    </input>
</experiment>

<experiment name="ESM4_Preind_co2_data_table">
    <input>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.co2_preind_20151209</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.co2_preind_20151209</dataSource>
      </dataFile>
    </input>
</experiment>
	
<experiment name="ESM4_atmos_Preind_co2_field_table">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/field_table.atmos_co2_20151209</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/field_table.atmos_co2_20151209</dataSource>
      </dataFile>
     </input>
</experiment>
 

 <!-- OCEAN BGC post-processing-->
  <experiment name="COBALT_postprocess">

      <postProcess> 
      <!--REFINE DIAG SCRIP -->
      <!--By default a refineDiag script causes the annual data to be unpacked and saved in /ptmp/$USER-->
      <refineDiag script="$(NB_ROOT)/mom6/tools/analysis/MOM6_refineDiag.csh  $(NB_ROOT)/mdt_xml/awg_include/refineDiag/refineDiag_data_stager_globalAve.csh"/>

      <!--PostProcessing component models-->
      <component type="ocean_cobalt_1day" start="$(PP_START_YEAR)" source="ocean_cobalt_1day" sourceGrid="ocean-tripolar">
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_A)" />
      </component>

      <component type="ocean_cobalt_tracers_month" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_month" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

<!--
      <component type="ocean_cobalt_tracers_year" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_year" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
-->

      <component type="ocean_cobalt_sfc" start="$(PP_START_YEAR)" source="ocean_cobalt_sfc" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_btm" start="$(PP_START_YEAR)" source="ocean_cobalt_btm" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_phytolim_sfc" start="$(PP_START_YEAR)" source="ocean_cobalt_phytolim_sfc" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_fdet_100" start="$(PP_START_YEAR)" source="ocean_cobalt_fdet_100" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_biomass_100" start="$(PP_START_YEAR)" source="ocean_cobalt_biomass_100" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_prod_100" start="$(PP_START_YEAR)" source="ocean_cobalt_prod_100" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_miscflux_100" start="$(PP_START_YEAR)" source="ocean_cobalt_miscflux_100" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

<!--
      <component type="ocean_cobalt_phyto_diags" start="$(PP_START_YEAR)" source="ocean_cobalt_phyto_diags" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_bact_diags" start="$(PP_START_YEAR)" source="ocean_cobalt_bact_diags" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
-->

<!--
      <component type="ocean_cobalt_zoo_diags" start="$(PP_START_YEAR)" source="ocean_cobalt_zoo_diags" sourceGrid="ocean-tripolar">
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
-->

      <component type="ocean_cobalt_misc" start="$(PP_START_YEAR)" source="ocean_cobalt_misc" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

 
<!-- cobalt diagnostics interpolated to 1x1 -->

<!--
      <component type="ocean_cobalt_1day_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_1day" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
        <timeSeries freq="daily" chunkLength="$(CHUNK_LENGTH_A)" />
      </component>
-->
<!--

      <component type="ocean_cobalt_tracers_month_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_month" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_tracers_year_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_year" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_sfc_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_sfc" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_btm_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_btm" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_phytolim_sfc_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_phytolim_sfc" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_fdet_100_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_fdet_100" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_biomass_100_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_biomass_100" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_prod_100_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_prod_100" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_miscflux_100_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_miscflux_100" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
         </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_phyto_diags_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_phyto_diags" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
      </dataFile>
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_bact_diags_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_bact_diags" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
      </dataFile>
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_zoo_diags_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_zoo_diags" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
      </dataFile>
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>

      <component type="ocean_cobalt_misc_1x1" start="$(PP_START_YEAR)" source="ocean_cobalt_misc" sourceGrid="ocean-tripolar" xyInterp="180,360">
         <dataFile label="xyInterpRegridFile">
            /archive/jgj/datasets/ESM4/remap/OM4_025_mosaic.remap.nc
      </dataFile>
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
-->

<!-- cobalt _z diagnostics
      <component type="ocean_cobalt_tracers_month_z" start="$(PP_START_YEAR)" source="ocean_cobalt_tracers_month_z" sourceGrid="ocean-tripolar">
         <timeSeries freq="monthly" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeSeries freq="annual" chunkLength="$(CHUNK_LENGTH_A)" />
         <timeAverage source="monthly"  interval="$(CHUNK_LENGTH_A)"/>
         <timeAverage source="annual"  interval="$(CHUNK_LENGTH_A)"/>
      </component>
-->

     </postProcess>

 </experiment>

</experimentSuite>
