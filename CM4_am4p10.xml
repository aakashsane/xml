<?xml version="1.0"?>
<!-- MDT XML version 20140522 -->

<!--
GFDL FAIR USE POLICY

GFDL recognizes the essential nature of collaboration in the scientific
enterprise, including the importance of novel application and analysis of our
models. In order to maximize mutual benefit from collaboration, the use of
experimental GFDL models** should be done in a manner that ensures that
individuals involved in model development receive proper credit for their
work; in order to minimize the potential for misapplication of experimental
models, collaborations should actively engage model developers. Publication of
results using experimental GFDL models should be done in consultation with
scientists that participated in the model development. Consultation with GFDL
model developers should occur before submission of publications based on
experimental GFDL models, and should include agreement on the appropriate level
of acknowledgment, co-authorship and participation by the model developers.
Since experimental models have not been thoroughly vetted, experimental GFDL
models and their output should be distributed only after consultation with the
developers of the model. After a GFDL model has been described in a
peer-reviewed publication it is no longer experimental, and results based on
the model should cite the publication(s) describing the model.
 
** "Experimental GFDL models" refers to models (e.g., a coupled climate model),
model components (e.g., parameterization schemes), model configurations (e.g.,
the specific arrangement and parameter settings of model components) arising
from model development efforts at GFDL, but whose formulation and configuration
have not yet been documented in the peer-reviewed literature, as well as outputs
from integrations with these models.
-->

<!-- GFDL Model Development Team (MDT) documentation: http://wiki.gfdl.noaa.gov/index.php/MDT_Coupled -->
<!-- GFDL MDT Atmosphere Working Group (AWG) documentation: http://cobweb.gfdl.noaa.gov/~cjg/awg/ -->

<!-- QUICK START GUIDE:

# Change the occcurances of YOURGROUPLETTER in this file to your group letter (small), such as f, w, o, g+,...

# To check out codes and compile:
module load fre/bronx-10
fremake -x CM4_am4p10.xml -p ncrc3.intel15 -t prod-openmp cm4_libs_compile -nolink
SIS:
fremake -x CM4_am4p10.xml -p ncrc3.intel15 -t prod-openmp cm4_compile
SIS2:
fremake -x CM4_am4p10.xml -p ncrc3.intel15 -t prod-openmp cm4_sis2_compile

# To run regression test (for the coupled experiment CM4_c96L32_am4g9_2000_lowmix ): 

frerun -r basic -x CM4_am4p10.xml -p ncrc3.intel15 -t prod-openmp CM4_c96L32_am4g9_2000_lowmix

# To run a complete coupled experiment (with automated database entry if MDBIswitch in "on"):

frerun -x CM4_am4p10.xml -p ncrc3.intel15 -t prod-openmp CM4_c96L32_am4g9_2000_lowmix

# To check what is the input data of this experiment:
inputfiles -x CM4_am4p10.xml -p ncrc3.intel15 CM4_c96L32_am4g9_2000_lowmix

NOTES:
      If the experiment name + FRESTEM is too long the post-process initiated on gaea may fail.
      This is because, there is a small limit set by moab on the number of total characters for
      ppEnv environment variable which  is roughly the sum of the strings made by
      1. the refine diag list
      2. the contents of the <csh> section of the gfdl platform
      
NOTE:
The AMIP experiments in this xml are derived from and identical to the ones in awg.xml 
They reproduce answers provided by AWG:
/lustre/f1/unswept/Niki.Zadeh/ulm_201505_awg_v20151106_awg_answers/c96L32_am4g9/ncrc3.intel15-prod-openmp/archive/
1x0m8d_216x2a/19800109.tar

-->

<experimentSuite rtsVersion="4" xmlns:xi="http://www.w3.org/2003/XInclude">

  <!--User should set the following properties according to the plan for the production run-->	
  <property name="RELEASE"      value="verona"/>              <!-- Release tag for the shared source code -->
  <property name="MOM6_DATE"    value="2016.10.14"/>              <!-- git tag date for MOM6 source code -->
  <property name="MOM6_GIT_TAG" value="dev/master/$(MOM6_DATE)"/> <!-- git tag for MOM6 source code -->
  <property name="AWG_GIT_TAG"  value="awg_v20160506"/>           <!-- git tag for AWG source code -->
  <property name="ProjectID"    value="MDT"/>                     <!-- database top level -->

  <property name="OM4_ANALYSIS" value="ice_ocean_SIS2/OM4_05"/>  <!--example containing .frepp scripts for analysis-->
                                                                  <!--Please set the value to ice_ocean_SIS2/OM4_05 for 1/2 degree ocean model runs--> 
  <property name="PROD_SIMTIME"     value="60"/>   <!--simulation length in years-->
  <property name="PP_CPLD_CHUNK_A"  value="5yr"/>  <!--smaller chunk length for pp/analysis-->
  <property name="PP_CPLD_CHUNK_B"  value="20yr"/> <!--bigger  chunk length for pp/analysis-->

  <property name="PROD_RUNTIME"     value="16:00:00"/><!--Maximum wall clock per simulation-->
  <property name="PROD_SEGTIME"     value="04:00:00"/><!--Wall clock per segment (usually 1 year)-->
<!--theia values
  <property name="PROD_RUNTIME"     value="08:00:00"/>
  <property name="PROD_SEGTIME"     value="04:00:00"/>
-->
  <!--The following properties need to be set only if the user wants to monitor the run progress at MDBI
      and are not needed for the run or post-processing -->   
  <property name="EXP_CPLD_START"   value="0001"/> <!--simulation start year--> 
  <property name="EXP_CPLD_END"     value="0060"/> <!--simulation end   year--> 
  
  <!--The rest of the properties need not to be changed by the user unless to customize the run-->

  <property name="FRE_STEM"  value="$(RELEASE)_mom6_$(MOM6_DATE)"/> <!--"$(RELEASE)_$(AWG_GIT_TAG)_mom6_$(MOM6_DATE)"  customize as needed -->
  <property name="FRE_VERSION" value="fre/bronx-10"/>             <!-- fre version to be used -->
  <property name="ANALYSIS_SWITCH" value="on"/>                  <!-- on/off switch for ATM/LND analysis -->
  <property name="MDBIswitch" value="on"/>                       <!-- on/off switch for MDBI database -->

 
  <!-- Reference release tag for existing files in the archives for answer comparison. Used in "REFERENCE" property. -->
  <property name="reference_tag"   value="verona_answers"/>
                          
  <property name="DEBUGLEVEL" value="_0"/>
  <property name="PLATINFO"   value=""/>  <!--This is necessary only if you want to run exact same experiment on multiple platforms-->
                                          <!--In that case you will need to put an identifier string for the value to distinguish the /nbhome-->

  <!--========================================-->
  <!--Do not change the rest of the properties-->
  <!--========================================-->

  <property name="AWG_INPUT_HOME_GAEA"  value="awg_include"/>
  <property name="AWG_INPUT_HOME_NESCC" value="awg_include"/>
  <property name="AWG_INPUT_HOME_GFDL"  value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)/mdt_xml/awg_include"/>

<!--=================-->
<!--= CHANGING NPES =-->
<!--=================-->

<!--
This xml includes a number of predefined options for the number of PEs.
Changing the number of PEs can be accomplished by 
modifying 'npes' and segment 'runTime' in the xml <production> block:

      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>

Choosing a particular PE number is a balancing act. The higher npes, 
the faster the model throughput, but also the lower the model efficiency
(i.e. the overall simulation will cost more in terms of core hours).
    
-->

   <!--AMIP configurations-->
   <property name="domainparams_A216x1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=1;
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=1;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A216x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=8;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A216x1h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;	       
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=8;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A216x2h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	       
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=8;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A216x4h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=8;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A216x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A216x8"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=8;flux_exchange_nml:nblocks=8;
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A432x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A432x1h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A432x2_1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A432x2h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A432x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A288x2"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4"/>
   
   <property name="domainparams_A288x2_1"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=8;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4"/>
   
   <property name="domainparams_A288x1h"
             value="
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=8;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4"/>
   
   <property name="domainparams_A288x2h"
             value="
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=8;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4"/>
   
   <property name="domainparams_A288x4"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4"/>
   
   <property name="domainparams_A288x4h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4"/>
   
   <property name="domainparams_A576x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_A576x1h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=6;
               land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A576x2h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=6;
	       land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_A864x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A864x2_1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />
   
   <property name="domainparams_A864x1h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
               land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A864x2h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A864x2_2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=12,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=12,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A864x2_3"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A864x2_4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=12,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=12,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A864x2_5"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=12,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=8;
	       land_model_nml:layout=12,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A768x2"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=768;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=8,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=8,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=96,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A768x1h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=768;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=8,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=8,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=96,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A768x2h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=768;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=8,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=8,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=96,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A768x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=768;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=8,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=96,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A768x4_1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=768;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=8,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=6;
	       land_model_nml:layout=8,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=96,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A768x4h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=768;coupler_nml:atmos_nthreads=8;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=8,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=6;
	       land_model_nml:layout=8,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=96,8;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_A1536x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1536;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=16,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=16,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=96,16;ice_model_nml:io_layout=1,4" />

  <property name="domainparams_A1536x1h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=1536;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=16,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=16,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=96,16;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A1536x2h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=1536;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=16,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=6;
	       land_model_nml:layout=16,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=96,16;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_A1728x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1728;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=12,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=12,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,12;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A1728x1h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=1728;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=12,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=12,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,12;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A1728x2_1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1728;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=12,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=12,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,12;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_A1728x2h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=1728;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=12,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=12,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,12;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_A864x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />
   
   <property name="domainparams_A864x4_1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=6;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />
   
   <property name="domainparams_A864x4h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A1152x1h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=8,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
               land_model_nml:layout=8,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />
   <property name="domainparams_A1152x2h"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=8,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
               land_model_nml:layout=8,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A1152x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A1152x2_1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=4;
	       land_model_nml:layout=8,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />
   <property name="domainparams_A1152x2_2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />
   <property name="domainparams_A1152x2_3"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />
   <property name="domainparams_A1152x2_4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=12,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=12,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" /><!--layout=12,16 underperforms on theia-->
   <property name="domainparams_A1152x2_5"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_A576x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4" />
   <property name="domainparams_A576x4_1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=6;
	       land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_A576x4h"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
	       coupler_nml:use_hyper_thread=.T.;coupler_nml:ncores_per_node=32;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=6;
	       land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_A576x4_2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=4,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=4,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4" />
   <property name="domainparams_A288x8"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=8;flux_exchange_nml:nblocks=8;	
               fv_core_nml:layout=6,8;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,8;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4" />
   <property name="domainparams_A432x8"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=8;flux_exchange_nml:nblocks=8;	
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A432x8_1"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=8;flux_exchange_nml:nblocks=8;     
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=4;
               land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_A1056x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1056;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=8,22;fv_core_nml:io_layout=1,2;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,22;land_model_nml:io_layout=1,2;
	       ice_model_nml:layout=176,6;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A1152x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=12,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=12,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />
   <property name="domainparams_A1152x4_1"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;    
               fv_core_nml:layout=12,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=6;
               land_model_nml:layout=12,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />


   <property name="domainparams_A2304x2"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=2304;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;    
               fv_core_nml:layout=16,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=16,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,16;ice_model_nml:io_layout=1,4" />


   <property name="domainparams_A960x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=960;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=10,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=4;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=10,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=120,8;ice_model_nml:io_layout=1,4" />

   <!--Concurrent radiation-->
   <property name="domainparams_A432x1_R432x1"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
	       coupler_nml:do_concurrent_radiation=.true.;coupler_nml:radiation_nthreads=1;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A432x2_R432x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=2;
	       coupler_nml:do_concurrent_radiation=.true.;coupler_nml:radiation_nthreads=2;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />
   <property name="domainparams_A864x2_R864x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />

   <!--c192 configs-->
   
   <property name="domainparams_c192A432x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,12;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_c192A432x4"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=6,12;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_c192A576x2"
	     value="
	       coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,12;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,4;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_c192A576x4"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4; 
               fv_core_nml:layout=8,12;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=8,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,4;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_c192A1152x2"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2; 
               fv_core_nml:layout=12,16;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=12,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />

   <property name="domainparams_c192A864x2"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2; 
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_c192A864x4"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4; 
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_c192A1728x2"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1728;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2; 
               fv_core_nml:layout=12,24;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=12,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,12;ice_model_nml:io_layout=1,3" />

   <property name="domainparams_c192A1152x4"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=1152;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4; 
               fv_core_nml:layout=12,16;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=4;
               land_model_nml:layout=12,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,8;ice_model_nml:io_layout=1,4" />
   
   <property name="domainparams_c192A2304x2"
             value="
               coupler_nml:do_ocean=.false.;coupler_nml:ocean_npes=0;
               coupler_nml:atmos_npes=2304;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2; 
               fv_core_nml:layout=12,32;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=12,32;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,16;ice_model_nml:io_layout=1,4" />

   <!--CM4 configurations-->
   <property name="domainparams_A216x1_O216"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=216;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=1;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=1;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=18,12;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A216x2_O648"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=648;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=18,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A432x1_O432"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=432;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=1;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=1;
               land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3;
               dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=36,12;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A504x1_O432"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=432;
               coupler_nml:atmos_npes=504;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=1;
               fv_core_nml:layout=7,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=1;
               land_model_nml:layout=7,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=168,3;ice_model_nml:io_layout=1,3;
               dummy_ice_nml:ice_layout=168,3;dummy_ice_nml:ice_io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=36,12;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A504x1_O504"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=504;
               coupler_nml:atmos_npes=504;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=1;
               fv_core_nml:layout=7,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=1;
               land_model_nml:layout=7,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=168,3;ice_model_nml:io_layout=1,3;
               dummy_ice_nml:ice_layout=168,3;dummy_ice_nml:ice_io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=42,12;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A432x2_O432"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=432;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3;
               dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=36,12;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>


   <property name="domainparams_A432x2_O1296"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1296;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A576x2_O1296"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1296;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4;
               dummy_ice_nml:ice_layout=72,8;dummy_ice_nml:ice_io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=36,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A576x1_O576"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=576;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=1;flux_exchange_nml:nblocks=1;
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=1;
               land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4;
               dummy_ice_nml:ice_layout=72,8;dummy_ice_nml:ice_io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=16,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A216x2_O864"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=864;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=24,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A216x2_O1756"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1756;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.548.32x72"/>

   <property name="domainparams_A288x2_O1756"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1756;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=72,4;dummy_ice_nml:ice_io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.548.32x72"/>

   <property name="domainparams_A576x2_O1756"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1756;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=72,8;dummy_ice_nml:ice_io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.548.32x72"/>

   <property name="domainparams_A216x2_O1152"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1152;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A216x2_O2304"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2304;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A216x2_O1970"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1970;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       dummy_ocean_nml:ocean_layout=36,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.622.36x72"/>

   <property name="domainparams_A216x2_O2432"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2432;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=45,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.808.45x72"/>
  
   <property name="domainparams_A288x2_O1970"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1970;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ice_nml:ice_layout=72,4;dummy_ice_nml:ice_io_layout=1,4;
               dummy_ocean_nml:ocean_layout=36,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.622.36x72"/>

   <property name="domainparams_A864x2_O1970"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1970;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,12;ice_model_nml:io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ice_nml:ice_layout=72,12;dummy_ice_nml:ice_io_layout=1,4;
               dummy_ocean_nml:ocean_layout=36,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.622.36x72"/>


   <property name="domainparams_A288x2_O2592"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2592;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4;
               dummy_ice_nml:ice_layout=72,4;dummy_ice_nml:ice_io_layout=1,4;
	       icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=36,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

   <property name="domainparams_A288x2_O2432"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2432;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4;
               dummy_ice_nml:ice_layout=72,4;dummy_ice_nml:ice_io_layout=1,4;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=45,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.808.45x72"/>
   
   <property name="domainparams_A288x2_O2304"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2304;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4;
               dummy_ice_nml:ice_layout=72,4;dummy_ice_nml:ice_io_layout=1,4;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>
   
   <property name="domainparams_A216x4_O1970"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1970;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       dummy_ocean_nml:ocean_layout=36,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.622.36x72"/>

   <property name="domainparams_A288x2_O2997"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2997;
               coupler_nml:atmos_npes=288;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=4,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=4,12;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,4;ice_model_nml:io_layout=1,4;
               dummy_ice_nml:ice_layout=72,4;dummy_ice_nml:ice_io_layout=1,4;
	       icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=90,45;dummy_ocean_nml:ocean_io_layout=9,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.1053.90x45"/>
   
   <property name="domainparams_A432x2_O2997"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2997;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;     
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
               dummy_ocean_nml:ocean_layout=90,45;dummy_ocean_nml:ocean_io_layout=9,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.1053.90x45"/>

   <property name="domainparams_A432x2_O3782"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=3782;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;     
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
	       dummy_ocean_nml:ocean_layout=72,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.1402.72x72"/>

   <property name="domainparams_A576x2_O3782"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=3782;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,4;ice_model_nml:io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ice_nml:ice_layout=144,4;dummy_ice_nml:ice_io_layout=1,4;
	       dummy_ocean_nml:ocean_layout=72,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.1402.72x72"/>
   
   <property name="domainparams_c192A432x2_O1970x1"
	     value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1970;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,12;fv_core_nml:io_layout=1,4;
               land_model_nml:layout=6,12;land_model_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               ice_model_nml:layout=72,3;ice_model_nml:io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
               dummy_ocean_nml:ocean_layout=36,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.622.36x72"/>

   <property name="domainparams_c192A864x2_O1756x1"
	     value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1756;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2; 
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;
               atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ice_nml:ice_layout=144,6;dummy_ice_nml:ice_io_layout=1,3;
               dummy_ocean_nml:ocean_layout=32,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.548.32x72"/>

   <!--Only  1/2 degree ocean grid configs-->
   <property name="domainparams_A216x2_O442p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=442;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=16,32;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.70.16x32"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A216x2_O842p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=842;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
               dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,32;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.182.32x32"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A216x2_O951p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=951;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.201.32x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A432x2_O951p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=951;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.201.32x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A432x2_O842p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=842;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,32;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.182.32x32"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A576x2_O842p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=842;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,12;land_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=144,4;dummy_ice_nml:ice_io_layout=1,4;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,32;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.182.32x32"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A432x2_O1057p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1057;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.239.36x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A576x2_O1057p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1057;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,12;land_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=144,4;dummy_ice_nml:ice_io_layout=1,4;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.239.36x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A864x2_O1057p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1057;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=72,12;ice_model_nml:io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ice_nml:ice_layout=72,12;dummy_ice_nml:ice_io_layout=1,4;
	       dummy_ocean_nml:ocean_layout=36,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.239.36x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A216x2_O1300p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1300;
               coupler_nml:atmos_npes=216;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=3,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=3,12;land_model_nml:io_layout=1,4;
               dummy_ice_nml:ice_layout=72,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.320.36x45"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A432x2_O1300p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1300;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.320.36x45"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A576x2_O1300p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1300;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,4;ice_model_nml:io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ice_nml:ice_layout=144,4;dummy_ice_nml:ice_io_layout=1,4;
	       dummy_ocean_nml:ocean_layout=36,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.320.36x45"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A576x2_O1620"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1620;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,4;ice_model_nml:io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ice_nml:ice_layout=144,4;dummy_ice_nml:ice_io_layout=1,4;
	       dummy_ocean_nml:ocean_layout=36,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=MOM_mask_table"/>

    <property name="domainparams_A864x2_O1300p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1300;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,6;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.320.36x45"/><!--1/2 degree ocean grid Only-->

    <property name="domainparams_A864x2_O1441p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1441;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,6;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,50;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.359.36x50"/><!--1/2 degree ocean grid Only-->

    <property name="domainparams_A864x2_O1437p5"
             value="
               coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1437;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
               land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
               ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3;
               dummy_ice_nml:ice_layout=144,6;dummy_ice_nml:ice_io_layout=1,3;
               icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=40,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.363.40x45"/><!--1/2 degree ocean grid Only-->

    <property name="domainparams_A864x2_O1608p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=1608;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,6;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=45,45;dummy_ocean_nml:ocean_io_layout=1,5;
               dummy_ocean_nml:ocean_mask_table=mask_table.417.45x45"/><!--1/2 degree ocean grid Only-->
    
   <property name="domainparams_A576x2_O951p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=951;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=8,12;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=8,12;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,4;ice_model_nml:io_layout=1,4;
               icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ice_nml:ice_layout=144,4;dummy_ice_nml:ice_io_layout=1,4;
	       dummy_ocean_nml:ocean_layout=32,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.201.32x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A864x2_O842p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=842;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,6;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,32;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.182.32x32"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A432x4_O842p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=842;
               coupler_nml:atmos_npes=432;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;
               fv_core_nml:layout=3,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=3,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,3;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,3;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=32,32;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.182.32x32"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A576x4_O951p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=951;
               coupler_nml:atmos_npes=576;coupler_nml:atmos_nthreads=4;flux_exchange_nml:nblocks=4;	
               fv_core_nml:layout=6,16;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=2;atmos_model_nml:nyblocks=6;
	       land_model_nml:layout=6,16;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=72,8;ice_model_nml:io_layout=1,4;
	       dummy_ice_nml:ice_layout=72,8;dummy_ice_nml:ice_io_layout=1,4;
	       icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=32,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.201.32x36"/><!--1/2 degree ocean grid Only-->

   <property name="domainparams_A864x2_O951p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=951;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,6;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
               dummy_ocean_nml:ocean_layout=32,36;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.201.32x36"/><!--1/2 degree ocean grid Only-->

    <property name="domainparams_A864x2_O2044p5"
	     value="
	       coupler_nml:do_ocean=.true.;coupler_nml:ocean_npes=2044;
               coupler_nml:atmos_npes=864;coupler_nml:atmos_nthreads=2;flux_exchange_nml:nblocks=2;	
               fv_core_nml:layout=6,24;fv_core_nml:io_layout=1,4;atmos_model_nml:nxblocks=1;atmos_model_nml:nyblocks=2;
	       land_model_nml:layout=6,24;land_model_nml:io_layout=1,4;
	       ice_model_nml:layout=144,6;ice_model_nml:io_layout=1,3;
	       dummy_ice_nml:ice_layout=144,6;dummy_ice_nml:ice_io_layout=1,3;
	       icebergs_nml:make_calving_reproduce=.true.;
	       dummy_ocean_nml:ocean_layout=36,72;dummy_ocean_nml:ocean_io_layout=1,4;
               dummy_ocean_nml:ocean_mask_table=mask_table.548.36x72"/><!--1/2 degree ocean grid Only-->

<!--The following are needed till frerun supports overrideParams for production runs-->
  <property name="PROD_NPES"            value="3429"/>  
  <property name="OCN_PROD_NPES"        value="2997"/>
  <property name="ATM_PROD_NPES"        value="432"/>
  <property name="ATM_PROD_NTHREADS"    value="2"/>
  <property name="ATM_PROD_NXBLOCKS"    value="1"/>
  <property name="ATM_PROD_NYBLOCKS"    value="2"/>
  <property name="FV_PROD_LAYOUT"       value="3,24"/>
  <property name="FV_PROD_IO_LAYOUT"    value="1,4"/>
  <property name="LND_PROD_LAYOUT"      value="3,24"/>
  <property name="LND_PROD_IO_LAYOUT"   value="1,4"/>
  <property name="ICE_PROD_LAYOUT"      value="144,3"/>
  <property name="ICE_PROD_IO_LAYOUT"   value="1,3"/>
  <property name="OCN_PROD_LAYOUT"      value="90,45"/>
  <property name="OCN_PROD_IO_LAYOUT"   value="1,5"/>
  <property name="OCN_PROD_MASK_TABLE"  value="mask_table.1053.90x45"/>

  <setup>

    <platform name="ncrc3.default">
      <xi:include xpointer="xpointer(//setup/platform[@name='ncrc3.intel15']/node())" />
    </platform>
    
    <platform name="ncrc4.intel16">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_f</project>
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(FRE_STEM)</root>
        <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <!--swept locations (including the staged archive location)-->
        <archive>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CTMP/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/lustre/f1/pdata/gfdl_M"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Ming.Zhao/archive/mdt"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="CWG_HOME"          value="/lustre/f1/unswept/John.Krasting/cwg"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
      <property name="ARCHIVE_INPUT_NZ"  value="/lustre/f1/unswept/Niki.Zadeh/archive/input"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     
      <csh><![CDATA[
module use -a /usw/eslogin/modulefiles-c3
        source $MODULESHOME/init/csh
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload cray-netcdf fre
        module swap PrgEnv-intel PrgEnv-intel/6.0.3
module load PrgEnv-intel
        module swap intel intel/16.0.3.210
        module load fre/bronx-10

        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big

      ]]></csh>

    </platform>
    <platform name="ncrc4.intel15">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_f</project>
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(FRE_STEM)</root>
        <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <!--swept locations (including the staged archive location)-->
        <archive>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CTMP/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/lustre/f1/pdata/gfdl_M"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Ming.Zhao/archive/mdt"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="CWG_HOME"          value="/lustre/f1/unswept/John.Krasting/cwg"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
      <property name="ARCHIVE_INPUT_NZ"  value="/lustre/f1/unswept/Niki.Zadeh/archive/input"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     
      <csh><![CDATA[
        source $MODULESHOME/init/csh
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload cray-netcdf fre
        module swap PrgEnv-intel PrgEnv-intel/6.0.3
module load PrgEnv-intel
        module swap intel intel/15.0.2.164
        module load fre/bronx-10

        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
 
      ]]></csh>

    </platform>
    <platform name="ncrc3.intel15">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_YOURGROUPLETTER</project>
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(FRE_STEM)</root>
        <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <!--swept locations (including the staged archive location)-->
        <archive>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CTMP/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/lustre/f1/pdata/gfdl_M"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Ming.Zhao/archive/mdt"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="CWG_HOME"          value="/lustre/f1/unswept/John.Krasting/cwg"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
      <property name="ARCHIVE_INPUT_NZ"  value="/lustre/f1/unswept/Niki.Zadeh/archive/input"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     
      <csh><![CDATA[
module use /sw/eslogin-c3/modulefiles
        source $MODULESHOME/init/csh
 
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-intel/5.2.82
        module swap intel intel/15.0.2.164

        module load $(FRE_VERSION)
        module load git
        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big

module load nco/4.5.2
      ]]></csh>

    </platform>
    <platform name="ncrc3.intel16">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_YOURGROUPLETTER</project>
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(FRE_STEM)</root>
        <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <!--swept locations (including the staged archive location)-->
        <archive>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CTMP/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/lustre/f1/pdata/gfdl_M"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Ming.Zhao/archive/mdt"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="CWG_HOME"          value="/lustre/f1/unswept/John.Krasting/cwg"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
      <property name="ARCHIVE_INPUT_NZ"  value="/lustre/f1/unswept/Niki.Zadeh/archive/input"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     
      <csh><![CDATA[
module use /sw/eslogin-c3/modulefiles
        source $MODULESHOME/init/csh
 
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-intel/5.2.82
        module swap intel intel/16.0.0.109

        module load $(FRE_VERSION)
        module load git
        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
module load nco/4.5.2

      ]]></csh>

    </platform>

    <platform name="ncrc3.intel14">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_YOURGROUPLETTER</project>
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(FRE_STEM)</root>
        <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <!--swept locations (including the staged archive location)-->
        <archive>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CTMP/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/lustre/f1/pdata/gfdl_M"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Ming.Zhao/archive/mdt"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="CWG_HOME"          value="/lustre/f1/unswept/John.Krasting/cwg"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
      <property name="ARCHIVE_INPUT_NZ"  value="/lustre/f1/unswept/Niki.Zadeh/archive/input"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     
      <csh><![CDATA[
module use /sw/eslogin-c3/modulefiles
        source $MODULESHOME/init/csh
 
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-intel/5.2.82
        module swap intel intel/14.0.2.144

        module load $(FRE_VERSION)
        module load git
        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
module load nco/4.5.2

      ]]></csh>

    </platform>
    <platform name="ncrc3.pgi15">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_YOURGROUPLETTER</project>
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(FRE_STEM)</root>
        <scripts>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <state>$CPERM/$USER/$(FRE_STEM)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <!--swept locations (including the staged archive location)-->
        <archive>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CTMP/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CTMP/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/lustre/f1/pdata/gfdl_M"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/lustre/f1/unswept/Ming.Zhao/archive/mdt"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="CWG_HOME"          value="/lustre/f1/unswept/John.Krasting/cwg"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
      <property name="ARCHIVE_INPUT_NZ"  value="/lustre/f1/unswept/Niki.Zadeh/archive/input"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>
     
      <csh><![CDATA[
module use /sw/eslogin-c3/modulefiles

        source $MODULESHOME/init/csh
 
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-pgi/5.2.82
        module swap pgi pgi/15.3.0 

        module load $(FRE_VERSION)
        module load git
        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
module load nco/4.5.2

      ]]></csh>

    </platform>

    <platform name="theia.intel">
      <project>gfdlport</project>
      <directory stem="$(FRE_STEM)">
        <root>/scratch4/GFDL/gfdlscr/$USER/$(stem)</root>
        <src>/scratch4/GFDL/gfdlscr/$USER/$(stem)/$(name)/src</src>
        <exec>/scratch4/GFDL/gfdlscr/$USER/$(stem)/$(name)/$(platform)-$(target)/exec</exec>
        <scripts>$HOME/$(stem)/$(name)/$(platform)-$(target)/scripts</scripts>
        <stdout>/scratch4/GFDL/gfdlscr/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
        <state>$HOME/$(stem)/$(name)/$(platform)-$(target)/state</state>
        <work>/scratch4/GFDL/gfdlscr/$USER/work/$FRE_JOBID</work>
        <ptmp>/scratch4/GFDL/gfdlscr/$USER/ptmp</ptmp>
        <archive>/scratch4/GFDL/gfdlscr/$USER/$(stem)/$(name)/$(platform)-$(target)</archive>
      </directory>

      <property name="EXEC_ROOT"         value="$(rootDir)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_NESCC)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/scratch4/GFDL/gfdlscr/Niki.Zadeh/awg/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm/LWH"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="CWG_HOME"          value="/scratch4/GFDL/gfdlscr/John.Krasting/cwg"/>
      <property name="REFERENCE"         value=""/>
      <property name="ARCHIVE_INPUT_NZ"  value="/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="$CDATA/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="$CPERM/Jasmin.John/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/ncrc/home2/Jasmin.John"/>

      <csh><![CDATA[
        module use -a /home/fms/local/modulefiles
        module use -a /contrib/gfdl/modulefiles
        module load intel/15.1.133
        module load netcdf/4.3.0
        module load hdf5/1.8.14
        module load impi/5.0.1.035
        module load nco
        module load $(FRE_VERSION)

        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
        ]]>
      </csh>
    </platform>

    <platform name="theia.default">
      <xi:include xpointer="xpointer(//setup/platform[@name='theia.intel']/node())" />
    </platform>

    <platform name="olcf.eos_intel14">
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(stem)</root>
        <exec>$CPERM/$USER/$(stem)/$(name)/$(platform)-$(target)/exec</exec>
        <state>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <scripts>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <!--swept locations (including the staged archive location)-->
        <archive>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CPERM/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_NESCC)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/atlas/proj-shared/cli061/pdata/CM4/input"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/lustre/atlas/proj-shared/cli061/pdata/gfdl_M"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/lustre/atlas/proj-shared/cli061/pdata/CM4/input"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>
      <property name="ARCHIVE_INPUT_NZ"  value="/lustre/atlas/proj-shared/cli061/pdata/fms"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="/lustre/atlas/proj-shared/cli061/pdata/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="/lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/retrospective"/>

      <property name="FMS_ARCHIVE_ROOT" value="/lustre/atlas/proj-shared/cli061/pdata/fms" />
      
      <project>cli061</project>
      <csh><![CDATA[
        module use -a /ccs/proj/cli061/local/modulefiles
#        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray #if unload and reload PrgEnv-intel it cannot find some modules
        module unload netcdf fre
#        module load PrgEnv-intel
#        module swap intel intel/13.1.3.192 #does not find some system libraries
        module load $(FRE_VERSION)
#        module load netcdf/4.3.0
module load cray-netcdf/4.3.3.1
        module load gcp

#        module use /lustre/atlas/proj-shared/cli061/underwoo/hsm/modulefiles
        module load hsm
        setenv NC_BLKSZ 1M
        setenv KMP_STACKSIZE 512m
        setenv F_UFMTENDIAN big
setenv MPICH_ENV_DISPLAY
setenv MPICH_UNEX_BUFFER_SIZE 256m
limit stacksize unlimited
limit coredumpsize unlimited
        ]]>
      </csh>
    </platform>
    <platform name="olcf.eos_intel15">
      <directory stem="$(FRE_STEM)">
        <!--unswept locations--><!-- CPERM=/lustre/f1/unswept -->
        <root>$CPERM/$USER/$(stem)</root>
        <exec>$CPERM/$USER/$(stem)/$(name)/$(platform)-$(target)/exec</exec>
        <state>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/state</state>
        <scripts>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/scripts</scripts>
        <!--swept locations (including the staged archive location)-->
        <archive>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/archive</archive>
        <stdout>$CPERM/$USER/$(stem)$(DEBUGLEVEL)/$(name)/$(platform)-$(target)/stdout</stdout>
        <work>$CPERM/$USER/work/$(stem)/$FRE_JOBID</work>
      </directory>
      <property name="EXEC_ROOT"         value="$CPERM/$USER/$(stem)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_NESCC)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/lustre/atlas/proj-shared/cli061/pdata/CM4/input"/>
      <property name="LWH_ARCHIVE_ROOT"  value="/lustre/atlas/proj-shared/cli061/pdata/gfdl_M"/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/lustre/atlas/proj-shared/cli061/pdata/CM4/input"/>
      <property name="NB_ROOT"           value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/>
      <property name="REFERENCE"         value="/lustre/f1/unswept/Niki.Zadeh/$(reference_tag)/$(name)/$(platform)-$(target)"/>

      <property name="FMS_ARCHIVE_ROOT"  value="/lustre/atlas/proj-shared/cli061/pdata/fms" />
      <property name="ARCHIVE_INPUT_NZ"  value="/lustre/atlas/proj-shared/cli061/pdata/fms"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value="/lustre/atlas/proj-shared/cli061/pdata/fms/esm"/>
      <property name="OBGC_ARCHIVE_ROOT"    value="/lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/retrospective"/> 
      <property name="OBGC_MODEL_UPDATES"   value="/lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/retrospective"/>
      
      <project>cli061</project>
      <csh><![CDATA[
        module use -a /ccs/proj/cli061/local/modulefiles
#        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray #if unload and reload PrgEnv-intel it cannot find some modules
        module unload netcdf fre
#        module load PrgEnv-intel
        module swap intel intel/15.0.2.164 #does not find some system libraries
        module load $(FRE_VERSION)
#        module load netcdf/4.3.0
        module load cray-netcdf/4.3.3.1
        module load gcp
#        module use /lustre/atlas/proj-shared/cli061/underwoo/hsm/modulefiles
        module load hsm
        setenv NC_BLKSZ 1M
        setenv KMP_STACKSIZE 512m
        setenv F_UFMTENDIAN big
setenv MPICH_ENV_DISPLAY
setenv MPICH_UNEX_BUFFER_SIZE 256m
limit stacksize unlimited
limit coredumpsize unlimited
       ]]>
      </csh>
    </platform>
    <platform name="olcf.default">
      <xi:include xpointer="xpointer(//setup/platform[@name='olcf.eos_intel15']/node())" />
    </platform>
    <platform name="gfdl.default">
      <property name="NB_ROOT"  value="/nbhome/$USER/$(FRE_STEM)$(PLATINFO)/$(name)"/><!--Do not change this! Other platforms use  the same value. -->
      <directory stem="$(FRE_STEM)">
        <archive>$ARCHIVE/$(stem)/$(name)/$(platform)-$(target)</archive>
        <postProcess>$(archiveDir)/pp</postProcess>
        <analysis>$(NB_ROOT)</analysis><!--Do not change this! frepp translates this to $out_dir. This is also the directory under which  frepp looks for mom6 clone.  -->
	<ptmp>/ptmp/$USER</ptmp>
      </directory>
      <property name="EXEC_ROOT"         value="$(rootDir)"/>
      <property name="F2003_FLAGS"       value=" -DINTERNAL_FILE_NML"/>
      <property name="AWG_INPUT_HOME"    value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"  value="/archive/cjg/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"  value=""/>
      <property name="MIZ_ARCHIVE_ROOT"  value="/archive/miz/mdt"/>
      <property name="CWG_HOME"          value="/archive/John.Krasting/cwg"/>
      <property name="REFERENCE"         value=""/>
      <property name="ARCHIVE_INPUT_NZ"  value="/archive/Niki.Zadeh/input"/>
      <property name="OM4_05_ARCHIVE"    value="$(ARCHIVE_INPUT_NZ)/verona/John.Dunne_OM4_05_20160517"/>
      <property name="FMS_ESM_ARCHIVE_ROOT" value=""/>
      <property name="OBGC_ARCHIVE_ROOT"    value=""/> 
      <property name="OBGC_MODEL_UPDATES"   value="/home/Jasmin.John"/>

      <csh><![CDATA[
        source $MODULESHOME/init/csh
        module use -a /home/fms/local/modulefiles
        module purge
        module load $(FRE_VERSION)
        module load fre-analysis
        module load git
        setenv FREVERSION $(FRE_VERSION)           
        setenv NBROOT $(NB_ROOT)
        /home/Niki.Zadeh/nnz_tools/bin/verify -m $(MOM6_GIT_TAG) -x dev
      ]]>
      </csh>
    </platform>
    <platform name="gfdl.ncrc3-intel15">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.default']/node())" />
    </platform>
    <platform name="gfdl.ncrc4-intel16">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.default']/node())" />
    </platform>
    <platform name="gfdl.olcf-eos_intel15">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.default']/node())" />
    </platform>
    <platform name="gfdl.theia-intel">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.default']/node())" />
    </platform>

    <platform name="gfdl-ws.default">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.default']/node())" />
    </platform>

  </setup>

<!--===========-->
<!--= COMPILE =-->
<!--===========-->
  <!--The property MOM6_EXAMPLES should point to the mom6 directory that is checked out. It is needed by MOM6 to access its input data files-->
  <property name="LIBS_ROOT"      value="cm4_libs_compile"/> <!--name of libs compile experiment-->
  
  <property name="MOM6_EXAMPLES"  value="$root/$(LIBS_ROOT)/src/mom6"/>
  <property name="FMS_LIB_DIR"    value="./$(LIBS_ROOT)/$(platform)-$(target)/exec"/>
  <property name="MY_LIBS"        value="$(EXEC_ROOT)/$(FMS_LIB_DIR)"/>

  <experiment name="cm4_libs_compile">
    <description>
Experiment to build executable.
    </description>

    <component name="fms" paths="shared">
     <description domainName="infrastructure" communityName="FMS" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> shared.git </codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_libMPI -Duse_netCDF -DMAXFIELDMETHODS_=500</cppDefs>
      </compile>
    </component>

    <component name="atmos_phys" requires="fms" paths="atmos_param atmos_shared">
      <description domainName="" communityName="" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> atmos_shared.git atmos_param.git </codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DCLUBB -DAM3_CHEM</cppDefs>
      </compile>
    </component>

    <component name="atmos_dyn" paths="atmos_drivers/coupled
                                       atmos_cubed_sphere/driver/coupled
                                       atmos_cubed_sphere/model
                                       atmos_cubed_sphere/model_nh_null
                                       atmos_cubed_sphere/tools" requires="fms atmos_phys">
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)">atmos_drivers.git atmos_cubed_sphere.git</codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DSPMD</cppDefs>
      </compile>
    </component>

    <component paths="ice_sis ice_param" requires="fms" name="ice_sis">
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
            <codeBase version="$(RELEASE)"> ice_sis.git ice_param.git </codeBase>
         </source>
         <compile>
            <cppDefs>$(F2003_FLAGS)</cppDefs>
         </compile>
    </component>

    <component name="land_lad2" requires="fms" paths="land_lad2">
      <description domainName="LM3" communityName="land_lad2" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> land_lad2.git </codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS)</cppDefs>

<csh> <![CDATA[
sed -e 's/<TAB>/\t/' >${bld_dir}/land_lad2/Makefile-cpp <<EOF
CPPDEFS = -nostdinc -DINTERNAL_FILE_NML -g -Dintel14_bug -D_FILE_VERSION="\`git-version-string \$<\`"
FRETARGET = $(target)

ifneq (\$(findstring hdf5,\${FRETARGET}),)
else
  CPPDEFS += -Duse_LARGEFILE
endif

vpath %.F90 \$(shell find ${src_dir}/land_lad2 -type d)

land_lad2/%.f90: %.F90
<TAB>cpp \${CPPDEFS} -C -v -I ${src_dir}/shared/include -o \$@ \$<

EOF

foreach foo ( `find ${src_dir}/land_lad2 -type f -name \*.F90` )
  make -f land_lad2/Makefile-cpp land_lad2/$foo:t:r.f90
end
find ${bld_dir}/land_lad2 -type f -name \*.f90 > land_lad2/pathnames_land_lad2

        ]]></csh>

      </compile>
    </component>

    <component name="mom6" requires="fms" paths="mom6/src/MOM6/config_src/dynamic mom6/src/MOM6/config_src/coupled_driver mom6/src/MOM6/src/*/ mom6/src/MOM6/src/*/*/ ocean_shared">
      <description domainName="Ocean" communityName="GFDL-MOM6" communityVersion="$(MOM6_GIT_TAG)" communityGrid="Tripolar"/>
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> ocean_null.git </codeBase>
        <csh><![CDATA[
          \rm -rf ocean_null
          git clone -b $(MOM6_GIT_TAG) https://github.com/NOAA-GFDL/MOM6-examples.git mom6
          pushd mom6
          git checkout $(MOM6_GIT_TAG)  #needed for older git on zeus
          git submodule init src/MOM6 src/SIS2 src/icebergs tools/python/MIDAS
          git clone --recursive https://github.com/NOAA-GFDL/MOM6.git src/MOM6 
          git clone             https://github.com/NOAA-GFDL/SIS2.git src/SIS2
          git clone             https://github.com/NOAA-GFDL/icebergs.git src/icebergs
          git submodule update #This gets the right version of submodules
          popd

          #To use MOM6 diagnostics/remapping in generic tracers package ocean_shared should be compiled as part of the MOM6 library and NOT as a separate stand-alone library
          git clone -b $(RELEASE) http://gitlab.gfdl.noaa.gov/fms/ocean_shared.git
          (cd ocean_shared && git checkout $(MOM6_GIT_TAG))

          pushd mom6
          set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
          if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
            ln -s /scratch4/GFDL/gfdlscr/pdata/gfdl_O/datasets/ .datasets
          else if ("${platform_domain}" =~ *"ccs.ornl.gov"* ) then
            ln -s /lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/ .datasets
          else
            ln -s /lustre/f1/pdata/gfdl_O/datasets/ .datasets
          endif
          popd	  

          test -e mom6/.datasets
          if ($status != 0) then
            echo ""; echo "" ; echo "   WARNING:  .datasets link in MOM6 examples directory is invalid"; echo ""; echo ""
          endif
        ]]></csh>
      </source>
      <compile>
        <cppDefs><![CDATA[ $(F2003_FLAGS) -DMAX_FIELDS_=100 -D_USE_MOM6_DIAG -D_USE_GENERIC_TRACER -D_FILE_VERSION="'"`git-version-string $<`"'" ]]></cppDefs>
        <makeOverrides>OPENMP=""</makeOverrides> <!-- openmp switch for MOM6 may cause crash -->
      </compile>
    </component>

    <component name="sis2" paths="mom6/src/SIS2 ice_param" requires="fms mom6 icebergs" includeDir="$root/$(LIBS_ROOT)/src/mom6/src/MOM6/src/framework" > 
         <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
	   <codeBase version="$(RELEASE)"> ice_param.git </codeBase> 
         </source>
         <compile>
            <cppDefs><![CDATA[$(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
            <makeOverrides>OPENMP=""</makeOverrides> <!-- SIS2 does not compile with -openmp in dev/master/2016.10.14-->
         </compile>
    </component>

    <component name="icebergs" paths="mom6/src/icebergs" requires="fms">
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> ocean_null.git </codeBase>
        <csh>\rm -rf ocean_null</csh>
       </source>
       <compile>
            <cppDefs><![CDATA[-D_FILE_VERSION="'"`git-version-string $<`"'"]]> </cppDefs>
       </compile>
       <description domainName="N/A" communityName="N/A" communityVersion="$(RELEASE)" communityGrid="N/A"/>
    </component>

  </experiment>

  <!-- cm4_compile is the compile experiment name -->
  <experiment name="cm4_compile" inherit="cm4_libs_compile">
      <component paths="shared" name="fms" includeDir="$root/$(LIBS_ROOT)/src/shared/include">
         <library path="$(MY_LIBS)/fms/libfms.a" headerDir="$(MY_LIBS)/fms"/>
      </component>
      <component name="land_lad2" paths="land_lad2" requires="fms">
         <library path="$(MY_LIBS)/land_lad2/libland_lad2.a" headerDir="$(MY_LIBS)/land_lad2"/>
      </component>
      <component name="atmos_phys" paths="atmos_phys atmos_param" requires="fms">
          <library path="$(MY_LIBS)/atmos_phys/libatmos_phys.a" headerDir="$(MY_LIBS)/atmos_phys"/>
      </component>
      <component name="atmos_dyn" paths="atmos_drivers/coupled
                                       atmos_cubed_sphere/driver/coupled
                                       atmos_cubed_sphere/model
                                       atmos_cubed_sphere/model_nh_null
                                       atmos_cubed_sphere/tools" requires="fms atmos_phys">
          <library path="$(MY_LIBS)/atmos_dyn/libatmos_dyn.a" headerDir="$(MY_LIBS)/atmos_dyn"/>
      </component>
      <component paths="mom6" requires="fms" name="mom6">
         <library path="$(MY_LIBS)/mom6/libmom6.a" headerDir="$(MY_LIBS)/mom6"/>
      </component> 
      <component paths="ice_sis" requires="fms" name="ice_sis">
         <library path="$(MY_LIBS)/ice_sis/libice_sis.a" headerDir="$(MY_LIBS)/ice_sis"/>
      </component> 
      <component name="coupler" paths="coupler" requires="fms atmos_dyn atmos_phys land_lad2 ice_sis mom6">
        <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid=""/>  
        <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
          <codeBase version="$(RELEASE)"> coupler.git </codeBase>
        </source>
        <compile>
          <cppDefs><![CDATA[$(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>
  </experiment>
  
  <experiment name="cm4_sis2_compile" inherit="cm4_libs_compile">
      <component paths="shared" name="fms" includeDir="$root/$(LIBS_ROOT)/src/shared/include">
         <library path="$(MY_LIBS)/fms/libfms.a" headerDir="$(MY_LIBS)/fms"/>
      </component>
      <component name="land_lad2" paths="land_lad2" requires="fms">
         <library path="$(MY_LIBS)/land_lad2/libland_lad2.a" headerDir="$(MY_LIBS)/land_lad2"/>
      </component>
      <component name="atmos_phys" paths="atmos_phys atmos_param" requires="fms">
          <library path="$(MY_LIBS)/atmos_phys/libatmos_phys.a" headerDir="$(MY_LIBS)/atmos_phys"/>
      </component>
      <component name="atmos_dyn" paths="atmos_drivers/coupled
                                       atmos_cubed_sphere/driver/coupled
                                       atmos_cubed_sphere/model
                                       atmos_cubed_sphere/model_nh_null
                                       atmos_cubed_sphere/tools" requires="fms atmos_phys">
          <library path="$(MY_LIBS)/atmos_dyn/libatmos_dyn.a" headerDir="$(MY_LIBS)/atmos_dyn"/>
      </component>
      <component paths="icebergs" requires="fms" name="icebergs">
         <library path="$(MY_LIBS)/icebergs/libicebergs.a" headerDir="$(MY_LIBS)/icebergs"/>
      </component> 
      <component paths="mom6" requires="fms" name="mom6">
         <library path="$(MY_LIBS)/mom6/libmom6.a" headerDir="$(MY_LIBS)/mom6"/>
      </component> 
      <component paths="sis2" requires="fms icebergs" name="sis2">
         <library path="$(MY_LIBS)/sis2/libsis2.a" headerDir="$(MY_LIBS)/sis2"/>
      </component> 
      <component name="coupler" paths="coupler" requires="fms atmos_dyn atmos_phys land_lad2 sis2 mom6 icebergs">
        <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid=""/>  
        <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
          <codeBase version="$(RELEASE)"> coupler.git </codeBase>
        </source>
        <compile>
          <cppDefs><![CDATA[$(F2003_FLAGS) -D_FILE_VERSION="'"`git-version-string $<`"'"]]></cppDefs>
         </compile>
      </component>
  </experiment>

<!--============================-->
<!--= TEMPLATES FOR INPUT DATA =-->
<!--============================-->
  <experiment name="L48_data">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/gas_conc_3D48L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="L32_data">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/gas_conc_3D32L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L48_initCond_Land20151006">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Larry.Horowitz/awg/IC/awg_C96L48_LM3_OM4_025_grid_lm3p2_topo_v20151101.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c96L48/awg_C96L48_LM3_OM4_025_grid_lm4p1_topo_v20160210.tar</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm/awg_C96L48_LM3_OM4_025_grid_lm4p1_topo_v20160210.tar</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/awg_C96L48_LM3_OM4_025_grid_lm4p1_topo_v20160210.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_aero_initCond_Land20151006">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c96L32/topo_v20150507/awg_C96L32_LM3_OM4_025_grid_lm3p2_19810101.remapped.topodrag.v20150507.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_aero_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource site="ncrc">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c96L32/aero_ic/awg_C96L32_LM3_OM4_025_grid_lm4p1_topo_v20160209.tar</dataSource>
       <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm/awg_C96L32_LM3_OM4_025_grid_lm4p1_topo_v20160209.tar</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/awg_C96L32_LM3_OM4_025_grid_lm4p1_topo_v20160209.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_initCond_Land20151006">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awgmiz/ic/awg_C96L32_LM3_OM4_025_grid_lm3p2_topo_v20151101.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awgmiz/ic/awg_C96L32_LM3_OM4_025_grid_lm4p1_topo_v20160111.tar</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm/awg_C96L32_LM3_OM4_025_grid_lm4p1_topo_v20160111.tar</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/awg_C96L32_LM3_OM4_025_grid_lm4p1_topo_v20160111.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_Op5_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OM4_05_ARCHIVE)/c96L32_Op5_initCond.tar</dataSource>
        <dataSource site="theia">$(OM4_05_ARCHIVE)/c96L32_Op5_initCond.tar</dataSource>
        <dataSource site="olcf">$(OM4_05_ARCHIVE)/c96L32_Op5_initCond.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L63_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awgmiz/ic/awg_C96L63_LM3_OM4_025_grid_lm3p2_v20151026.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c192L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C192L48_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150302.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c192L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c192L32_newLand20160112/awg_C192L32_OM4_025_grid_lm4p1_v20160305.tar</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/awg_C192L32_OM4_025_grid_lm4p1_v20160305.tar</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p6">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p6</dataSource>
      </dataFile>
    </input>
  </experiment>
  <experiment name="field_table_faero">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_faero</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p10">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p10</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p10_fullchem">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p10_fullchem</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p10_fullchem_2000">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p10_fullchem_2000</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p10_fullchem_1860">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p10_fullchem_1860</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p10_fullchem_2000aero">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p10_fullchem_2000aero</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p7_fullchem_nitrate">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p7_fullchem_no3</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p7_fullchem_nitrate_2000">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p7_fullchem_no3_2000</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p7_fullchem_nitrate_1860">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p7_fullchem_no3_1860</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="common_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/soil_type.nc" chksum="" size="" timestamp="">
         <dataSource site="ncrc">/lustre/f1/unswept/Krista.A.Dunne/mod_input_files/any_grid/soil_type_hwsd_5minute.nc</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">

        <dataSource site="ncrc">/lustre/f1/unswept/David.Paynter/sea_esf_CM4_V6_AUG2015.cpio</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm/sea_esf_CM4_V6_AUG2015.cpio</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/awg/input/common/sea_esf_CM4_V6_AUG2015.cpio</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Sergey.Malyshev/awg/input/lm3/lm3_data_20150322.tar</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/awg/mdt/awg/input/lm3/lm3_data_20150322.tar</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/lm3_data_20150322.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/aerosol_inputs.dec2009.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/RCP/cmip5_rcp45.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/tropchem_dec2015.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Fabien.Paulot/archive/depvel/depvel_gc_am3_tran.nc</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm/depvel_gc_am3_tran.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.1x1.1859_2020.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/1860/emissions.1x1.1860.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/2000/emissions.1x1.2000.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emissions.isoprene.1x1.1859_2020.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.isoprene_no_biogenic.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emissions.isoprene.1x1.1860.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/1860/emissions.isoprene_no_biogenic.1x1.1860.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emissions.isoprene.1x1.2000.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/2000/emissions.isoprene_no_biogenic.1x1.2000.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/anthro_so2.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.simple.so2.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emis_fuel_aircraft.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.aircraft.aero.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/so2_0.25_volcanoes.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/AM4_201503" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/am4_optical_table_20150325.dat</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/AM4_201510" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Fabien.Paulot/archive/rad/am4_optical_table_20151029.dat</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm/am4_optical_table_20151029.dat</dataSource>
      </dataFile>

    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_faero">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_faero</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_simpleSO4</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_fullaero">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_simpleSO4</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_fullchem">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_fullchemOnly_v20140325</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="amip_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Huan.Guo/Hadley_sst/20160504/hadisst.186912-201602.tar</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/ulm/hadisst.186912-201602.tar</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/hadisst.186912-201602.tar</dataSource>
      </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_co2</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="climo_data">
    <input>
      <dataFile label="input" target="INPUT/hadisst_sst.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/sst.climo.1981-2000.data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/hadisst_ice.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/ice.climo.1981-2000.data.nc</dataSource>
      </dataFile>
      <!-- Repeat data_table_amip but not data_table_co2 -->
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Sergey.Malyshev/fre/tikal/LM3/LM3p2sosn_HWSD5min_C96_OM4_025_historical_HC1_static_veg_out/ncrc2.default-prod/static_veg/19810101.static_veg_LM3p2sosn_HWSD5min_C96_OM4_025.v20150930.tar</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/awg/mdt/awg/input/lm3/19810101.static_veg_LM3p2sosn_HWSD5min_C96_OM4_025.v20150930.tar</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/19810101.static_veg_LM3p2sosn_HWSD5min_C96_OM4_025.v20150930.tar</dataSource>
       </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c96_OM4_025_hydrography_v20140620.tar</dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c96_OM4_025_grid_v20140620.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MIZ_ARCHIVE_ROOT)/awgmiz/mg_drag.nc.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96_data_lm3p2_Op5grid">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Sergey.Malyshev/fre/tikal/LM3/LM3p2_C96_CM2G_historical_HC1_quick/ncrc2.default-prod/static_veg/19810101.static_veg.lm3p2.remapped_to_c96_OM4_05_720x576.v20151120.tar</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/awg/mdt/awg/input/lm3/19810101.static_veg.lm3p2.remapped_to_c96_OM4_05_720x576.v20151120.tar</dataSource>
        <dataSource site="olcf"></dataSource>
       </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/c96_OM4_05_hydrography.tar</dataSource-->
        <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/river_data_hydrography.c96_OM4_05-v20151028_20160628.tar</dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/mosaic_c96.720x576.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(MIZ_ARCHIVE_ROOT)/awgmiz/mg_drag.nc.tar</dataSource>
      </dataFile>
    </input>
  </experiment>


  <experiment name="common_init_csh_blocks">
    <input>
      <csh type="always"><![CDATA[

# Copy AWG and OWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?flagOutputXferOn && $?flagOutputPostProcessOn && $currentSeg == 1 ) then
  #gcp --batch does not understand some variations of home filesystem like /autofs/mnt/ncrc-svm1_home1 so we need to massage rtsxml to comply
  set xmldirlocal = `dirname $rtsxml | sed -r "s/^\/(autofs|ncrc)\/.+\/$USER\//\~$USER\//"`
  set xmldirRemote = `echo $xmldirlocal | sed -r "$patternSedHome"`
  set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
  if ("${platform_domain}" == "ncrc.gov") then
    set xmldirRemote = `echo $xmldirlocal | sed -r "$patternSedHome;$patternSedCTMP;$patternSedCPERM"`
    gcp --batch -cd -r --sync $xmldirlocal/awg_include gfdl:$(AWG_INPUT_HOME_GFDL)/..
    gcp --batch -cd -r --sync $xmldirlocal/awg_include gfdl:$xmldirRemote/
  else if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
    gcp -cd -r --sync $xmldirlocal/awg_include gfdl:$(AWG_INPUT_HOME_GFDL)/..
    gcp -cd -r --sync $xmldirlocal/awg_include gfdl:$xmldirRemote/
  endif
  #trick to copy MOM6 directory but avoid traversing the .datasets links
  tar cvf mom6.tar --exclude='.datasets' -C $(MOM6_EXAMPLES) . > /dev/null
  #tar cvf mom6.tar  --exclude='.datasets' --exclude='src' --exclude='INPUT'  -C $(MOM6_EXAMPLES) . > /dev/null
  mkdir mom6
  tar xvf mom6.tar -C ./mom6 > /dev/null
  if ("${platform_domain}" == "ncrc.gov") then
    gcp --batch -cd -r --sync mom6 gfdl:$(NB_ROOT)/
  else if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
    gcp -cd -r --sync mom6 gfdl:$(NB_ROOT)/
  endif
endif

# create dummy MOM6 parameter file for do_ocean=.false.
touch $work/INPUT/MOM_input
touch $work/INPUT/MOM_override
touch $work/INPUT/MOM_layout
touch $work/INPUT/SIS_override
touch $work/INPUT/SIS_layout
ln -s $work/INPUT/topog.nc $work/INPUT/ocean_topog.nc 

# Record the job stdout location for later use timings database
cat >> $HOME/frejobs_stdout <<EOF_frejobs
$stdoutDir/$FRE_JOBID
EOF_frejobs


####COMMON ALWAYS CSH BEGINS######
# MOM6 restart switch
if ( $currentSeg == 1 ) then
   set restart_flag = 'n'
else
   set restart_flag = 'r'
endif

# adjustment of dry mass first time only
set adjust_dry_mass = ".true."
if (-e $work/INPUT/coupler.res) then
   set t1 = (`grep "Model start time"   $work/INPUT/coupler.res | awk '{print $1,$2,$3,$4,$5,$6}'`)
   set t2 = (`grep "Current model time" $work/INPUT/coupler.res | awk '{print $1,$2,$3,$4,$5,$6}'`)
   foreach i (1 2 3 4 5 6)
      if ( $t1[$i] != $t2[$i] ) then
         set adjust_dry_mass = ".false."
         break   
      endif      
   end
endif

#Scan auxiliary_nml for setting MOM6/SIS2 layouts
#The strange use of dummy variable below has to do with post run scanning of stdout by timing database ingestion tool. Please do not simplify!
set dummy     = `awk '/ocean_mask_table/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set ocn_mask_table  =  $dummy
set dummy     = `awk '/ocean_layout/     {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set OCN_LAYOUT    = $dummy
set dummy     = `awk '/ocean_io_layout/  {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set OCN_IO_LAYOUT = $dummy
set dummy     = `awk '/ice_layout/       {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set ICE_LAYOUT    = $dummy
set dummy     = `awk '/ice_io_layout/    {gsub(/=/," ");           print $2,$3}' $work/input.nml`
set ICE_IO_LAYOUT = $dummy

cat > $work/INPUT/MOM_layout << MOM_LAYOUT_EOF
#override undef NIPROC_IO
#override undef NJPROC_IO
#override undef NIPROC
#override undef NJPROC
#override IO_LAYOUT = $OCN_IO_LAYOUT
#override LAYOUT    = $OCN_LAYOUT
#override MASKTABLE = $ocn_mask_table
MOM_LAYOUT_EOF

cat > $work/INPUT/SIS_layout << SIS_LAYOUT_EOF
#override undef NIPROC_IO
#override undef NJPROC_IO
#override undef NIPROC
#override undef NJPROC
#override IO_LAYOUT = $ICE_IO_LAYOUT
#override LAYOUT    = $ICE_LAYOUT
SIS_LAYOUT_EOF

#Handle concurrent radiation case

set do_concurrent_radiation = `awk '/do_concurrent_radiation/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set radiation_nthreads = `awk '/radiation_nthreads/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set atmos_nthreads = `awk '/atmos_nthreads/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
if ( $do_concurrent_radiation == ".true." ) then
   @ atmos_nthreads -= $radiation_nthreads
   /bin/sed -r "s/atmos_nthreads.*/atmos_nthreads=$atmos_nthreads/g" -i $work/input.nml.unexpanded
   setenv MALLOC_CHECK_ 5
   setenv MPICH_GNI_NDREG_LAZYMEM disabled
   alias runCommand /usr/bin/time -p `which aprun` -n $atmos_npes -d $atmos_nthreads ./$executable:t
endif


#Handle hyperthreaded cases

set use_hyper_thread = `awk '/use_hyper_thread/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set atmos_nthreads = `awk '/atmos_nthreads/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
if ( $use_hyper_thread == ".T." || $use_hyper_thread == ".true." ) then
   @ atmos_nthreads *= 2
   /bin/sed -r "s/atmos_nthreads.*/atmos_nthreads=$atmos_nthreads/g" -i $work/input.nml.unexpanded 
   alias runCommand /usr/bin/time -p `which aprun` -n $atmos_npes -j2 -d $atmos_nthreads ./$executable:t
endif



###The following vars are set for the timing database ingestion tool only and are not necessary for a successful run
set dummy     = `awk '/fv_core_nml/,/\// {print}' $work/input.nml | awk '/\<layout\>/ {gsub(/=/," ");print $2,$3}'`
set fv_layout = $dummy
set dummy  = `awk '/fv_core_nml/,/\// {print}' $work/input.nml | awk '/\<io_layout\>/ {gsub(/=/," ");print $2,$3}'`
set fv_io_layout  = $dummy
set dummy  = `awk '/land_model_nml/,/\// {print}' $work/input.nml | awk '/\<layout\>/ {gsub(/=/," ");print $2,$3}'`
set land_layout   = $dummy
set dummy  = `awk '/land_model_nml/,/\// {print}' $work/input.nml | awk '/\<io_layout\>/ {gsub(/=/," ");print $2,$3}'`
set land_io_layout = $dummy
set dummy  = `awk '/nxblocks/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set nxblocks = $dummy
set dummy  = `awk '/nyblocks/ {gsub(/=/," ");gsub(/,/," ");print $2}' $work/input.nml`
set nyblocks = $dummy

####COMMON ALWAYS CSH ENDS######
      ]]></csh>
           
     </input>
  </experiment>


  <experiment name="c192_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Huan.Guo/INPUT/static_veg/19810101.static_veg_LM3p2sosn_HWSD5min_C192_OM4_025.v20160304.tar</dataSource>
        <dataSource site="theia">/scratch4/GFDL/gfdlscr/Niki.Zadeh/archive/input/19810101.static_veg_LM3p2sosn_HWSD5min_C192_OM4_025.v20160304.tar</dataSource>
        <dataSource site="olcf">/lustre/atlas/proj-shared/cli061/pdata/CM4/input/</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c192_OM4_025_hydrography_v20140708.tar </dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c192_OM4_025_grid_v20140708.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

<!--================================-->
<!--= TEMPLATES FOR POSTPROCESSING =-->
<!--================================-->
  <experiment name="c96_climo_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmos8xDailyTS/*)">
            <xi:fallback/>
          </xi:include>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
<!--        <timeSeries freq="hourly" source="atmos_hourly" chunkLength="$(PP_CPLD_CHUNK_A)"/> not in diag_table-->

        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmos4xDailyTS/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosDailyTS/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosMonthTS/*)">
            <xi:fallback/>
          </xi:include>
	  <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="/home/a1r/analysis/agu/Krasting/pywavelet_jpk_a1r.py -varname t_surf -comp atmos"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)">
	  <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="/home/fms/local/opt/fre-analysis/test/eem/code/pcmdi_metrics/frepp.pcmdi_metrics.atmos.csh"/>
	</timeAverage>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
	  <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="/home/fms/local/opt/fre-analysis/test/eem/code/pcmdi_metrics/frepp.pcmdi_metrics.atmos.csh"/>
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosMonthAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosAnnualAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
      </component>

      <component type="atmos_level" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)"/>
        <timeSeries freq="annual"  chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosMonthAerAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
      </component>

      <component type="atmos_scalar" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)">
	  <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/tracerMonthTS/*)">
	    <xi:fallback/>
	  </xi:include>
	</timeSeries>
        <timeSeries freq="annual" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/tracerAnnualTS/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/tracerMonthAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CPLD_CHUNK_A)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/landMonthTS/*)" >
            <xi:fallback/>
	  </xi:include>
        </timeSeries>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_B)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/landMonthAve/*)" >
            <xi:fallback/>
	  </xi:include>
        </timeAverage>
      </component>

      <component type="land_cubic" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)" >
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/landMonthTSNative/*)" >
            <xi:fallback/>
	  </xi:include>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/landDailyTSNative/*)">
            <xi:fallback/>
	  </xi:include>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)" />
      </component>

    </postProcess>
  </experiment>

   <experiment name="c192_climo_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmos8xDailyTS/*)">
            <xi:fallback/>
          </xi:include>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmos4xDailyTS/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosDailyTS/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosMonthTS/*)">
            <xi:fallback/>
          </xi:include>
	  <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="/home/a1r/analysis/agu/Krasting/pywavelet_jpk_a1r.py -varname t_surf -comp atmos"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)">
	  <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="/home/fms/local/opt/fre-analysis/test/eem/code/pcmdi_metrics/frepp.pcmdi_metrics.atmos.csh"/>
	</timeAverage> 
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
	  <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="/home/fms/local/opt/fre-analysis/test/eem/code/pcmdi_metrics/frepp.pcmdi_metrics.atmos.csh"/>
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosMonthAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_A)" calcInterval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosAnnualAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
      </component>

      <component type="atmos_level" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)"/>
        <timeSeries freq="annual"  chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosMonthAerAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
      </component>

      <component type="atmos_scalar" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)">
	  <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/tracerMonthTS/*)">
	    <xi:fallback/>
	  </xi:include>
	</timeSeries>
        <timeSeries freq="annual"  chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/tracerAnnualTS/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/tracerMonthAve/*)">
            <xi:fallback/>
          </xi:include>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CPLD_CHUNK_A)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/landMonthTS/*)" >
            <xi:fallback/>
	  </xi:include>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/landMonthAve/*)" >
            <xi:fallback/>
	  </xi:include>
        </timeAverage>
      </component>
      <component type="land_cubic" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)" >
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/landMonthTSNative/*)" >
            <xi:fallback/>
	  </xi:include>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CPLD_CHUNK_A)">
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/landDailyTSNative/*)">
            <xi:fallback/>
	  </xi:include>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)" />
      </component>

    </postProcess>
  </experiment>


<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->
<experiment name="c192L32_am4g10r8" inherit="cm4_compile">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p10"
communityModelID="am4p10"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->
AM4 prototype configuration "am4g10" from MDT Atmosphere Working Group.
Derived from "am4g7",  with radiation bug-fix and updates from David Paynter, 
New land model from Sergy, re-tuning for 2-hr radiation time-step from Ming Zhao

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g7:
- radiation updates
- new land model
- 2-hr radiation time step

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>

    <input>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1200,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = 864
        atmos_nthreads = 2
      </namelist>

      <namelist name="fv_core_nml"> 
        layout = 6,24
        io_layout = 1,4
        npx      = 193,
        npy      = 193,
        ntiles   = 6,
        npz      = 32,
        k_split  = 2,
        n_split  = 8,
        a2b_ord  = 4,
        adjust_dry_mass = $adjust_dry_mass,
        consv_te = 0.7,
        fill = .true.
        print_freq = 0,
        grid_type = 0,
        nord = 1,
        dddmp = 0.0,
        d2_bg = 0.0,
        d4_bg = 0.15,
        tau = 0.      
        z_tracer=.false.
        kord_tm = -10
        kord_mt =  10
        kord_tr =  10
        hord_mt =  10
        hord_vt = -10
        hord_tm = -10
        hord_dp = -10
        hord_tr = -8
      </namelist>
      <namelist name="land_model_nml">
        layout = 6,24
        io_layout = 1,4
        tau_snow_T_adj = 604800.
        prohibit_negative_canopy_water=.false.
	min_frac = 1e-8
      </namelist>
      <namelist name="ice_model_nml">
        spec_ice = .true.,
        alb_sno = 0.80
        max_ice_alb = 0.90
        min_ice_alb = 0.60
        t_range_melt = 10.0
        layout = 144,6
        io_layout = 1,3
      </namelist>

       <namelist name="flux_exchange_nml">
        nblocks=2
      </namelist>
      <namelist name="atmos_model_nml">
         nxblocks = 1
         nyblocks = 2
      </namelist>
      <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 5000000
            stack_size =0
      </namelist>
      <namelist name="fms_io_nml">
            fms_netcdf_restart=.true.
            threading_read='multi'
            max_files_r = 200
            max_files_w = 200
         !checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
      </namelist>

      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean_g10.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10r8_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_c192L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_amip.nml"/>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192L32_initCond']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>

    </input>

    <runtime>
      <regression name="basic">
        <run days="8"   npes="432"  overrideParams="$(domainparams_c192A432x2)" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="rts">
        <run days="4 4" npes="432"  overrideParams="$(domainparams_c192A432x2)" runTimePerJob="01:00:00"/>
        <run months="1" npes="864"  overrideParams="$(domainparams_c192A864x2)" runTimePerJob="01:00:00"/>
        <run months="1" npes="576"  overrideParams="$(domainparams_c192A576x2)" runTimePerJob="01:00:00"/>
        <run months="1" npes="432"  overrideParams="$(domainparams_c192A432x2)" runTimePerJob="01:30:00"/>
      </regression>

      <regression name="timings">
        <run months="1" npes="432"  overrideParams="$(domainparams_c192A432x2)" runTimePerJob="01:30:00"/>
        <run months="1" npes="576"  overrideParams="$(domainparams_c192A576x2)" runTimePerJob="01:00:00"/>
        <run months="1" npes="864"  overrideParams="$(domainparams_c192A864x2)" runTimePerJob="01:00:00"/>
        <run months="1" npes="432"  overrideParams="$(domainparams_c192A432x4)" runTimePerJob="01:00:00"/>
        <run months="1" npes="576"  overrideParams="$(domainparams_c192A576x4)" runTimePerJob="01:00:00"/>
        <run months="1" npes="864"  overrideParams="$(domainparams_c192A864x4)" runTimePerJob="01:00:00"/>
        <run months="1" npes="1152"  overrideParams="$(domainparams_c192A1152x2)" runTimePerJob="00:30:00"/>
        <run months="1" npes="1728"  overrideParams="$(domainparams_c192A1728x2)" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timings2">
        <run months="1" npes="2304"  overrideParams="$(domainparams_c192A2304x2)" runTimePerJob="00:30:00"/>
        <run months="1" npes="1152"  overrideParams="$(domainparams_c192A1152x4)" runTimePerJob="00:30:00"/>
      </regression>

      <reference restart="$(REFERENCE)/archive/1x0m8d_864pe/restart/19800109.tar"/>
    </runtime>
    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c192_climo_postprocess']/postProcess/node())"/>
    </postProcess>
</experiment>

<experiment name="c96L32_am4g10_2000climo" inherit="cm4_compile">
    <description
communityProject="$(ProjectID)" 
communityModel="am4p10" 
communityModelID="am4p10"
communityExperimentName="$(name)" 
     >
AM4 prototype configuration "am4g10" from MDT Atmosphere Working Group.
Derived from "am4g7",  with radiation bug-fix and updates from David Paynter, 
New land model from Sergy, re-tuning for 2-hr radiation time-step from Ming Zhao

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g7:
- radiation updates
- new land model
- 2-hr radiation time step

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg


    </description>


    <input>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = 864
        atmos_nthreads = 2
      </namelist>
      <namelist name="fv_core_nml"> 
        layout = 6,24
        io_layout = 1,4
        npx      = 97,
        npy      = 97,
        ntiles   = 6,
        npz      = 32,
        k_split  = 1,
        n_split  = 12,
        a2b_ord  = 4,
        adjust_dry_mass = $adjust_dry_mass,
        consv_te = 0.7,
        fill = .true.
        print_freq = 0,
        grid_type = 0,
        nord = 2,
        dddmp = 0.0,
        d2_bg = 0.0,
        d4_bg = 0.15,
        tau = 0.      
        z_tracer=.false.
        kord_tm = -10
        kord_mt =  10
        kord_tr =  10
        hord_mt =  10
        hord_vt = -10
        hord_tm = -10
        hord_dp = -10
        hord_tr = -8
      </namelist>
      <namelist name="land_model_nml">
        layout = 6,24
        io_layout = 1,4
        tau_snow_T_adj = 604800.
        prohibit_negative_canopy_water=.false.
	min_frac = 1e-8
      </namelist>
      <namelist name="ice_model_nml">
        spec_ice = .true.,
        alb_sno = 0.80
        max_ice_alb = 0.90
        min_ice_alb = 0.60
        t_range_melt = 10.0
        layout = 144,6
        io_layout = 1,3
      </namelist>

       <namelist name="flux_exchange_nml">
        nblocks=2
      </namelist>
      <namelist name="atmos_model_nml">
         nxblocks = 1
         nyblocks = 2
      </namelist>
      <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 5000000
            stack_size =0
      </namelist>
      <namelist name="fms_io_nml">
            fms_netcdf_restart=.true.
            threading_read='multi'
            max_files_r = 200
            max_files_w = 200
         !checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
      </namelist>

      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean_g10.nml"/>       
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_2000climo.nml"/>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_aero_initCond']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>

    </input>

    <runtime>
      <production simTime="$(PROD_SIMTIME)" units="years" npes="864" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>
 
      <regression name="basic">
        <run days="8"  npes="216" overrideParams="$(domainparams_A216x2)" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="rts">
        <run days="4 4"  npes="216" overrideParams="$(domainparams_A216x2)" runTimePerJob="00:30:00"/>
        <run months="1"  npes="432" overrideParams="$(domainparams_A432x2)"  runTimePerJob="01:00:00"/>
        <run months="1"  npes="288" overrideParams="$(domainparams_A288x2)"  runTimePerJob="01:00:00"/>
        <run months="1" npes="864"  overrideParams="$(domainparams_A864x2)"  runTimePerJob="01:00:00"/>
      </regression>
      <regression name="debug">
        <run days="1"   npes="216"  overrideParams="$(domainparams_A216x2)" runTimePerJob="01:20:00"/>
      </regression>

      <regression name="rts2">
        <run days="4 4"  npes="432" overrideParams="$(domainparams_A432x2)"  runTimePerJob="01:00:00"/>
        <run days="8"    npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2)"/>
        <run days="8"    npes="768"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A768x4)"/>
        <run days="8"    npes="1152" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2)"/>
      </regression>

      <regression name="1thread">
        <run days="8"   npes="216"  overrideParams="$(domainparams_A216x1)" runTimePerJob="01:00:00"/>
      </regression>
      
      <regression name="timing">
        <run months="1" npes="576"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2)"/>
        <run months="1" npes="768"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A768x2)"/>
      </regression>

      <regression name="timings">
        <run months="1" npes="216"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2)"/>
        <run months="1" npes="432"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2)"/>
        <run months="1" npes="288"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A288x2)"/>
        <run months="1" npes="576"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2)"/>
        <run months="1" npes="768"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A768x2)"/>
        <run months="1" npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A864x2)"/>
        <run months="1" npes="1152" runTimePerJob="00:30:00" overrideParams="$(domainparams_A1152x2)"/>
        <run months="1" npes="1536" runTimePerJob="00:30:00" overrideParams="$(domainparams_A1536x2)"/>
        <run months="1" npes="1728" runTimePerJob="00:30:00" overrideParams="$(domainparams_A1728x2)"/>
      </regression>
      <regression name="timings2">
        <run months="1" npes="1152" runTimePerJob="00:30:00" overrideParams="$(domainparams_A1152x4)"/>
        <run months="1" npes="1152" runTimePerJob="00:30:00" overrideParams="$(domainparams_A1152x4_1)"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00" overrideParams="$(domainparams_A2304x2)"/>
      </regression>

      <regression name="timingsALL">
        <run months="1" npes="216"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A216x2)"/>
        <run months="1" npes="432"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A432x2)"/>
        <run months="1" npes="288"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A288x2)"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2)"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_1)"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_2)"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_3)"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_4)"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_5)"/>
        <run months="1" npes="768"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A768x4)"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x4)"/>
        <run months="1" npes="1152"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2)"/>
        <run months="1" npes="1152"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2_1)"/>
        <run months="1" npes="1152"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2_2)"/>
        <run months="1" npes="1152"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2_3)"/>
        <run months="1" npes="576"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x4)"/>
        <run months="1" npes="288"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A288x8)"/>
        <run months="1" npes="432"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x8)"/>
        <run months="1" npes="1056"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A1056x4)"/>
        <run months="1" npes="1152"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x4)"/>
        <run months="1" npes="960"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A960x4)"/>
    </regression>

      <reference restart="$(REFERENCE)/archive/1x0m8d_216x2a/restart/00010109.tar"/>
    </runtime>
</experiment>

<experiment name="c96L32_am4g10r8_2000climo" inherit="c96L32_am4g10_2000climo"> 
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean_g10.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10r8_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_2000climo.nml"/>
    </input>
</experiment>

<experiment name="c96L32_am4g10r8_1860climo" inherit="c96L32_am4g10r8_2000climo">
    <description>
Same model as c96L32_am4g10_2000climo, but
configuration with present-day climatological SSTs, but pre-industrial GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_1860climo.nml"/>
    </input>
</experiment>

<experiment name="c96L48_am4g10_fullchem_2000climo_hthread" inherit="c96L48_am4g10_fullchem_2000climo"> 
    <runtime>
      <regression name="basic">
        <run days="8"   npes="216"  overrideParams="$(domainparams_A216x2h)" runTimePerJob="00:20:00"/>
      </regression>
      <regression name="rts">
        <run days="4 4"  npes="216" overrideParams="$(domainparams_A216x2h)"  runTimePerJob="00:40:00"/>
        <run days="8"   npes="216"  overrideParams="$(domainparams_A216x4h)" runTimePerJob="00:20:00"/>
      </regression>

      <regression name="timing">
        <run months="1" npes="216"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2h)"/>
        <run months="1" npes="288"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A288x2h)"/>
        <run months="1" npes="432"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2h)"/>
        <run months="1" npes="576"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2h)"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2h)"/>
        <run months="1" npes="1152" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2h)"/>
        <run months="1" npes="768"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A768x4h)"/>
        <run months="1" npes="1536" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1536x2h)"/>
        <run months="1" npes="1728" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1728x2h)"/>
      </regression>

    </runtime>
</experiment>
<experiment name="c96L48_am4g10_fullchem_2000climo" inherit="cm4_compile">
    <description>
Same model as c96L48_am4g9_fullchem,
configuration with present-day climatological SSTs, present-day GHGs and aerosols.

Derived from AM4 prototype configuration "am4g7" from MDT Atmosphere Working Group.
Includes updates from David Paynter for radiaiton and
from Ming Zhao to improve wind stress and fix negative precipitation from UW convection.
Adds "full chemistry" (as in AM3, plus nitrate) and 48 levels.

Chemistry changes from am4g7:
- updated dry deposition: new depvel file, exponential loss
- updated NH3 emissions (seasonality)
- step updates for tracer operator splitting
- dynamic BC and OC aging
- active nitrate thermodynamics (ISORROPIA)
- fix interpolator bug
- cloud chemistry fix
    </description>

    <input>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $(ATM_PROD_NPES)
        atmos_nthreads = $(ATM_PROD_NTHREADS)
      </namelist>
      <namelist name="fv_core_nml"> 
        layout = $(FV_PROD_LAYOUT)
        io_layout = $(FV_PROD_IO_LAYOUT)
        npx      = 97,
        npy      = 97,
        ntiles   = 6,
        npz      = 48,
        k_split  = 1,
        n_split  = 14,
        a2b_ord  = 4,
        adjust_dry_mass = $adjust_dry_mass,
        consv_te = 0.7,
        fill = .true.
        print_freq = 0,
        grid_type = 0,
        nord = 2,
        dddmp = 0.0,
        d2_bg = 0.0,
        d4_bg = 0.15,
        tau = 0.      
        z_tracer=.false.
        kord_tm = -10
        kord_mt =  10
        kord_tr =  10
        hord_mt =  10
        hord_vt = -10
        hord_tm = -10
        hord_dp = -10
        hord_tr = -8
      </namelist>
      <namelist name="land_model_nml">
        layout = $(LND_PROD_LAYOUT)
        io_layout = $(LND_PROD_IO_LAYOUT)
        tau_snow_T_adj = 604800.
        prohibit_negative_canopy_water=.false.
	min_frac = 1e-8
      </namelist>
       <namelist name="flux_exchange_nml">
        nblocks=$(ATM_PROD_NTHREADS)
      </namelist>
      <namelist name="atmos_model_nml">
         nxblocks = $(ATM_PROD_NXBLOCKS)
         nyblocks = $(ATM_PROD_NYBLOCKS)
      </namelist>
      <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 5000000
            stack_size =0
      </namelist>
      <namelist name="fms_io_nml">
            fms_netcdf_restart=.true.
            threading_read='multi'
            max_files_r = 200
            max_files_w = 200
         !checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
      </namelist>

      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean_g10.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_fullchem_2000climo.nml"/>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <dataFile label="input" target="INPUT/emissions.nh3.1x1.2000.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/2000/emissions.nh3.1x1.2000_seasonality.nc</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10_fullchem_2000']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>
    </input>

    <runtime>
      <regression name="basic">
        <run days="8"   npes="216"  overrideParams="$(domainparams_A216x2)" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="rts">
        <run days="4 4"  npes="216" overrideParams="$(domainparams_A216x2)"  runTimePerJob="01:00:00"/>
        <run months="1"  npes="432" overrideParams="$(domainparams_A432x2)"  runTimePerJob="01:00:00"/>
        <run months="1"  npes="288" overrideParams="$(domainparams_A288x2)"  runTimePerJob="01:00:00"/>
        <run months="1"  npes="216" overrideParams="$(domainparams_A216x2)" runTimePerJob="01:00:00"/>
      </regression>

      <regression name="timing">
        <run months="1" npes="768"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A768x4_1)"/>
        <run months="1" npes="864"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A864x4_1)"/>
        <run months="1" npes="576"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x4_1)"/>
        <run months="1" npes="576"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x4)"/>
        <run months="1" npes="432"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x8_1)"/>
      </regression>
      <regression name="timings">
        <run months="1" npes="216"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A216x2)"/>
        <run months="1" npes="432"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A432x2)"/>
        <run months="1" npes="288"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A288x2)"/>
        <run months="1" npes="864"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A864x2)"/>
        <run months="1" npes="768"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A768x4)"/>
        <run months="1" npes="864"  runTimePerJob="02:00:00" overrideParams="$(domainparams_A864x4)"/>
        <run months="1" npes="1152" runTimePerJob="02:00:00" overrideParams="$(domainparams_A1152x2)"/>
        <run months="1" npes="1728" runTimePerJob="02:00:00" overrideParams="$(domainparams_A1728x2)"/>
        <run months="1" npes="576"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x4)"/>
        <run months="1" npes="432"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x8)"/>

        <run months="1" npes="1152" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2_1)"/>
        <run months="1" npes="1152" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2_2)"/>
        <run months="1" npes="1152" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2_3)"/>
        <run months="1" npes="1152" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2_4)"/>
        <run months="1" npes="1152" runTimePerJob="01:00:00" overrideParams="$(domainparams_A1152x2_5)"/>
        <run months="1" npes="576"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x4_1)"/>
      </regression>
      <regression name="timings2">
        <run months="1" npes="1152" runTimePerJob="00:30:00" overrideParams="$(domainparams_A1152x4)"/>
        <run months="1" npes="1152" runTimePerJob="00:30:00" overrideParams="$(domainparams_A1152x4_1)"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00" overrideParams="$(domainparams_A2304x2)"/>
      </regression>

      <reference restart="$(REFERENCE)/archive/1x0m8d_216x2a/restart/00010109.tar"/>

    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>
  </experiment>
  
<!--=======================-->
<!--= CM4 EXPERIMENTS     =-->
<!--=======================-->
<experiment name="CM4_c96L32_am4g10r8_2000.$(MOM6_DATE)" inherit="CM4_c96L32_am4g10r8_2000"/>
<experiment name="CM4_c96L32_am4g10r8_2000" inherit="cm4_sis2_compile">
    <description
communityProject="$(ProjectID)" 
communityModel="CM4_c96_am4p10r8_SIS2  $(MOM6_GIT_TAG)" 
communityModelID="CM4_c96_am4p10r8_SIS2"
communityExperimentName="$(name)">
    </description>
    <communityComment>
For more information please refer to the
&lt;a href="http://wiki.gfdl.noaa.gov/index.php/MDT_Coupled"&gt; Coupled Working Group Wiki.  &lt;/a&gt; and  
&lt;a href="http://cobweb.gfdl.noaa.gov/~Oar.Gfdl.Mdteam/cm4/$USER/$(name)"&gt; Global Diagnostics Page.  &lt;/a&gt;
    </communityComment>
    <scenario 
      communityForcing="N/A"
      startTime="$(EXP_CPLD_START)"
      endTime="$(EXP_CPLD_END)" 
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      branch_time="0.0">
    </scenario>

    <input>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'NOLEAP'
        dt_atmos = 1800,
        dt_cpld  = 1800,
        use_lag_fluxes = .true.
        concurrent = .true.
        do_ocean = .true.
        ocean_npes = $(OCN_PROD_NPES)
        atmos_npes = $(ATM_PROD_NPES)
        atmos_nthreads = $(ATM_PROD_NTHREADS)
      </namelist>
      <namelist name="flux_exchange_nml">
            nblocks=$(ATM_PROD_NTHREADS)
            debug_stocks = .FALSE.
            divert_stocks_report = .TRUE.
            do_area_weighted_flux = .FALSE.
      </namelist>
      <namelist name="fms_io_nml">
            fms_netcdf_restart=.true.
            threading_read='multi'
            max_files_r = 200
            max_files_w = 200
         !checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
      </namelist>
      <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 5000000
            stack_size =0
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce = .true.
        interp_method = 'second_order'
      </namelist>

      <namelist name="atmos_model_nml">
         nxblocks = $(ATM_PROD_NXBLOCKS)
         nyblocks = $(ATM_PROD_NYBLOCKS)
      </namelist>
      <namelist name="fv_core_nml">
        layout = $(FV_PROD_LAYOUT)
        io_layout = $(FV_PROD_IO_LAYOUT)
        npx      = 97,
        npy      = 97,
        ntiles   = 6,
        npz      = 32,
        k_split  = 1,
        n_split  = 12,
        a2b_ord  = 4,
        adjust_dry_mass = $adjust_dry_mass,
        consv_te = 0.7,
        fill = .true.
        print_freq = 0,
        grid_type = 0,
        nord = 2,
        dddmp = 0.0,
        d2_bg = 0.0,
        d4_bg = 0.15,
        tau = 0.      
        z_tracer=.false.
        kord_tm = -10
        kord_mt =  10
        kord_tr =  10
        hord_mt =  10
        hord_vt = -10
        hord_tm = -10
        hord_dp = -10
        hord_tr = -8
      </namelist>
      <namelist name="land_model_nml">
        layout = $(LND_PROD_LAYOUT)
        io_layout = $(LND_PROD_IO_LAYOUT)
        tau_snow_T_adj = 604800.
        prohibit_negative_canopy_water=.false.
	min_frac = 1e-8
      </namelist>

         <namelist name="diag_manager_nml">
       max_axes = 200,
       max_files = 200,
       max_num_axis_sets = 200,
       max_input_fields = 1000
       max_output_fields = 1000
       mix_snapshot_average_fields=.false.
       max_field_attributes=4
         </namelist>
      <namelist name="dummy_ocean_nml">
        ocean_layout = $(OCN_PROD_LAYOUT)
        ocean_io_layout = $(OCN_PROD_IO_LAYOUT)
	ocean_mask_table= $(OCN_PROD_MASK_TABLE)
      </namelist>
      <namelist name="dummy_ice_nml">
        ice_layout = $(ICE_PROD_LAYOUT)
        ice_io_layout = $(ICE_PROD_IO_LAYOUT)
      </namelist>

      <!--AWG Input datasets -->
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10r8_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_2000climo.nml"/> 

      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10']/input/node())"/>

      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_aero_initCond']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_data']/input/node())"/>
      <!--SIS Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>

      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
     ]]></csh>

    </input>

    <runtime>
        <production simTime="$(PROD_SIMTIME)" units="years" npes="$(PROD_NPES)" runTime="$(PROD_RUNTIME)">
          <segment simTime="12" units="months" runTime="$(PROD_SEGTIME)"/>
        </production>
      <regression name="basic">
        <run months="1" npes="$(PROD_NPES)" runTimePerJob="01:00:00"/>
      </regression>

      <regression name="rts">
        <run days="15 16" npes="$(PROD_NPES)" runTimePerJob="01:00:00"/>
  	<run days="2"   npes="2520" runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O2304)"/>
  	<run days="2"   npes="2592" runTimePerJob="00:30:00" overrideParams="$(domainparams_A288x2_O2304)"/>
  	<run days="2"   npes="2880" runTimePerJob="00:30:00" overrideParams="$(domainparams_A288x2_O2592)"/>
      </regression>

      <regression name="debug">
        <run days="1"   npes="1972" runTimePerJob="01:30:00" overrideParams="$(domainparams_A216x2_O1756)"/>
      </regression>

        <regression name="timings_c4">
          <run months="1" npes="2258" runTimePerJob="01:00:00" overrideParams="$(domainparams_A288x2_O1970)"/>
          <run months="1" npes="4358" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O3782)"/>
          <run months="1" npes="3429" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O2997)"/>	  
        </regression>

	<regression name="timings">
          <run months="1" npes="1972" runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O1756)"/>
          <run months="1" npes="2044" runTimePerJob="01:00:00" overrideParams="$(domainparams_A288x2_O1756)"/>
          <run months="1" npes="2186" runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O1970)"/>
          <run months="1" npes="2648" runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O2432)"/>
          <run months="1" npes="2186" runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x4_O1970)"/>
          <run months="1" npes="2258" runTimePerJob="01:00:00" overrideParams="$(domainparams_A288x2_O1970)"/>
          <run months="1" npes="2648" runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O2432)"/>
          <run months="1" npes="4358" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O3782)"/>
          <run months="1" npes="4214" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O3782)"/>
          <run months="1" npes="3429" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O2997)"/>
      	</regression>

      <reference restart="$(REFERENCE)/archive/1x1m0d_432x2a_2997x1o/restart/00010201.tar"/>

    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>

</experiment>

<experiment name="CM4_c192L32_am4g10r8_2000" inherit="cm4_sis2_compile">
    <description
communityProject="$(ProjectID)" 
communityModel="CM4_c192_am4p10r8_SIS2  $(MOM6_GIT_TAG)" 
communityModelID="CM4_c192_am4p10r8_SIS2"
communityExperimentName="$(name)">
    </description>
    <communityComment>
For more information please refer to the
&lt;a href="http://wiki.gfdl.noaa.gov/index.php/MDT_Coupled"&gt; Coupled Working Group Wiki.  &lt;/a&gt; and  
&lt;a href="http://cobweb.gfdl.noaa.gov/~Oar.Gfdl.Mdteam/cm4/$USER/$(name)"&gt; Global Diagnostics Page.  &lt;/a&gt;
    </communityComment>
    <scenario 
      communityForcing="N/A"
      startTime="$(EXP_CPLD_START)"
      endTime="$(EXP_CPLD_END)" 
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      branch_time="0.0">
    </scenario>

    <input>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'NOLEAP'
        dt_atmos = 1200,
        dt_cpld  = 1200,
        use_lag_fluxes = .true.
        concurrent = .true.
        do_ocean = .true.
        ocean_npes = $(OCN_PROD_NPES)
        atmos_npes = $(ATM_PROD_NPES)
        atmos_nthreads = $(ATM_PROD_NTHREADS)
      </namelist>
      <namelist name="flux_exchange_nml">
            nblocks=$(ATM_PROD_NTHREADS)
            debug_stocks = .FALSE.
            divert_stocks_report = .TRUE.
            do_area_weighted_flux = .FALSE.
      </namelist>
      <namelist name="fms_io_nml">
            fms_netcdf_restart=.true.
            threading_read='multi'
            max_files_r = 200
            max_files_w = 200
         !checksum_required = .false. ! This is needed to be able to restart the Ice under GNU. ref. Redmine issue 2000
      </namelist>
      <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 5000000
            stack_size =0
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce = .true.
        interp_method = 'second_order'
      </namelist>

      <namelist name="atmos_model_nml">
         nxblocks = $(ATM_PROD_NXBLOCKS)
         nyblocks = $(ATM_PROD_NYBLOCKS)
      </namelist>
      <namelist name="fv_core_nml">
        layout = $(FV_PROD_LAYOUT)
        io_layout = $(FV_PROD_IO_LAYOUT)
        npx      = 193,
        npy      = 193,
        ntiles   = 6,
        npz      = 32,
        k_split  = 2,
        n_split  = 8,
        a2b_ord  = 4,
        adjust_dry_mass = $adjust_dry_mass,
        consv_te = 0.7,
        fill = .true.
        print_freq = 0,
        grid_type = 0,
        nord = 1,
        dddmp = 0.0,
        d2_bg = 0.0,
        d4_bg = 0.15,
        tau = 0.      
        z_tracer=.false.
        kord_tm = -10
        kord_mt =  10
        kord_tr =  10
        hord_mt =  10
        hord_vt = -10
        hord_tm = -10
        hord_dp = -10
        hord_tr = -8
      </namelist>
      <namelist name="land_model_nml">
        layout = $(LND_PROD_LAYOUT)
        io_layout = $(LND_PROD_IO_LAYOUT)
        tau_snow_T_adj = 604800.
        prohibit_negative_canopy_water=.false.
	min_frac = 1e-8
      </namelist>

         <namelist name="diag_manager_nml">
       max_axes = 200,
       max_files = 200,
       max_num_axis_sets = 200,
       max_input_fields = 1000
       max_output_fields = 1000
       mix_snapshot_average_fields=.false.
       max_field_attributes=4
         </namelist>
      <namelist name="dummy_ocean_nml">
        ocean_layout = $(OCN_PROD_LAYOUT)
        ocean_io_layout = $(OCN_PROD_IO_LAYOUT)
	ocean_mask_table= $(OCN_PROD_MASK_TABLE)
      </namelist>
      <namelist name="dummy_ice_nml">
        ice_layout = $(ICE_PROD_LAYOUT)
        ice_io_layout = $(ICE_PROD_IO_LAYOUT)
      </namelist>

      <!--AWG Input datasets -->
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10r8_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_c192L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_2000climo.nml"/> 

      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10']/input/node())"/>

      <xi:include xpointer="xpointer(//experiment[@name='c192_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192L32_initCond']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_data']/input/node())"/>
      <!--SIS Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>

      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
     ]]></csh>

    </input>

    <runtime>
        <production simTime="$(PROD_SIMTIME)" units="years" npes="$(PROD_NPES)" runTime="$(PROD_RUNTIME)">
          <segment simTime="12" units="months" runTime="$(PROD_SEGTIME)"/>
        </production>
      <regression name="basic">
        <run months="1" npes="2620" runTimePerJob="01:00:00" overrideParams="$(domainparams_c192A864x2_O1756x1)"/>
      </regression>
      <regression name="rts"> 
        <run days="15 16" npes="2620" runTimePerJob="01:00:00" overrideParams="$(domainparams_c192A864x2_O1756x1)"/>
      </regression>

      <reference restart="$(REFERENCE)/archive/1x0m10d_1728pe/restart/00010111.tar"/>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c192_climo_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>

</experiment>


<!--================================-->
<!--= OCEAN-ICE DATA (0.25 degree) =-->
<!--================================-->
<experiment name="OM4_data">
    <input>
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/MOM_input
     </dataFile>      
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/layer_coord.nc
     </dataFile>      
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/seawifs_1998-2006_smoothed_2X.v20140616.nc
     </dataFile>      
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/tidal_amplitude.v20140616.nc
     </dataFile>      
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/MOM_channels_global_025
     </dataFile>      
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m.nc
     </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m_575m.nc
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_edits.nc
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_GS_edits.nc
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/All_edits.nc
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75.nc
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc
      </dataFile>

     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/WOA05_pottemp_salt.nc 
     </dataFile>      

     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.33.16x18     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.96.32x18     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.242.32x36     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.274.36x36     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.315.32x45    
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.548.32x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.622.36x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.808.45x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1053.90x45
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1809.90x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1309.90x54     
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1402.72x72
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.3785.90x144
     </dataFile>
<!--
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1007.54x72       
       $(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/mask_table.1229.64x72
-->
     <dataFile label="input" target="INPUT/ocean_static_no_mask_table.nc" chksum="" size="" timestamp="">
          <dataSource site="ncrc">/lustre/f1/pdata/gfdl_O/datasets/OM4_025/mosaic.v20140610.unpacked/ocean_static.nc</dataSource>
     </dataFile>

     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
     </dataFile>

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override'
     </namelist>
      <namelist name="ice_albedo_nml">
            t_range = 10.
      </namelist>
      <namelist name="monin_obukhov_nml">
	stable_option = 2,
        rich_crit = 1.0,
        zeta_trans = 0.5
      </namelist>
 
     </input>

</experiment>

<!--================================-->
<!--= OCEAN-ICE DATA (0.5 degree) =-->
<!--================================-->
   <experiment name="OM4_05grid_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/MOM_input</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/layer_coord.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/seawifs_1998-2006_smoothed_2X.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/tidal_amplitude.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.66.32x16
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.70.16x32
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.182.32x32
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.239.36x36
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.320.36x45
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.201.32x36
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.548.36x72
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.417.45x45
	$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.359.36x50
        $(OM4_05_ARCHIVE)/mosaic_ocean.720x576/mask_table.363.40x45
      </dataFile>
      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_05/INPUT/MOM_channels_global_025</dataSource>
      </dataFile>      
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/vgrid_75_2m_575m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/analysis_vgrid_lev35.v1.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/hycom1_75_800m.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/Faroe_GS_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/All_edits.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(OM4_05_ARCHIVE)/WOA05_ptemp_salt_monthly.nc </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/ocean_static_no_mask_table.nc" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OM4_05_ARCHIVE)/mosaic_ocean.720x576/ocean_static.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="theia">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="olcf">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.MOM6</dataSource>
      </dataFile>

     <namelist name="MOM_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/MOM_input','INPUT/MOM_layout','INPUT/MOM_override'
     </namelist>
      <namelist name="ice_albedo_nml">
            t_range = 10.
      </namelist>
      <namelist name="monin_obukhov_nml">
	stable_option = 2,
        rich_crit = 1.0,
        zeta_trans = 0.5
      </namelist>
 
     </input>
   </experiment>

  <experiment name="OM4_postprocess">
    <postProcess>
        <csh><![CDATA[
	 #Take care of iceberg restarts and trajectories
         cd $work/RESTART
         #Treat icebergs restarts and trajectories
         #Find non-empty iceberg restarts and combine them AND then remove uncombined restarts
         #This should be handled properly by FRE
         #ncrcat icebergs.res.nc.* icebergs.res.nc
      ls icebergs.res.nc.*
      if( ! $status ) then
         which ncdump
         if( $status ) then
           echo ncdump not available! We need to stop the run or the model restarts incorrectly!
           exit 1
         endif

         set non_empty_restarts = ""
         foreach file ( `ls icebergs.res.nc.????` )
            if ( `ncdump -h $file | grep UNLIMITED | awk '{gsub(/\(/," ");print $6}'` ) set non_empty_restarts = "$non_empty_restarts $file"
         end
         if( "$non_empty_restarts" != "" ) then
          ncrcat $non_empty_restarts icebergs.res.nc
          if( ! -e icebergs.res.nc ) then
            echo ERROR: ncrcat did not produce icebergs restart file! We need to stop the run or the model restarts incorrectly!
            exit 1
          endif
         endif

         mkdir hide_from_fre
         mv icebergs.res.nc.* hide_from_fre/
         cd $work
         mkdir hide_from_fre
         ncrcat iceberg_trajectories.nc.* iceberg_trajectories.nc
         mv iceberg_trajectories.nc.* hide_from_fre/
      endif
        #Save the last line of timestats without the first (step number) column as a signature of MOM6 answers
         tail -1 timestats | cut -c8- > RESTART/$enddate.timestats.res
         #Save the whole timestats under ascii/
         mv timestats $enddate.timestats
         mv timestats.nc $enddate.timestats.nc
         #Make a directory to trick FRE to pick up and archive in ascii
         mkdir extra.results
         mv *velocity_truncations MOM_parameter_doc* SIS_parameter_doc* seaice.stats timestats ocean.stats *.ocean.stats* extra.results/
      #When the ocean uses a mask_table the ocean_static.nc file produced by the model run has holes in coordinates (geolon,geolat)
      #This causes problems for ferret and python tools for analysis.
      #Copy a non-masked version of ocean_static.nc to be saved as a history file to be used by the analysis scipts . 
      cp $work/INPUT/ocean_static_no_mask_table.nc $work/
         ]]></csh>
      <!--REFINE DIAG SCRIPT -->
      <!--refineDiag_data_stager.csh calculates global averages of basic quantities and stores them in a sqlit database file-->
      <!--By default a refineDiag script causes the annual history files to be unpacked and saved in /ptmp/$USER-->
      <refineDiag script="$(NB_ROOT)/mom6/tools/analysis/MOM6_refineDiag.csh $(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_data_stager_globalAve.csh"/>

      <component type="ocean_5daily"   source="ocean_5daily" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_A)" source="ocean_5daily"/>
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_5daily"/>
      </component>
      
      <component type="ocean_monthly"   source="ocean_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)" source="ocean_month">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_monthly.frepp"/>
        </timeSeries>

        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)" >
	  <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="/home/fms/local/opt/fre-analysis/test/eem/code/pcmdi_metrics/frepp.pcmdi_metrics.ocean.csh"/>
	</timeAverage>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)" >
	  <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="/home/fms/local/opt/fre-analysis/test/eem/code/pcmdi_metrics/frepp.pcmdi_metrics.ocean.csh"/>
	</timeAverage>
      </component>

      <component type="ocean_annual"    source="ocean_annual" sourceGrid="ocean-tripolar">
        <timeAverage source="annual"  interval="$(PP_CPLD_CHUNK_A)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual.frepp"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_B)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual.frepp"/>
        </timeAverage>
        <timeSeries freq="annual"   chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_annual"/>
      </component>

      <component type="ocean_annual_z" source="ocean_annual_z" sourceGrid="ocean-tripolar">
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_A)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual_z.frepp"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_B)">
          <analysis switch="$(ANALYSIS_SWITCH)" cumulative="no" script="$(NB_ROOT)/mom6/$(OM4_ANALYSIS)/ocn_annual_z.frepp"/>
        </timeAverage>

        <timeSeries freq="annual"   chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_annual_z"/>	
      </component>

      <!--Ocean scalars-->
      <component type="ocean_scalar_monthly"   source="ocean_scalar_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_scalar_month"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="monthly" interval="$(PP_CPLD_CHUNK_B)"/>
      </component>
      
      <component type="ocean_scalar_annual"    source="ocean_scalar_annual" sourceGrid="ocean-tripolar">
        <timeSeries freq="annual"   chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_scalar_annual"/>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="annual" interval="$(PP_CPLD_CHUNK_B)"/>
      </component>

      <!--Ocean regions-->
      <component type="ocean_Barents_opening" source="ocean_Barents_opening" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Barents_opening"/>
      </component>
      <component type="ocean_Bering_Strait" source="ocean_Bering_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Bering_Strait"/>
      </component>
      <component type="ocean_Davis_Strait" source="ocean_Davis_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Davis_Strait"/>
      </component>
      <component type="ocean_Windward_Passage" source="ocean_Windward_Passage" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Windward_Passage"/>
      </component>
      <component type="ocean_Denmark_Strait" source="ocean_Denmark_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Denmark_Strait"/>
      </component>
      <component type="ocean_Drake_Passage" source="ocean_Drake_Passage" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Drake_Passage"/>
      </component>
      <component type="ocean_English_Channel" source="ocean_English_Channel" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_English_Channel"/>
      </component>
      <component type="ocean_Faroe_Scotland" source="ocean_Faroe_Scotland" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Faroe_Scotland"/>
      </component>
      <component type="ocean_Florida_Bahamas" source="ocean_Florida_Bahamas" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Florida_Bahamas"/>
      </component>
      <component type="ocean_Fram_Strait" source="ocean_Fram_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Fram_Strait"/>
      </component>
      <component type="ocean_Iceland_Faroe_V" source="ocean_Iceland_Faroe_V" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Iceland_Faroe_V"/>
      </component>
      <component type="ocean_Iceland_Faroe_U" source="ocean_Iceland_Faroe_U" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Iceland_Faroe_U"/>
      </component>
      <component type="ocean_Indonesian_Throughflow" source="ocean_Indonesian_Throughflow" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Indonesian_Throughflow"/>
      </component>
      <component type="ocean_Mozambique_Channel" source="ocean_Mozambique_Channel" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Mozambique_Channel"/>
      </component>
      <component type="ocean_Pacific_undercurrent" source="ocean_Pacific_undercurrent" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Pacific_undercurrent"/>
      </component>
      <component type="ocean_Taiwan_Luzon" source="ocean_Taiwan_Luzon" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Taiwan_Luzon"/>
      </component>
      <component type="ocean_Agulhas_section" source="ocean_Agulhas_section" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Agulhas_section"/>
      </component>
      <component type="ocean_Gibraltar_Strait" source="ocean_Gibraltar_Strait" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Gibraltar_Strait"/>
      </component>
      <component type="ocean_Iceland_Norway" source="ocean_Iceland_Norway" sourceGrid="ocean-tripolar">
        <timeSeries freq="120hr" chunkLength="$(PP_CPLD_CHUNK_B)" source="ocean_Iceland_Norway"/>
      </component>

      <!--ICE-->      
      <component type="ice"  source="ice_month" sourceGrid="ocean-tripolar">
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_A)"  source="ice_month">
	   <analysis switch="$(ANALYSIS_SWITCH)" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
	</timeSeries>   
        <timeSeries freq="monthly" chunkLength="$(PP_CPLD_CHUNK_B)"  source="ice_month">
	   <analysis switch="$(ANALYSIS_SWITCH)" script="$(NB_ROOT)/mom6/tools/analysis/Krasting-SeaIce.csh"/>
	</timeSeries>   
        <timeAverage source="annual"  interval="$(PP_CPLD_CHUNK_A)"/>
        <timeAverage source="annual"  interval="$(PP_CPLD_CHUNK_B)"/>
      </component>     

    </postProcess>
  </experiment> 

<!--=======================-->
<!--= CM4_SIS2 EXPERIMENTS=-->
<!--=======================-->
  <experiment name="SIS2_data">
    <input>

     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.SIS</dataSource>
     </dataFile>
     <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/diag_table.icebergs</dataSource>
        <dataSource site="gfdl">$(NB_ROOT)/mom6/ice_ocean_SIS2/OM4_025/diag_table.icebergs</dataSource>
     </dataFile>
     <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/SIS_input</dataSource>
     </dataFile>

<!-- No init ice yet
     <dataFile label="input" target="INPUT/ice_model.res.nc" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(MOM6_EXAMPLES)/ice_ocean_SIS2/OM4_025/INPUT/.datasets/OM4_025/INPUT/ice_model.res.v20140620.nc</dataSource>
     </dataFile>
-->
     <namelist name="SIS_input_nml" >
         output_directory = './',
         input_filename = '$restart_flag'
         restart_input_dir = 'INPUT/',
         restart_output_dir = 'RESTART/',
         parameter_filename = 'INPUT/SIS_input','INPUT/SIS_layout','INPUT/SIS_override'
     </namelist>
      <namelist name="icebergs_nml">
        really_debug=.FALSE.
        debug=.FALSE.
        verbose=.FALSE.
        verbose_hrs=7200
        use_operator_splitting=.TRUE.
        bergy_bit_erosion_fraction=0.0
        sicn_shift=0.1
        parallel_reprod=.TRUE.
        traj_sample_hrs=0
        add_weight_to_ocean=.false.	
      </namelist>
      <namelist name="ocean_albedo_nml">
            ocean_albedo_option = 5
      </namelist>
      <namelist name="ocean_rough_nml">
            rough_scheme = 'coare3.5'
      </namelist>
     </input>
  </experiment>

<experiment name="CM4_g10r8_160526.$(MOM6_DATE)" inherit="CM4_g10r8_160526"/>
<experiment name="CM4_g10r8_160526" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
      ]]></csh>

</input>
</experiment>

<experiment name="CM4_g10r8_160526_tauscl7.$(MOM6_DATE)" inherit="CM4_g10r8_160526_tauscl7"/>
<experiment name="CM4_g10r8_160526_tauscl7" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
WIND_STRESS_MULTIPLIER = 0.7
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>
<experiment name="CM4_g10r8_160526_MEKE_ndiff.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MEKE_ndiff"/>
<experiment name="CM4_g10r8_160526_MEKE_ndiff" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
MEKE_KHTH_FAC = 1.0
KH_RES_FN_POWER = 100
KHTR = 500
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>
<experiment name="CM4_g10r8_160526_MLE30d.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MLE30d"/>
<experiment name="CM4_g10r8_160526_MLE30d" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLb.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MLE30d_ePBLb"/>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLb" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 1.0
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLc.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MLE30d_ePBLc"/>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLc" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 1.0
#override MKE_TO_TKE_EFFIC = 0.1
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLd.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MLE30d_ePBLd"/>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLd" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.02
#override TKE_DECAY = 16.0
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLe.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MLE30d_ePBLe"/>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLe" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.02
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override EPBL_IS_ADDITIVE = False
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLf.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MLE30d_ePBLf"/>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLf" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override FOX_KEMPER_ML_RESTRAT_COEF = 2.0
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.02
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override EPBL_IS_ADDITIVE = False
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>

<experiment name="CM4_g10r8_160526_MLE30d_ePBLg.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MLE30d_ePBLg"/>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLg" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.2
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override EPBL_IS_ADDITIVE = False
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>

<experiment name="CM4_g10r8_160526_MLE30d_ePBLh_theia_intel15" inherit="CM4_g10r8_160526_MLE30d_ePBLh"/>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLh.$(MOM6_DATE)" inherit="CM4_g10r8_160526_MLE30d_ePBLh"/>
<experiment name="CM4_g10r8_160526_MLE30d_ePBLh" inherit="CM4_c96L32_am4g10r8_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.1
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override EPBL_IS_ADDITIVE = False
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>

<experiment name="CM4_c96L32_am4g10r14_2000" inherit="CM4_c96L32_am4g10r8_2000">
<input>
    <namelist name="entrain_nml">
        convect_shutoff = .true.,
        apply_entrain = .true.,
        parcel_buoy   = 0.4,
        parcel_option = 2,
        beta_rad      = 0.33,
        Ashear        = 20.0, 
        beta_surf     = 0.23,
        radperturb    = 0.10, 
        critjump      = 0.10,
    </namelist>
      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 10.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 2.0e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 5.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 1.0
        U_evap_snow = 1.0
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>
      <namelist name="uw_plume_nml">
        auto_th0 = 0.5e-3,
        tcrit    = -25.15,
        peff_l   = 5.0e-5
        peff_i   = 11.0e-5
        frac_drs = 0.0
        rpen     = 4.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3 
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 2
        mp_choice = 2
        do_pevap = .true.
        do_new_pblfac = .true.
        include_emf_s = .false.
        cfrac    = 0.15
        hcevap   = 0.8
        hcevappbl = 1.0
        pblfac   = 1.0
        emfrac_max = 0.25
        rmaxfrac = 0.1
        do_limit_wmax = .true.
        wmax = 20.
        do_tten_max = .false.
        tten_max = 1000
        bigc = 0.0
      </namelist>
      <namelist name="deep_conv_nml">
        crh_th_ocean = 0.4
        crh_th_land  = 0.4
        auto_th0_d = 0.5e-3
        tcrit_d    = -25.15,
        peff_l_d   = 5.0e-5
        peff_i_d   = 11.0e-5
        rkm_dp1 = 2.
        rkm_dp2 = 0.1
        crh_max = 0.95
        cwfn_th = 10.
        tau_dp = 28800.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 4.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.8
        hcevappbl_d = 1.0
        pblfac_d   = 1.0
        frac_limit_d = 0.25
        dcwfndm_th = 100
        lofactor_d = 1.0
        do_cgust_dp  = .true.
        cgust_choice = 1
        include_emf_d = .false.
      </namelist>
</input>
</experiment>

<experiment name="CM4_g10r14_160526_MLE30d_ePBLh.$(MOM6_DATE)" inherit="CM4_g10r14_160526_MLE30d_ePBLh"/>
<experiment name="CM4_g10r14_160526_MLE30d_ePBLh" inherit="CM4_c96L32_am4g10r14_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.1
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override EPBL_IS_ADDITIVE = False
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>

<experiment name="CM4_g10r14_160526_MLE30d_ePBLh_NH.$(MOM6_DATE)" inherit="CM4_g10r14_160526_MLE30d_ePBLh_NH"/>
<experiment name="CM4_g10r14_160526_MLE30d_ePBLh_NH" inherit="CM4_c96L32_am4g10r14_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.1
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override EPBL_IS_ADDITIVE = False
#override HENYEY_IGW_BACKGROUND = False
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>

<experiment name="CM4_g10r14_160526_MLE30d_ePBLj.$(MOM6_DATE)" inherit="CM4_g10r14_160526_MLE30d_ePBLj"/>
<experiment name="CM4_g10r14_160526_MLE30d_ePBLj" inherit="CM4_c96L32_am4g10r14_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.2
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override WSTAR_USTAR_COEF = 1.0
#override USE_MLD_ITERATION = True
#override EPBL_IS_ADDITIVE = False
#override TKE_SHEAR_DECAY_CONST = 0.55
MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>
</input>
</experiment>

<experiment name="CM4_g10r14_160526_MLE30d_ePBLm" inherit="CM4_c96L32_am4g10r14_2000">
<input>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#

cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.2
#override WSTAR_USTAR_COEF = 1.0
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override USE_MLD_ITERATION = True
#override EPBL_TRANSITION_SCALE = 0.1
#override EPBL_IS_ADDITIVE = False
#override PRANDTL_TURB = 1.25
MOM_OVERRIDE_EOF

     ]]></csh>
</input>
</experiment>
<experiment name="CM4_c96L32_am4g10r8_2000_OMp5" inherit="cm4_sis2_compile">
    <description
communityProject="$(ProjectID)" 
communityModel="CM4_c96_am4p9_SIS2  $(MOM6_GIT_TAG)" 
communityModelID="CM4_c96_am4p9_SIS2"
communityExperimentName="$(name)">
    </description>
    <communityComment>
For more information please refer to the
&lt;a href="http://wiki.gfdl.noaa.gov/index.php/MDT_Coupled"&gt; Coupled Working Group Wiki.  &lt;/a&gt; and  
&lt;a href="http://cobweb.gfdl.noaa.gov/~Oar.Gfdl.Mdteam/cm4/$USER/$(name)"&gt; Global Diagnostics Page.  &lt;/a&gt;

Same as CM4_c96L32_am4g10r8_2000_OMp5 but using a newer ocean topography (John Dunne) and newer hydrography files (Krista Dunne)

   </communityComment>
    <scenario 
      communityForcing="N/A"
      startTime="$(EXP_CPLD_START)"
      endTime="$(EXP_CPLD_END)" 
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      branch_time="0.0">
    </scenario>

    <input>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'NOLEAP'
        dt_atmos = 1800,
        dt_cpld  = 3600,
        use_lag_fluxes = .true.
        concurrent = .true.
        do_ocean = .true.
        ocean_npes = 842   
        atmos_npes = 576  
        atmos_nthreads = 2 
      </namelist>
      <namelist name="flux_exchange_nml">
            nblocks=$(ATM_PROD_NTHREADS)
            debug_stocks = .FALSE.
            divert_stocks_report = .TRUE.
            do_area_weighted_flux = .FALSE.
      </namelist>
      <namelist name="fms_io_nml">
            fms_netcdf_restart=.true.
            threading_read='multi'
            max_files_r = 200
            max_files_w = 200
      </namelist>
      <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 7000000
            stack_size =0
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce = .true.
        interp_method = 'second_order'
      </namelist>

      <namelist name="atmos_model_nml">
         nxblocks = 1 
         nyblocks = 2 
      </namelist>
      <namelist name="fv_core_nml">
        layout = 8,12   
        io_layout = 1,4 
        npx      = 97,
        npy      = 97,
        ntiles   = 6,
        npz      = 32,
        k_split  = 1,
        n_split  = 12,
        a2b_ord  = 4,
        adjust_dry_mass = $adjust_dry_mass,
        consv_te = 0.7,
        fill = .true.
        print_freq = 0,
        grid_type = 0,
        nord = 2,
        dddmp = 0.0,
        d2_bg = 0.0,
        d4_bg = 0.15,
        tau = 0.      
        z_tracer=.false.
        kord_tm = -10
        kord_mt =  10
        kord_tr =  10
        hord_mt =  10
        hord_vt = -10
        hord_tm = -10
        hord_dp = -10
        hord_tr = -8
      </namelist>
      <namelist name="land_model_nml">
        layout = 8,12 
        io_layout = 1,4 
        tau_snow_T_adj = 604800.
        prohibit_negative_canopy_water=.false.
	min_frac = 1e-8
      </namelist>

         <namelist name="diag_manager_nml">
       max_axes = 200,
       max_files = 200,
       max_num_axis_sets = 200,
       max_input_fields = 1000
       max_output_fields = 1000
       mix_snapshot_average_fields=.false.
       max_field_attributes=4
         </namelist>
      <namelist name="dummy_ocean_nml">
        ocean_layout = 32,32  
        ocean_io_layout = 1,4 
	ocean_mask_table= mask_table.182.32x32 
      </namelist>
      <namelist name="dummy_ice_nml">
        ice_layout = 144,4 
        ice_io_layout = 1,4 
      </namelist>

      <!--AWG Input datasets -->
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10r8_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10r8_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_2000climo.nml"/>

      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2_Op5grid']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_Op5_initCond']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_05grid_data']/input/node())"/>
      <!--SIS Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
#override CHL_FROM_FILE = True
#override CHL_FILE      = "seawifs_1998-2006_smoothed_2X.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
#override KHTR = 300.                                                                
MEKE_KHTH_FAC = 1.0                                                                  
VISC_RES_FN_POWER = 100 
#override DT = 2400
#override DT_THERM = 10800
#override DIABATIC_FIRST = False
#override OCEAN_SURFACE_STAGGER = "C"
#override TOPO_EDITS_FILE       = ""
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"
#override ENERGYSAVEDAYS = 30

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override MIN_OCN_INTERTIAL_H = 2.
SIS_OVERRIDE_EOF
     ]]></csh>

    </input>

    <runtime>
        <production simTime="$(PROD_SIMTIME)" units="years" npes="1418" runTime="04:00:00">
          <segment simTime="12" units="months" runTime="02:00:00"/>
        </production>
      <regression name="basic">
          <run months="1" npes="1058"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O842p5)"/>
      </regression>

      <regression name="rts">
        <run days="15 16" npes="1058"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O842p5)"/>
        <run days="2"     npes="1058"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O842p5)"/>
  	<run days="2"     npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O648)"/>
  	<run days="2"     npes="1080" runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O864)"/>
      </regression>

      <regression name="debug">
          <run days="1" npes="1489" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1057p5)"/>
          <run days="1" npes="864" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x1_O432)"/>
      </regression>

      <regression name="debug2">
          <run days="1" npes="1008" runTimePerJob="01:00:00" overrideParams="$(domainparams_A504x1_O504)"/>
      </regression>
      <regression name="debug3">
          <run days="1" npes="936" runTimePerJob="01:00:00" overrideParams="$(domainparams_A504x1_O432)"/>
          <run days="1" npes="864" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O432)"/>
      </regression>

	<regression name="layouts">
          <run days="2" npes="1876" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O1300p5)"/>
          <run days="2" npes="2196" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O1620)"/>
          <run days="2" npes="1633" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O1057p5)"/>
          <run days="2" npes="1872" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O1296)"/>
          <run days="2" npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O648)"/>
          <run days="2" npes="1080" runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O864)"/>
          <run days="2" npes="1418" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O842p5)"/>
      	</regression>

	<regression name="timings_c3">
          <run months="1" npes="1418" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O842p5)"/>
          <run months="1" npes="1274" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O842p5)"/>
      	</regression>
	<regression name="timings_t1">
          <run months="1" npes="658"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O442p5)"/>
          <run months="1" npes="1274" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O842p5)"/>
          <run months="1" npes="1489" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1057p5)"/>
          <run months="1" npes="1633" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O1057p5)"/>
          <run months="1" npes="1876" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O1300p5)"/>
          <run months="1" npes="2164" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1300p5)"/>
          <run months="1" npes="2472" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1608p5)"/>
          <run months="1" npes="2305" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1441p5)"/>
          <run months="1" npes="2301" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1437p5)"/>
       	</regression>

	<regression name="timings">
          <run months="1" npes="1418" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O842p5)"/>
          <run months="1" npes="1876" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O1300p5)"/>
       	</regression>

	<regression name="timings2">
          <run months="1" npes="1728" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1296)"/>
          <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O648)"/>
          <run months="1" npes="1489" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1057p5)"/>
          <run months="1" npes="1732" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1300p5)"/>
          <run months="1" npes="1383" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O951p5)"/>
          <run months="1" npes="1383" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O951p5)"/>
          <run months="1" npes="1876" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O1300p5)"/>
          <run months="1" npes="2908" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O2044p5)"/>
          <run months="1" npes="2164" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1300p5)"/>
          <run months="1" npes="2472" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1608p5)"/>
          <run months="1" npes="2305" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1441p5)"/>
      	</regression>

      <reference restart="$(REFERENCE)/archive/1x1m0d_216x2a_842x1o/restart/00010201.tar"/>

    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>

</experiment>

<experiment name="CM4_c96L32_am4g10r13_2000_OMp5_lmix_H5_nmle_ndiff_meke_KHTH200" inherit="CM4_c96L32_am4g10r8_2000_OMp5">
  <input>
      <namelist name="deep_conv_nml">
        crh_th_ocean = 0.4
        crh_th_land  = 0.4
        auto_th0_d = 0.5e-3
        tcrit_d    = -25.15,
        peff_l_d   = 5.0e-5
        peff_i_d   = 11.5e-5
        rkm_dp1 = 2.
        rkm_dp2 = 0.1
        crh_max = 0.95
        cwfn_th = 10.
        tau_dp = 28800.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 4.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.8
        hcevappbl_d = 1.0
        pblfac_d   = 1.0
        frac_limit_d = 0.25
        dcwfndm_th = 100
        lofactor_d = 1.0
        do_cgust_dp  = .true.
        cgust_choice = 1
        include_emf_d = .false.
      </namelist>

      <namelist name="entrain_nml">
        convect_shutoff = .true.,
        apply_entrain = .true.,
        parcel_buoy   = 0.4,
        parcel_option = 2,
        beta_rad      = 0.23,
        Ashear        = 20.0, 
        beta_surf     = 0.23,
        radperturb    = 0.10, 
        critjump      = 0.10,
      </namelist>
        
      <namelist name="land_model_nml">
        layout = 8,12
        io_layout = 1,4
        tau_snow_T_adj = 604800.
        prohibit_negative_canopy_water=.false.
        use_coast_rough = .true.,
        use_coast_topo_rough = .false.,
        max_coast_frac=0.67
      </namelist>

      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 10.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 2.0e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 5.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 1.0
        U_evap_snow = 1.0
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>

      <namelist name="uw_plume_nml">
        auto_th0 = 0.5e-3,
        tcrit    = -25.15,
        peff_l   = 5.0e-5
        peff_i   = 11.5e-5
        frac_drs = 0.0
        rpen     = 4.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3 
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 2
        mp_choice = 2
        do_pevap = .true.
        do_new_pblfac = .true.
        include_emf_s = .false.
        cfrac    = 0.15
        hcevap   = 0.8
        hcevappbl = 1.0
        pblfac   = 1.0
        emfrac_max = 0.25
        rmaxfrac = 0.1
        do_limit_wmax = .true.
        wmax = 20.
        do_tten_max = .false.
        tten_max = 1000
        bigc = 0.0
      </namelist>

      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE  = "tidal_amplitude.nc"
#override CHL_FROM_FILE = True
#override CHL_FILE      = "seawifs_1998-2006_smoothed_2X.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"
#override ENERGYSAVEDAYS = 30

#override KD = 2.0E-6

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override MIN_OCN_INTERTIAL_H = 2.

SIS_OVERRIDE_EOF
     ]]></csh>

    </input>
</experiment>

<experiment name="CM4_c96L32_am4g10r13_1860_OMp5_lmix_H5_nmle_ndiff_meke_KHTH200" inherit="CM4_c96L32_am4g10r13_2000_OMp5_lmix_H5_nmle_ndiff_meke_KHTH200">
 <input>
      <namelist name="carbon_aerosol_nml">
      bcff_source = 'gocart_2007',
        bcff_input_name(1)='anthro',
        bcff_filename='emissions.bc.1x1.1859_2020.nc',
        bcff_time_dependency_type='fixed_year',bcff_dataset_entry=1860,1,1,0,0,
      omff_source = 'gocart_2007',
        omff_input_name(1)='anthro',
        omff_filename='emissions.om.1x1.1859_2020.nc',
        omff_time_dependency_type='fixed_year',omff_dataset_entry=1860,1,1,0,0,
      omsh_source = 'gocart_2007',
        omsh_input_name(1)='ship',
        omsh_filename='emissions.om.1x1.1859_2020.nc',
        omsh_time_dependency_type='fixed_year',omsh_dataset_entry=1860,1,1,0,0,
      bcsh_source = 'gocart_2007',
        bcsh_input_name(1)='ship',
        bcsh_filename='emissions.bc.1x1.1859_2020.nc',
        bcsh_time_dependency_type='fixed_year',bcsh_dataset_entry=1860,1,1,0,0,
      bcav_source = 'do_aircraft'
        bcav_input_name(1)='fuel',
        bcav_filename='emissions.aircraft.aero.1x1.1859_2020.nc',
        bcav_time_dependency_type='fixed_year',bcav_dataset_entry=1860,1,1,0,0,
      bcbb_source = 'AEROCOM',
        bcbb_filename='emissions.bc.1x1.1859_2020.nc',
        bcbb_input_name(1)='bb_l1'
        bcbb_input_name(2)='bb_l2'
        bcbb_input_name(3)='bb_l3'
        bcbb_input_name(4)='bb_l4'
        bcbb_input_name(5)='bb_l5'
        bcbb_input_name(6)='bb_l6'
        bcbb_time_dependency_type='fixed_year',bcbb_dataset_entry=1860,1,1,0,0,
      ombb_source = 'AEROCOM',
        ombb_filename='emissions.om.1x1.1859_2020.nc',
        ombb_input_name(1)='bb_l1'
        ombb_input_name(2)='bb_l2'
        ombb_input_name(3)='bb_l3'
        ombb_input_name(4)='bb_l4'
        ombb_input_name(5)='bb_l5'
        ombb_input_name(6)='bb_l6'
        ombb_time_dependency_type='fixed_year',ombb_dataset_entry=1860,1,1,0,0,
      omna_source = 'gunther',
        omna_filename='oc8_natural_emission.nc'
        omna_input_name='omemisnat'
      omss_source = 'ODowd'
        omss_coef = 0.05
        no_biobur_if_no_pbl = .false.
      </namelist>

      <namelist name="ozone_nml">
      basic_ozone_type = 'fixed_year' ,
      ozone_dataset_entry = 1860,1,1,0,0,
      data_name = "ozone",
      filename = "o3.climatology.nc"
      do_coupled_stratozone=.false.
      </namelist>

      <namelist name="radiative_gases_nml">
      use_co2_10um = .true.

      verbose = 3
      gas_printout_freq = 240

      time_varying_co2 = .false.,
      co2_variation_type = 'linear',
      co2_dataset_entry = 1860,1,1,0,0,
      co2_specification_type = 'time_series',
      co2_floor = 100.0E-06,
      co2_ceiling = 1600.0E-06,
      co2_data_source = 'input'

      time_varying_ch4 = .false.,
      ch4_variation_type = 'linear'
      ch4_dataset_entry = 1860,1,1,0,0,
      ch4_specification_type = 'time_series'
      ch4_data_source = 'input'

      time_varying_n2o = .false.,
      n2o_variation_type = 'linear'
      n2o_dataset_entry = 1860,1,1,0,0,
      n2o_specification_type = 'time_series'
      n2o_data_source = 'input'

      time_varying_f11 = .false.,
      f11_variation_type = 'linear'
      f11_dataset_entry = 1860,1,1,0,0,
      f11_specification_type = 'time_series'
      f11_data_source = 'input'

      time_varying_f12 = .false.,
      f12_variation_type = 'linear'
      f12_dataset_entry = 1860,1,1,0,0,
      f12_specification_type = 'time_series'
      f12_data_source = 'input'

      time_varying_f113 = .false.,
      f113_variation_type = 'linear'
      f113_dataset_entry = 1860,1,1,0,0,
      f113_specification_type = 'time_series'
      f113_data_source = 'input'

      time_varying_f22 = .false.,
      f22_variation_type = 'linear'
      f22_dataset_entry = 1860,1,1,0,0,
      f22_specification_type = 'time_series'
      f22_data_source = 'input'
      </namelist>

      <namelist name="sealw00_nml">
      calc_co2_tfs_on_first_step = .false.,
      calc_co2_tfs_monthly = .true.,
      co2_tf_time_displacement = 360.0,

      calc_ch4_tfs_on_first_step = .false.,
      calc_ch4_tfs_monthly = .true.,
      ch4_tf_time_displacement = 360.0,

      calc_n2o_tfs_on_first_step = .false.,
      calc_n2o_tfs_monthly = .true.,
      n2o_tf_time_displacement = 360.0,
      </namelist>

      <namelist name="shortwave_driver_nml">
      do_cmip_diagnostics = .true.,
      swform = 'esfsw99'
      solar_dataset_entry = 1860,1,1,0,0,
      time_varying_solar_constant = .false.,
      </namelist>

      <namelist name="simple_sulfate_nml">
        gas_conc_filename='gas_conc_3D_am3p9.nc'
        gas_conc_time_dependency_type='constant'
        cont_volc_source='do_cont_volc'
        expl_volc_source='do_expl_volc'
          aerocom_emission_filename='so2_0.25_volcanoes.nc'
        aircraft_source='do_aircraft',
          aircraft_filename='emis_fuel_aircraft.1859_2010.nc',
          aircraft_emission_name(1)='fuel'
          so2_aircraft_EI=0.001
          aircraft_time_dependency_type='fixed_year',aircraft_dataset_entry=1860,1,1,0,0,
        anthro_source='do_anthro',
          anthro_emission_name(1)='so2ff',
          anthro_emission_name(2)='so4ff',
          anthro_filename='anthro_so2.1859_2010.nc',
          anthro_time_dependency_type='fixed_year',anthro_dataset_entry=1860,1,1,0,0,
        biobur_source='do_biobur',
          biobur_emission_name(1)='so2bb',
          biobur_emission_name(2)='so4bb',
          biobur_filename='anthro_so2.1859_2010.nc',
          biobur_time_dependency_type='fixed_year',biobur_dataset_entry=1860,1,1,0,0,
        cloud_chem_solver="f1p"
        pH_cloud=4.5
        no_biobur_if_no_pbl = .false.
      </namelist>

      <namelist name="vegn_nml">
      init_Tv = 288.0
      rad_to_use = 'two-stream'
      photosynthesis_to_use = 'leuning'
      snow_rad_to_use = 'paint-leaves'
      co2_to_use_for_photosynthesis ='prescribed'
      co2_for_photosynthesis = 286.0e-6
      do_cohort_dynamics   = .TRUE.,              
      do_patch_disturbance = .TRUE.,              
      do_phenology         = .TRUE.,              
      do_biogeography      = .TRUE.,              
      do_seed_transport    = .TRUE.,
      tau_smooth_ncm = 22.0
      rav_lit_bwood = 300.
      </namelist>

 </input>
</experiment>

<experiment name="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLe_c4_intel16" inherit="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLe"/>
<experiment name="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLe_theia_intel15" inherit="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLe"/>
<experiment name="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLe" inherit="CM4_c96L32_am4g10r13_2000_OMp5_lmix_H5_nmle_ndiff_meke_KHTH200">
<input>
    <namelist name="entrain_nml">
        convect_shutoff = .true.,
        apply_entrain = .true.,
        parcel_buoy   = 0.4,
        parcel_option = 2,
        beta_rad      = 0.33,
        Ashear        = 20.0, 
        beta_surf     = 0.23,
        radperturb    = 0.10, 
        critjump      = 0.10,
    </namelist>
      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 10.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 2.0e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 5.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 1.0
        U_evap_snow = 1.0
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>
      <namelist name="uw_plume_nml">
        auto_th0 = 0.5e-3,
        tcrit    = -25.15,
        peff_l   = 5.0e-5
        peff_i   = 11.0e-5
        frac_drs = 0.0
        rpen     = 4.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3 
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 2
        mp_choice = 2
        do_pevap = .true.
        do_new_pblfac = .true.
        include_emf_s = .false.
        cfrac    = 0.15
        hcevap   = 0.8
        hcevappbl = 1.0
        pblfac   = 1.0
        emfrac_max = 0.25
        rmaxfrac = 0.1
        do_limit_wmax = .true.
        wmax = 20.
        do_tten_max = .false.
        tten_max = 1000
        bigc = 0.0
      </namelist>
      <namelist name="deep_conv_nml">
        crh_th_ocean = 0.4
        crh_th_land  = 0.4
        auto_th0_d = 0.5e-3
        tcrit_d    = -25.15,
        peff_l_d   = 5.0e-5
        peff_i_d   = 11.0e-5
        rkm_dp1 = 2.
        rkm_dp2 = 0.1
        crh_max = 0.95
        cwfn_th = 10.
        tau_dp = 28800.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 4.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.8
        hcevappbl_d = 1.0
        pblfac_d   = 1.0
        frac_limit_d = 0.25
        dcwfndm_th = 100
        lofactor_d = 1.0
        do_cgust_dp  = .true.
        cgust_choice = 1
        include_emf_d = .false.
      </namelist>

      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
#override CHL_FROM_FILE = True
#override CHL_FILE      = "seawifs_1998-2006_smoothed_2X.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"
#override ENERGYSAVEDAYS = .25
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.02
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override EPBL_IS_ADDITIVE = False

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override MIN_OCN_INTERTIAL_H = 2.

SIS_OVERRIDE_EOF
     ]]></csh>

</input>
</experiment>

<experiment name="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLj_c4_intel16_norough" inherit="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLj">
<input>
      <namelist name="ocean_rough_nml">
            rough_scheme = 'COARE3.5'
      </namelist>
</input>
</experiment>

<experiment name="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLj_c4_intel16" inherit="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLj"/>
<experiment name="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLj" inherit="CM4_c96L32_am4g10r13_2000_OMp5_lmix_H5_nmle_ndiff_meke_KHTH200">
<input>
    <namelist name="entrain_nml">
        convect_shutoff = .true.,
        apply_entrain = .true.,
        parcel_buoy   = 0.4,
        parcel_option = 2,
        beta_rad      = 0.33,
        Ashear        = 20.0, 
        beta_surf     = 0.23,
        radperturb    = 0.10, 
        critjump      = 0.10,
    </namelist>
      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 10.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 2.0e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 5.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 1.0
        U_evap_snow = 1.0
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>
      <namelist name="uw_plume_nml">
        auto_th0 = 0.5e-3,
        tcrit    = -25.15,
        peff_l   = 5.0e-5
        peff_i   = 11.0e-5
        frac_drs = 0.0
        rpen     = 4.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3 
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 2
        mp_choice = 2
        do_pevap = .true.
        do_new_pblfac = .true.
        include_emf_s = .false.
        cfrac    = 0.15
        hcevap   = 0.8
        hcevappbl = 1.0
        pblfac   = 1.0
        emfrac_max = 0.25
        rmaxfrac = 0.1
        do_limit_wmax = .true.
        wmax = 20.
        do_tten_max = .false.
        tten_max = 1000
        bigc = 0.0
      </namelist>
      <namelist name="deep_conv_nml">
        crh_th_ocean = 0.4
        crh_th_land  = 0.4
        auto_th0_d = 0.5e-3
        tcrit_d    = -25.15,
        peff_l_d   = 5.0e-5
        peff_i_d   = 11.0e-5
        rkm_dp1 = 2.
        rkm_dp2 = 0.1
        crh_max = 0.95
        cwfn_th = 10.
        tau_dp = 28800.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 4.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.8
        hcevappbl_d = 1.0
        pblfac_d   = 1.0
        frac_limit_d = 0.25
        dcwfndm_th = 100
        lofactor_d = 1.0
        do_cgust_dp  = .true.
        cgust_choice = 1
        include_emf_d = .false.
      </namelist>

      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
#override CHL_FROM_FILE = True
#override CHL_FILE      = "seawifs_1998-2006_smoothed_2X.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"
#override ENERGYSAVEDAYS = .25
#override MLE_MLD_DECAY_TIME = 2.592E+06
#override MSTAR = 2.9
#override NSTAR = 0.2
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override WSTAR_USTAR_COEF = 1.0
#override USE_MLD_ITERATION = True
#override EPBL_IS_ADDITIVE = False
#override TKE_SHEAR_DECAY_CONST = 0.55

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override MIN_OCN_INTERTIAL_H = 2.

SIS_OVERRIDE_EOF
     ]]></csh>

</input>
</experiment>

<experiment name="CM4_c96L32_am4g10r14_2000_OMp5_H5_ndiff_meke_MLE30d_ePBLl" inherit="CM4_c96L32_am4g10r13_2000_OMp5_lmix_H5_nmle_ndiff_meke_KHTH200">
<input>
    <namelist name="entrain_nml">
        convect_shutoff = .true.,
        apply_entrain = .true.,
        parcel_buoy   = 0.4,
        parcel_option = 2,
        beta_rad      = 0.33,
        Ashear        = 20.0,
        beta_surf     = 0.23,
        radperturb    = 0.10,
        critjump      = 0.10,
    </namelist>
      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 10.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 2.0e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 5.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 1.0
        U_evap_snow = 1.0
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>
      <namelist name="uw_plume_nml">
        auto_th0 = 0.5e-3,
        tcrit    = -25.15,
        peff_l   = 5.0e-5
        peff_i   = 11.0e-5
        frac_drs = 0.0
        rpen     = 4.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 2
        mp_choice = 2
        do_pevap = .true.
        do_new_pblfac = .true.
        include_emf_s = .false.
        cfrac    = 0.15
        hcevap   = 0.8
        hcevappbl = 1.0
        pblfac   = 1.0
        emfrac_max = 0.25
        rmaxfrac = 0.1
        do_limit_wmax = .true.
        wmax = 20.
        do_tten_max = .false.
        tten_max = 1000
        bigc = 0.0
      </namelist>
      <namelist name="deep_conv_nml">
        crh_th_ocean = 0.4
        crh_th_land  = 0.4
        auto_th0_d = 0.5e-3
        tcrit_d    = -25.15,
        peff_l_d   = 5.0e-5
        peff_i_d   = 11.0e-5
        rkm_dp1 = 2.
        rkm_dp2 = 0.1
        crh_max = 0.95
        cwfn_th = 10.
        tau_dp = 28800.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 4.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.8
        hcevappbl_d = 1.0
        pblfac_d   = 1.0
        frac_limit_d = 0.25
        dcwfndm_th = 100
        lofactor_d = 1.0
        do_cgust_dp  = .true.
        cgust_choice = 1
        include_emf_d = .false.
      </namelist>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
#override CHL_FROM_FILE = True
#override CHL_FILE      = "seawifs_1998-2006_smoothed_2X.nc"
Z_INIT_REMAP_GENERAL = True
Z_INIT_REMAP_FULL_COLUMN = True
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"
#override ENERGYSAVEDAYS = .25
#override USE_MLD_ITERATION = True
#override MSTAR = 2.9
#override NSTAR = 0.2
#override TKE_DECAY = 16.0
#override ML_OMEGA_FRAC = 0.1
#override EPBL_IS_ADDITIVE = False
#override USE_MLD_ITERATION = True
#override PRANDTL_TURB = 1.25

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override U_TRUNC_FILE = "SIS_U_truncations"
#override V_TRUNC_FILE = "SIS_V_truncations"
#override MIN_OCN_INTERTIAL_H = 2.

SIS_OVERRIDE_EOF
     ]]></csh>

</input>
</experiment>


<experiment name="CM4_c96L32_am4g10r8_2000_OMp5_COBALT" inherit="CM4_c96L32_am4g10r8_2000_OMp5">
    <input>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'NOLEAP'
        dt_atmos = 1800,
        dt_cpld  = 3600,
        use_lag_fluxes = .true.
        concurrent = .true.
        do_ocean = .true.
        ocean_npes = 842   
        atmos_npes = 216  
        atmos_nthreads = 2 
      </namelist>
      <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_CFC=.false.
       do_generic_COBALT=.true.
       do_generic_TOPAZ=.false.
       force_update_fluxes=.true. !This has to be set for THERMO_SPANS_COUPLING to work
      </namelist>

      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2_Op5grid']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_Op5_initCond']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_05grid_data']/input/node())"/>
      <!--SIS Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <!--COBALT source datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OBGC_COBALT_data_p5']/input/node())"/>
	 
     <diagTable order="append">
#================
# sample z DIAGNOSTICS
#================
#===========================
# ocean_cobalt_sample_z
#===========================
"ocean_cobalt_sample",       1,  "days", 1, "days", "time",
 "generic_cobalt","def_fe_Sm",       "def_fe_Sm",          "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","chl",                "chl",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","htotal",             "htotal",             "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","alk",                "alk",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dic",                "dic",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","o2",                 "o2",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","lith",                 "lith",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dep_dry_lith",                 "dep_dry_lith",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dep_wet_lith",                 "dep_wet_lith",                 "ocean_cobalt_sample","all",.false.,"none",2
#
 "ocean_model","temp","temp","ocean_cobalt_sample","all",.false.,"none",2
 "ocean_model","salt","salt","ocean_cobalt_sample","all",.false.,"none",2
"ocean_cobalt_sample_z",       0,  "days", 1, "days", "time",
 "generic_cobalt_z_new","def_fe_Sm",       "def_fe_Sm",          "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","chl",                "chl",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","htotal",             "htotal",             "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","alk",                "alk",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dic",                "dic",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","o2",                 "o2",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","lith",                 "lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dep_dry_lith",                 "dep_dry_lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dep_wet_lith",                 "dep_wet_lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
##                                                                                                                                                             11
 "ocean_model_z_new","temp","temp","ocean_cobalt_sample_z","all",.false.,"none",2
 "ocean_model_z_new","salt","salt","ocean_cobalt_sample_z","all",.false.,"none",2
"atmos_dust_sample",       1,  "days", 1, "days", "time",
"tracer" , "dust_ddep", "dust_ddep", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust_emis", "dust_emis", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust1_setl", "dust1_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust2_setl", "dust2_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust3_setl", "dust3_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust4_setl", "dust4_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust5_setl", "dust5_setl", "atmos_dust_sample","all",.false.,"none",2
"dynamics",  "dust1",  "dust1",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust2",  "dust2",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust3",  "dust3",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust4",  "dust4",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust5",  "dust5",  "atmos_dust_sample", "all", .false.,  "none", 2

     </diagTable>

      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
REMAP_AFTER_INITIALIZATION = False                                                   
#override REGRIDDING_COORDINATE_MODE = "HYCOM1"                                      
#override ALE_COORDINATE_CONFIG = "HYBRID:hycom1_75_800m.nc,sigma2,FNC1:2,4000,4.5,.01"                                      
MAXIMUM_INT_DEPTH_CONFIG = "FNC1:5,8000.0,1.0,.01"                                   
MAX_LAYER_THICKNESS_CONFIG = "FNC1:400,31000.0,0.1,.01"                              
REGRID_COMPRESSIBILITY_FRACTION = 0.01                                               
BOUNDARY_EXTRAPOLATION = True                                                        
DYNAMIC_SURFACE_PRESSURE = True 
#override USE_NEUTRAL_DIFFUSION = True                                               
#override KHTR = 300.                                                                
KH_RES_FN_POWER = 100                                                                
MEKE_KHTH_FAC = 1.0                                                                  
VISC_RES_FN_POWER = 100 
#override DT = 2400
#override DT_THERM = 10800
#override DIABATIC_FIRST = False
THERMO_SPANS_COUPLING = True
#override USE_generic_tracer = True
#override CHL_FROM_FILE = False
#override USE_RIVER_HEAT_CONTENT = True
#override USE_CALVING_HEAT_CONTENT = True

#override OCEAN_SURFACE_STAGGER = "C"
#override TOPO_EDITS_FILE       = ""
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"

#override ENERGYSAVEDAYS = 30

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576

SIS_OVERRIDE_EOF
     ]]></csh>

    </input>

    <runtime>
        <production simTime="$(PROD_SIMTIME)" units="years" npes="1058" runTime="$(PROD_RUNTIME)">
          <segment simTime="12" units="months" runTime="$(PROD_SEGTIME)"/>
        </production>
      <regression name="basic">
          <run months="1" npes="1516"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O1300p5)"/>
      </regression>

      <regression name="rts">
        <run days="15 16" npes="1516" runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O1300p5)"/>
        <run days="2"     npes="432"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x1_O216)"/>
  	<run days="2"     npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O648)"/>
  	<run days="2"     npes="1080" runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O864)"/>
      </regression>

      <regression name="debug">
        <run days="2"     npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O648)"/>
        <run days="1 1"   npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O648)"/>
      </regression>

      <regression name="debug2">
        <run days="2"     npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A432x1_O432)"/>
        <run days="1 1"   npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A432x1_O432)"/>
      </regression>

      <regression name="debug3">
        <run days="2"     npes="432"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x1_O216)"/>
        <run days="1 1"   npes="432"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x1_O216)"/>
      </regression>

      <regression name="1day">
          <run days="1" npes="936" runTimePerJob="01:00:00" overrideParams="$(domainparams_A504x1_O432)"/>
          <run days="1" npes="864" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O432)"/>
          <run days="1" npes="1008" runTimePerJob="01:00:00" overrideParams="$(domainparams_A504x1_O504)"/>
      </regression>

	<regression name="layouts">
          <run days="2" npes="1876" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O1300p5)"/>
          <run days="2" npes="2196" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O1620)"/>
          <run days="2" npes="1633" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O1057p5)"/>
          <run days="2" npes="1872" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O1296)"/>
          <run days="2" npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O648)"/>
          <run days="2" npes="1080" runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O864)"/>
          <run days="2" npes="1418" runTimePerJob="00:30:00" overrideParams="$(domainparams_A576x2_O842p5)"/>
      	</regression>

	<regression name="timings_c3">
          <run months="1" npes="1633" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O1057p5)"/>
          <run months="1" npes="1274" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O842p5)"/>
      	</regression>
	<regression name="timings_t1">
          <run months="1" npes="658"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O442p5)"/>
          <run months="1" npes="1274" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O842p5)"/>
          <run months="1" npes="1489" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1057p5)"/>
          <run months="1" npes="1633" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O1057p5)"/>
          <run months="1" npes="1876" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O1300p5)"/>
          <run months="1" npes="2164" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1300p5)"/>
          <run months="1" npes="2472" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1608p5)"/>
          <run months="1" npes="2305" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1441p5)"/>
          <run months="1" npes="2301" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1437p5)"/>
       	</regression>

	<regression name="timings">
          <run months="1" npes="1728" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1296)"/>
          <run months="1" npes="864"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A216x2_O648)"/>
          <run months="1" npes="1489" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1057p5)"/>
          <run months="1" npes="1732" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O1300p5)"/>
          <run months="1" npes="1383" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O951p5)"/>
          <run months="1" npes="1383" runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x2_O951p5)"/>
          <run months="1" npes="1876" runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x2_O1300p5)"/>
          <run months="1" npes="2908" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O2044p5)"/>
          <run months="1" npes="2164" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1300p5)"/>
          <run months="1" npes="2472" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1608p5)"/>
          <run months="1" npes="2305" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1441p5)"/>
      	</regression>

      <reference restart="$(REFERENCE)/archive/1x1m0d_216x2a_1300x1o/restart/00010201.tar"/>

    </runtime>
</experiment>

<experiment name="CM4_c96L32_am4g10r8_2000_OMp5_COBALT_dust1" inherit="CM4_c96L32_am4g10r8_2000_OMp5_COBALT">
    <input>
      <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_CFC=.false.
       do_generic_COBALT=.true.
       do_generic_TOPAZ=.false.
       force_update_fluxes=.true. !This has to be set for THERMO_SPANS_COUPLING to work
      </namelist>
      <namelist name="dust_nml">
       dust_source_name = 'source',
       dust_source_filename = 'dust_source_Iceland_1x1.nc'
       uthresh = 3.5
       coef_emis = 2.5e-10
       do_esm_dust_flux = .true.
      </namelist>

      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2_Op5grid']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_Op5_initCond']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_05grid_data']/input/node())"/>
      <!--SIS Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <!--COBALT source datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OBGC_COBALT_Fe_data_p5']/input/node())"/>

     <diagTable order="append">
#================
# sample z DIAGNOSTICS
#================
#===========================
# ocean_cobalt_sample_z
#===========================
"ocean_cobalt_sample",       0,  "days", 1, "days", "time",
 "generic_cobalt","def_fe_Sm",       "def_fe_Sm",          "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","chl",                "chl",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","htotal",             "htotal",             "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","alk",                "alk",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dic",                "dic",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","o2",                 "o2",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","lith",                 "lith",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dep_dry_lith",                 "dep_dry_lith",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dep_wet_lith",                 "dep_wet_lith",                 "ocean_cobalt_sample","all",.false.,"none",2
#
 "ocean_model","temp","temp","ocean_cobalt_sample","all",.false.,"none",2
 "ocean_model","salt","salt","ocean_cobalt_sample","all",.false.,"none",2
"ocean_cobalt_sample_z",       0,  "days", 1, "days", "time",
 "generic_cobalt_z_new","def_fe_Sm",       "def_fe_Sm",          "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","chl",                "chl",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","htotal",             "htotal",             "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","alk",                "alk",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dic",                "dic",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","o2",                 "o2",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","lith",                 "lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dep_dry_lith",                 "dep_dry_lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dep_wet_lith",                 "dep_wet_lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
##                                                                                                                                                             11
 "ocean_model_z_new","temp","temp","ocean_cobalt_sample_z","all",.false.,"none",2
 "ocean_model_z_new","salt","salt","ocean_cobalt_sample_z","all",.false.,"none",2
"atmos_dust_sample",       0,  "days", 1, "days", "time",
"tracer" , "dust_ddep", "dust_ddep", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust_emis", "dust_emis", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust1_setl", "dust1_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust2_setl", "dust2_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust3_setl", "dust3_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust4_setl", "dust4_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust5_setl", "dust5_setl", "atmos_dust_sample","all",.false.,"none",2
"dynamics",  "dust1",  "dust1",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust2",  "dust2",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust3",  "dust3",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust4",  "dust4",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust5",  "dust5",  "atmos_dust_sample", "all", .false.,  "none", 2

     </diagTable>
      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
REMAP_AFTER_INITIALIZATION = False                                                   
#override REGRIDDING_COORDINATE_MODE = "HYCOM1"                                      
#override ALE_COORDINATE_CONFIG = "HYBRID:hycom1_75_800m.nc,sigma2,FNC1:2,4000,4.5,.01"                                      
MAXIMUM_INT_DEPTH_CONFIG = "FNC1:5,8000.0,1.0,.01"                                   
MAX_LAYER_THICKNESS_CONFIG = "FNC1:400,31000.0,0.1,.01"                              
REGRID_COMPRESSIBILITY_FRACTION = 0.01                                               
BOUNDARY_EXTRAPOLATION = True                                                        
DYNAMIC_SURFACE_PRESSURE = True 
#override USE_NEUTRAL_DIFFUSION = True                                               
#override KHTR = 300.                                                                
KH_RES_FN_POWER = 100                                                                
MEKE_KHTH_FAC = 1.0                                                                  
VISC_RES_FN_POWER = 100 
#override DT = 2400
#override DT_THERM = 10800
#override DIABATIC_FIRST = False
THERMO_SPANS_COUPLING = True
#override USE_generic_tracer = True
#override USE_RIVER_HEAT_CONTENT = True
#override USE_CALVING_HEAT_CONTENT = True

#override OCEAN_SURFACE_STAGGER = "C"
#override TOPO_EDITS_FILE       = ""
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"

#override CHL_FROM_FILE = False

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576

SIS_OVERRIDE_EOF
     ]]></csh>
     </input>

</experiment>

<experiment name="OBGC_COBALT_Fe_data_p5">
    <input>
       <!-- IC files -->
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_n_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_p_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_i_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_o_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Alk.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/TCO2.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
         <dataSource
platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc</dataSource>
      </dataFile>

       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_horowitz/depflux_total.mean.1990.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Soluble_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Mineral_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/diag_table.COBALT_20160308</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/diag_table.COBALT_20160308</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/ESM4/retrospective/diag_table.COBALT_20160308</dataSource>
      </dataFile>

      <!--Dust exchange included -->
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/field_table.COBALT_fe_14c_init_tracers_latlon_dic1990_20160308</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/field_table.COBALT_fe_14c_init_tracers_latlon_dic1990_20160308</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/field_table.COBALT_fe_14c_init_tracers_latlon_dic1990_20160308</dataSource>
      </dataFile>

      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.COBALT_dust_1990_20160308</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/data_table.COBALT_dust_1990_20160308</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/ESM4/data_table.COBALT_dust_1990_20160308</dataSource>
      </dataFile>

      <!-- grid specific -->
      <dataFile label="input" target="INPUT/news_nutrients.nc" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/unswept/Jasmin.John/datasets/ESM4/news_nutrients_halfdeg_20151207.nc</dataSource>
      </dataFile>

     </input>

</experiment>
<experiment name="OBGC_COBALT_data_p5">
    <input>
       <!-- IC files -->
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_n_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_p_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_i_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/woa13/woa13_all_o_annual_01.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/Alk.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/glodap/20151013/TCO2.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/init_ocean_cobalt.res.nc" chksum="" size="" timestamp="">
         <dataSource
platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/mom4p1_restart_to_latlon_360x180/ESM2M_pi-control_C2_cobalt_latlon_360x180_15010101_nobounds_mumem_htotalbounds.ocean_cobalt.res.nc</dataSource>
      </dataFile>

       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(FMS_ESM_ARCHIVE_ROOT)/TOPAZ/deposition_horowitz/depflux_total.mean.1990.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Soluble_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(OBGC_ARCHIVE_ROOT)/Mineral_Fe_Flux_moxim11_climatology.nc</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_20141212</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/diag_table.COBALT_20141212</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/diag_table.COBALT_20141212</dataSource>
      </dataFile>

      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
        <dataSource site="olcf">$(OBGC_MODEL_UPDATES)/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
        <dataSource site="gfdl">$(OBGC_MODEL_UPDATES)/fre/input/retrospective/field_table.COBALT_init_tracers_latlon_dic1990_20151014</dataSource>
      </dataFile>

      <!-- grid specific -->
      <dataFile label="input" target="INPUT/news_nutrients_halfdeg.nc" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">/lustre/f1/unswept/Jasmin.John/datasets/ESM4/news_nutrients_halfdeg_20151207.nc</dataSource>
      </dataFile>

      <dataTable>
# jgj 2013/01/23 updated for COBALT
#nnz: chanaged news_nutrients_quarterdeg to news_nutrients_halfdeg
#
"OCN", "runoff_no3_flux_ice_ocn",   "NO3_CONC",   "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_ldon_flux_ice_ocn",  "LDON_CONC",  "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_sldon_flux_ice_ocn", "SLDON_CONC", "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_srdon_flux_ice_ocn", "SRDON_CONC", "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_ndet_flux_ice_ocn",  "NDET_CONC",  "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_po4_flux_ice_ocn",   "PO4_CONC",   "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_ldop_flux_ice_ocn",  "LDOP_CONC",  "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_sldop_flux_ice_ocn", "SLDOP_CONC", "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_srdop_flux_ice_ocn", "SRDOP_CONC", "./INPUT/news_nutrients_halfdeg.nc","none",1.0e-3
"OCN", "runoff_fed_flux_ice_ocn", ""   , ""                             , "none" ,  0.0
"OCN", "runoff_alk_flux_ice_ocn", ""   , ""                             , "none" ,  0.48e-3
"OCN", "runoff_dic_flux_ice_ocn", ""   , ""                             , "none" ,  0.24e-3
"OCN", "runoff_lith_flux_ice_ocn", ""  , ""                             , "none" , 13.0e-3
"OCN", "dry_dep_fed_flux_ice_ocn", "FLUX",         "./INPUT/Soluble_Fe_Flux_moxim11_climatology.nc", "bilinear" , -1.0
"OCN", "dry_dep_lith_flux_ice_ocn", "FLUX",        "./INPUT/Mineral_Fe_Flux_moxim11_climatology.nc", "bilinear" , -1594.0
"OCN", "dry_dep_po4_flux_ice_ocn", "FLUX",         "./INPUT/Mineral_Fe_Flux_moxim11_climatology.nc", "bilinear" , -0.035
"OCN", "wet_dep_no3_flux_ice_ocn",  "NO3_WET_DEP", "./INPUT/depflux_total.mean.1990.nc", "bilinear" , -1.0
"OCN", "dry_dep_no3_flux_ice_ocn",  "NO3_DRY_DEP", "./INPUT/depflux_total.mean.1990.nc", "bilinear" , -1.0
"OCN", "wet_dep_nh4_flux_ice_ocn",  "NH4_WET_DEP", "./INPUT/depflux_total.mean.1990.nc", "bilinear" , -1.0
"OCN", "dry_dep_nh4_flux_ice_ocn",  "NH4_DRY_DEP", "./INPUT/depflux_total.mean.1990.nc", "bilinear" , -1.0
#
"ATM", "o2_flux_pcair_atm", ""         , ""                             , "none" , 0.21
"ATM", "co2_flux_pcair_atm", ""        , ""                             , "none" ,350.0e-6
"ATM", "co2_bot"       , ""        , ""                    , "none"     , 350.0e-6
#
## JGJ: add cfcs later - check scale factor
# "ATM", "cfc_11_flux_pcair_atm","CFC_11","INPUT/cfc.bc.nc","bilinear", 1.0e-12
# "ATM", "cfc_12_flux_pcair_atm","CFC_12","INPUT/cfc.bc.nc","bilinear", 1.0e-12
#      </dataTable>
	
     </input>

</experiment>
 

<experiment name="CM4_c96L48_am4g10r8_fullchem_2000_OMp5_COBALT" inherit="cm4_sis2_compile">
    <description
communityProject="$(ProjectID)" 
communityModel="CM4_c96_am4p9_SIS2  $(MOM6_GIT_TAG)" 
communityModelID="CM4_c96_am4p9_SIS2"
communityExperimentName="$(name)">
    </description>
    <communityComment>
For more information please refer to the
&lt;a href="http://wiki.gfdl.noaa.gov/index.php/MDT_Coupled"&gt; Coupled Working Group Wiki.  &lt;/a&gt; and  
&lt;a href="http://cobweb.gfdl.noaa.gov/~Oar.Gfdl.Mdteam/cm4/$USER/$(name)"&gt; Global Diagnostics Page.  &lt;/a&gt;
    </communityComment>
    <scenario 
      communityForcing="N/A"
      startTime="$(EXP_CPLD_START)"
      endTime="$(EXP_CPLD_END)" 
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      branch_time="0.0">
    </scenario>

    <input>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'NOLEAP'
        dt_atmos = 1800,
        dt_cpld  = 3600,
        use_lag_fluxes = .true.
        concurrent = .true.
        do_ocean = .true.
        ocean_npes = 842   
        atmos_npes = 216  
        atmos_nthreads = 2 
      </namelist>
      <namelist name="generic_tracer_nml">
       do_generic_tracer=.true.
       do_generic_CFC=.false.
       do_generic_COBALT=.true.
       do_generic_TOPAZ=.false.
       force_update_fluxes=.true. !This has to be set for THERMO_SPANS_COUPLING to work
      </namelist>
      <namelist name="flux_exchange_nml">
            nblocks=$(ATM_PROD_NTHREADS)
            debug_stocks = .FALSE.
            divert_stocks_report = .TRUE.
            do_area_weighted_flux = .FALSE.
      </namelist>
      <namelist name="fms_io_nml">
            fms_netcdf_restart=.true.
            threading_read='multi'
            max_files_r = 200
            max_files_w = 200
      </namelist>
      <namelist name="fms_nml">
            clock_grain='ROUTINE'
            clock_flags='NONE'
            domains_stack_size = 7000000
            stack_size =0
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce = .true.
        interp_method = 'second_order'
      </namelist>
      <namelist name="atmos_model_nml">
         nxblocks = $(ATM_PROD_NXBLOCKS)
         nyblocks = $(ATM_PROD_NYBLOCKS)
      </namelist>
      <namelist name="fv_core_nml">
        layout = $(FV_PROD_LAYOUT)
        io_layout = $(FV_PROD_IO_LAYOUT)
        npx      = 97,
        npy      = 97,
        ntiles   = 6,
        npz      = 48,
        k_split  = 1,
        n_split  = 14,
        a2b_ord  = 4,
        adjust_dry_mass = $adjust_dry_mass,
        consv_te = 0.7,
        fill = .true.
        print_freq = 0,
        grid_type = 0,
        nord = 2,
        dddmp = 0.0,
        d2_bg = 0.0,
        d4_bg = 0.15,
        tau = 0.      
        z_tracer=.false.
        kord_tm = -10
        kord_mt =  10
        kord_tr =  10
        hord_mt =  10
        hord_vt = -10
        hord_tm = -10
        hord_dp = -10
        hord_tr = -8
      </namelist>
      <namelist name="land_model_nml">
        layout = $(LND_PROD_LAYOUT)
        io_layout = $(LND_PROD_IO_LAYOUT)
        tau_snow_T_adj = 604800.
        prohibit_negative_canopy_water=.false.
	min_frac = 1e-8
        use_coast_rough = .true.,
        use_coast_topo_rough = .false.,
        max_coast_frac=0.67
      </namelist>

         <namelist name="diag_manager_nml">
       max_axes = 200,
       max_files = 200,
       max_num_axis_sets = 200,
       max_input_fields = 1000
       max_output_fields = 1000
       mix_snapshot_average_fields=.false.
       max_field_attributes=4
         </namelist>
      <namelist name="dummy_ocean_nml">
        ocean_layout = 32,32  
        ocean_io_layout = 1,4 
	ocean_mask_table= mask_table.182.32x32 
      </namelist>
      <namelist name="dummy_ice_nml">
        ice_layout = 144,4 
        ice_io_layout = 1,4 
      </namelist>

      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g10_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p10_fullchem_2000climo.nml"/>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <dataFile label="input" target="INPUT/emissions.nh3.1x1.2000.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/2000/emissions.nh3.1x1.2000_seasonality.nc</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10_fullchem_2000']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2_Op5grid']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>
      <!--MOM6 Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OM4_05grid_data']/input/node())"/>
      <!--SIS Input datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>
      <!--COBALT source datasets-->
      <xi:include xpointer="xpointer(//experiment[@name='OBGC_COBALT_data_p5']/input/node())"/>
	 
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Niki.Zadeh/archive/input/verona/L48regrid/c96L48_initCond.remapped.v20150521.tar</dataSource>
      </dataFile>

     <diagTable order="append">
#================
# sample z DIAGNOSTICS
#================
#===========================
# ocean_cobalt_sample_z
#===========================
"ocean_cobalt_sample",       1,  "days", 1, "days", "time",
 "generic_cobalt","def_fe_Sm",       "def_fe_Sm",          "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","chl",                "chl",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","htotal",             "htotal",             "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","alk",                "alk",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dic",                "dic",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","o2",                 "o2",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","lith",                 "lith",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dep_dry_lith",                 "dep_dry_lith",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dep_wet_lith",                 "dep_wet_lith",                 "ocean_cobalt_sample","all",.false.,"none",2
#
 "ocean_model","temp","temp","ocean_cobalt_sample","all",.false.,"none",2
 "ocean_model","salt","salt","ocean_cobalt_sample","all",.false.,"none",2
"ocean_cobalt_sample_z",       0,  "days", 1, "days", "time",
 "generic_cobalt_z_new","def_fe_Sm",       "def_fe_Sm",          "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","chl",                "chl",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","htotal",             "htotal",             "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","alk",                "alk",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dic",                "dic",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","o2",                 "o2",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","lith",                 "lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dep_dry_lith",                 "dep_dry_lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dep_wet_lith",                 "dep_wet_lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
##                                                                                                                                                             11
 "ocean_model_z_new","temp","temp","ocean_cobalt_sample_z","all",.false.,"none",2
 "ocean_model_z_new","salt","salt","ocean_cobalt_sample_z","all",.false.,"none",2
"atmos_dust_sample",       1,  "days", 1, "days", "time",
"tracer" , "dust_ddep", "dust_ddep", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust_emis", "dust_emis", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust1_setl", "dust1_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust2_setl", "dust2_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust3_setl", "dust3_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust4_setl", "dust4_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust5_setl", "dust5_setl", "atmos_dust_sample","all",.false.,"none",2
"dynamics",  "dust1",  "dust1",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust2",  "dust2",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust3",  "dust3",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust4",  "dust4",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust5",  "dust5",  "atmos_dust_sample", "all", .false.,  "none", 2

     </diagTable>

      <csh><![CDATA[
#amip initCond tar file inludes ice_model.res.nc not suitable for the coupled model
if ( $currentSeg == 1 ) then
\rm -f $work/INPUT/ice_model.res.nc
endif
#
cat > $work/INPUT/MOM_override << MOM_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576
#override TEMP_SALT_Z_INIT_FILE = "WOA05_ptemp_salt_monthly.nc"
#override Z_INIT_FILE_PTEMP_VAR = "ptemp"
#override Z_INIT_FILE_SALT_VAR  = "salt"
#override TIDEAMP_FILE          = "tidal_amplitude.nc"
Z_INIT_REMAP_GENERAL = True                                                          
Z_INIT_REMAP_FULL_COLUMN = True                                                      
REMAP_AFTER_INITIALIZATION = False                                                   
#override REGRIDDING_COORDINATE_MODE = "HYCOM1"                                      
#override ALE_COORDINATE_CONFIG = "HYBRID:hycom1_75_800m.nc,sigma2,FNC1:2,4000,4.5,.01"                                      
MAXIMUM_INT_DEPTH_CONFIG = "FNC1:5,8000.0,1.0,.01"                                   
MAX_LAYER_THICKNESS_CONFIG = "FNC1:400,31000.0,0.1,.01"                              
REGRID_COMPRESSIBILITY_FRACTION = 0.01                                               
BOUNDARY_EXTRAPOLATION = True                                                        
DYNAMIC_SURFACE_PRESSURE = True 
#override USE_NEUTRAL_DIFFUSION = True                                               
#override KHTR = 300.                                                                
KH_RES_FN_POWER = 100                                                                
MEKE_KHTH_FAC = 1.0                                                                  
VISC_RES_FN_POWER = 100 
#override DT = 2400
#override DT_THERM = 10800
#override DIABATIC_FIRST = False
THERMO_SPANS_COUPLING = True
#override USE_generic_tracer = True
#override CHL_FROM_FILE = False
#override USE_RIVER_HEAT_CONTENT = True
#override USE_CALVING_HEAT_CONTENT = True

#override OCEAN_SURFACE_STAGGER = "C"
#override TOPO_EDITS_FILE       = ""
DIAG_REMAP_Z_GRID_DEF = "FILE:analysis_vgrid_lev35.v1.nc,zw"

#override ENERGYSAVEDAYS = 30

MOM_OVERRIDE_EOF

cat > $work/INPUT/SIS_override << SIS_OVERRIDE_EOF
#override NIGLOBAL = 720
#override NJGLOBAL = 576

SIS_OVERRIDE_EOF
     ]]></csh>

    </input>

    <runtime>
        <production simTime="$(PROD_SIMTIME)" units="years" npes="1058" runTime="$(PROD_RUNTIME)">
          <segment simTime="12" units="months" runTime="$(PROD_SEGTIME)"/>
        </production>
      <regression name="basic">
          <run months="1" npes="1921"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1057p5)"/>
      </regression>

      <regression name="rts">
        <run days="15 16" npes="1921" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1057p5)"/>
        <run months="1"   npes="2164" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1300p5)"/>
  	<run days="2"     npes="864"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O648)"/>
  	<run days="2"     npes="1080" runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x2_O864)"/>
      </regression>

      <regression name="debug">
        <run days="2"     npes="432"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x1_O216)"/>
        <run days="1 1"   npes="432"  runTimePerJob="00:30:00" overrideParams="$(domainparams_A216x1_O216)"/>
      </regression>

	<regression name="timings">
          <run months="1" npes="1706"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O842p5)"/>
          <run months="1" npes="1274"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A432x4_O842p5)"/>
          <run months="1" npes="1527"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A576x4_O951p5)"/>
      	</regression>
        <regression name="timings2">
          <run months="1" npes="1921"  runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1057p5)"/>
          <run months="1" npes="2164" runTimePerJob="01:00:00" overrideParams="$(domainparams_A864x2_O1300p5)"/>
          <run months="12 12" npes="1921"  runTimePerJob="16:00:00" overrideParams="$(domainparams_A864x2_O1057p5)"/>
        </regression>


      <reference restart="$(REFERENCE)/archive/1x1m0d_864x2a_1057x1o/restart/00010201.tar"/>
    </runtime>
    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_postprocess']/postProcess/node())"/>
    </postProcess>

</experiment>

<experiment name="CM4_c96L48_am4g10r8_fullchem_2000_OMp5_COBALT_dust1" inherit="CM4_c96L48_am4g10r8_fullchem_2000_OMp5_COBALT">

    <input>
      <namelist name="dust_nml">
       dust_source_name = 'source',
       dust_source_filename = 'dust_source_Iceland_1x1.nc'
       uthresh = 3.5
       coef_emis = 2.5e-10
       do_esm_dust_flux = .true.
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce = .true.
        interp_method = 'first_order'
      </namelist>


      <!-- Input datasets Repeat parent-->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <dataFile label="input" target="INPUT/emissions.nh3.1x1.2000.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/2000/emissions.nh3.1x1.2000_seasonality.nc</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p10_fullchem_2000']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2_Op5grid']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='common_init_csh_blocks']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='OM4_05grid_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='SIS2_data']/input/node())"/>

      <!--COBALT source datasets Changed-->
      <xi:include xpointer="xpointer(//experiment[@name='OBGC_COBALT_Fe_data_p5']/input/node())"/>
	 
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="ncrc">/lustre/f1/unswept/Niki.Zadeh/archive/input/verona/L48regrid/c96L48_initCond.remapped.v20150521.tar</dataSource>
      </dataFile>

     <diagTable order="append">
#================
# sample z DIAGNOSTICS
#================
#===========================
# ocean_cobalt_sample_z
#===========================
"ocean_cobalt_sample",       1,  "days", 1, "days", "time",
 "generic_cobalt","def_fe_Sm",       "def_fe_Sm",          "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","chl",                "chl",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","htotal",             "htotal",             "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","alk",                "alk",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dic",                "dic",                "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","o2",                 "o2",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","lith",                 "lith",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dep_dry_lith",                 "dep_dry_lith",                 "ocean_cobalt_sample","all",.false.,"none",2
 "generic_cobalt","dep_wet_lith",                 "dep_wet_lith",                 "ocean_cobalt_sample","all",.false.,"none",2
#
 "ocean_model","temp","temp","ocean_cobalt_sample","all",.false.,"none",2
 "ocean_model","salt","salt","ocean_cobalt_sample","all",.false.,"none",2
"ocean_cobalt_sample_z",       0,  "days", 1, "days", "time",
 "generic_cobalt_z_new","def_fe_Sm",       "def_fe_Sm",          "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","chl",                "chl",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","htotal",             "htotal",             "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","alk",                "alk",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dic",                "dic",                "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","o2",                 "o2",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","lith",                 "lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dep_dry_lith",                 "dep_dry_lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
 "generic_cobalt_z_new","dep_wet_lith",                 "dep_wet_lith",                 "ocean_cobalt_sample_z","all",.false.,"none",2
##                                                                                                                                                             11
 "ocean_model_z_new","temp","temp","ocean_cobalt_sample_z","all",.false.,"none",2
 "ocean_model_z_new","salt","salt","ocean_cobalt_sample_z","all",.false.,"none",2
"atmos_dust_sample",       1,  "days", 1, "days", "time",
"tracer" , "dust_ddep", "dust_ddep", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust_emis", "dust_emis", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust1_setl", "dust1_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust2_setl", "dust2_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust3_setl", "dust3_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust4_setl", "dust4_setl", "atmos_dust_sample","all",.false.,"none",2
"tracer" , "dust5_setl", "dust5_setl", "atmos_dust_sample","all",.false.,"none",2
"dynamics",  "dust1",  "dust1",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust2",  "dust2",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust3",  "dust3",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust4",  "dust4",  "atmos_dust_sample", "all", .false.,  "none", 2
"dynamics",  "dust5",  "dust5",  "atmos_dust_sample", "all", .false.,  "none", 2

     </diagTable>
    </input>
</experiment>

  <experiment name="faste2e" inherit="CM4_c96L32_am4g10r8_2000">
    <description
communityProject="GFDL-Niki.Zadeh" 
communityModel="CM4_c96L32_am4g5_2000_meke_dEddParameters_1_ELASTIC_KPP10_BT_2 re-post-processed $(FRE_VERSION)" 
communityModelID="CM4_c96L32_am4g5_2000_meke_dEddParameters_1_ELASTIC_KPP10_BT_2"
communityExperimentName="$(name)">
This  is an experiment to simulate the post-processing of any experiment given the history data on gfdl archive.

This is designed for the purposes of quicklly testing post-processing workflow for existing history data ( that would otherwise require too much time and compute resources to regenerate from scratch).

This instance was run with fre version $(FRE_VERSION) initiating on $(platform)

    </description>
    <communityComment>
The &lt;a href=""&gt; original experiment &lt;/a&gt; was run by Bill Hurlin on $(platform)

For more information on CM4 coupled models please refer to the
&lt;a href="http://wiki.gfdl.noaa.gov/index.php/MDT_Coupled"&gt; Coupled Working Group Wiki.  &lt;/a&gt;
    </communityComment>
    <scenario 
      communityForcing="N/A"
      startTime="$(EXP_CPLD_START)"
      endTime="$(EXP_CPLD_END)" 
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      branch_time="0.0">
    </scenario>
     <input>
      <!--get arbitrary small data files to avoid getting all the real huge data--> 
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/am4_optical_table_20150325.dat</dataSource>
      </dataFile>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/am4_optical_table_20150325.dat</dataSource>
      </dataFile>

      <csh type="always">
        <![CDATA[
#NOT TO BE USED WITH REGULAR FRE RUNS!! ONLY FOR TESTING!!

cat > $work/additional_setup << link_hist_EOF
\rm -rf /archive/Niki.Zadeh/$(FRE_STEM)/$(name)/gfdl.ncrc2-intel-prod-openmp/history/\$firstDate.nc.tar
ln -s  /archive/Bill.Hurlin/$(FRE_STEM)/CM4_c96L32_am4g5_2000_sis2_meke_dEddParameters_1_ELASTIC_KPP10_BT_2/gfdl.ncrc2-intel-prod-openmp/history/\$firstDate.nc.tar /archive/Niki.Zadeh/$(FRE_STEM)/$(name)/gfdl.ncrc2-intel-prod-openmp/history/
link_hist_EOF

chmod +x $work/additional_setup
module swap gcp gcp/test
gcp $work/additional_setup gfdl:$(NB_ROOT)/mom6/


#Override the runCommand 
unalias runCommand
@ currentSegp1 = $currentSeg + 1
cat > $work/time_stamp.out << TIMESTAMP_EOF
   $currentSeg   1   1   0   0   0  Jan
   $currentSegp1 1   1   0   0   0  Jan
TIMESTAMP_EOF

alias runCommand 'touch dummy_history_${currentSeg}.nc;touch some_dummy_text.out;mkdir RESTART;touch RESTART/dummy_restart.res.nc;sleep 300'
       ]]>
      </csh>
     </input>
    <runtime>
      <production simTime="$(PROD_SIMTIME)" units="years" npes="32" runTime="01:00:00">
           <segment simTime="12" units="months" runTime="00:05:00"/>
       </production>
    </runtime>
 </experiment>
 


</experimentSuite>


